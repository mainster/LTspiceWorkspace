Version 4
SHEET 1 1884 1188
WIRE 368 -464 272 -464
WIRE 272 -448 272 -464
WIRE 368 -448 368 -464
WIRE 1056 -352 1056 -368
WIRE 960 -272 928 -272
WIRE 1056 -272 1056 -288
WIRE 1056 -272 1040 -272
WIRE 1072 -272 1056 -272
WIRE 1088 -272 1072 -272
WIRE 336 -240 336 -272
WIRE 464 -240 464 -272
WIRE 624 -240 624 -272
WIRE 272 -192 256 -192
WIRE 544 -192 528 -192
WIRE 560 -192 544 -192
WIRE 256 -144 256 -192
WIRE 624 -128 624 -144
WIRE 336 -96 336 -144
WIRE 464 -96 464 -144
WIRE 464 -96 336 -96
WIRE 544 -96 544 -192
WIRE 544 -96 464 -96
WIRE 336 -80 336 -96
WIRE 464 -32 464 -48
WIRE 624 -16 624 -48
WIRE 736 -16 624 -16
WIRE 256 0 256 -64
WIRE 256 0 224 0
WIRE 336 16 336 0
WIRE 624 32 624 -16
WIRE 736 32 736 -16
WIRE 256 48 256 0
WIRE 464 80 464 48
WIRE 464 80 352 80
WIRE 544 80 464 80
WIRE 352 112 352 80
WIRE 464 128 464 80
WIRE 624 128 624 112
WIRE 736 144 736 96
WIRE 256 160 256 128
WIRE 288 160 256 160
WIRE 544 176 544 80
WIRE 544 176 528 176
WIRE 560 176 544 176
WIRE 912 224 848 224
WIRE 960 224 912 224
WIRE 1152 240 1088 240
WIRE 1200 240 1152 240
WIRE 208 256 160 256
WIRE 224 256 208 256
WIRE 352 256 352 208
WIRE 464 256 464 224
WIRE 624 256 624 224
WIRE 848 256 848 224
WIRE 1088 272 1088 240
WIRE 160 288 160 256
WIRE 848 368 848 336
WIRE 160 384 160 368
WIRE 1088 384 1088 352
WIRE 1120 448 1072 448
WIRE 1136 448 1120 448
WIRE 320 592 320 576
WIRE 416 592 416 576
WIRE 544 592 544 576
WIRE 640 592 640 576
WIRE 320 720 320 672
WIRE 336 720 320 720
WIRE 416 720 416 672
WIRE 416 720 400 720
WIRE 544 720 544 672
WIRE 544 720 496 720
WIRE 560 720 544 720
WIRE 640 720 640 672
WIRE 640 720 624 720
WIRE 320 800 320 720
WIRE 640 800 640 720
WIRE 416 848 384 848
WIRE 576 848 544 848
WIRE 320 944 320 896
WIRE 640 944 640 896
FLAG 624 256 0
FLAG 464 256 0
FLAG 464 -48 V+
FLAG 352 256 0
FLAG 160 384 0
FLAG 1072 -272 V+
FLAG 336 16 0
FLAG 624 -272 V+
FLAG 464 -272 V+
FLAG 336 -272 V+
FLAG 624 -16 mir
FLAG 848 368 0
FLAG 912 224 dmir_pro_us
FLAG 1088 384 0
FLAG 1152 240 dmir_pro_5ms
FLAG 272 -368 0
FLAG 368 -368 0
FLAG 224 0 I_ctrl
FLAG 1056 -368 0
FLAG 208 256 I_ctrl
FLAG 736 144 0
FLAG 320 944 0
FLAG 640 944 0
FLAG 320 576 V+
FLAG 416 576 V+
FLAG 544 576 V+
FLAG 640 576 V+
FLAG 1120 448 C1_in_nF
FLAG 496 720 C2
SYMBOL EIT_Semiconductors\\npn 560 128 R0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL EIT_Semiconductors\\npn 528 128 M0
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL res 448 -48 R0
SYMATTR InstName R1
SYMATTR Value 2k
SYMBOL EIT_Semiconductors\\npn 288 112 R0
WINDOW 3 81 116 Left 2
SYMATTR Value 2N3904
SYMATTR InstName Q3
SYMBOL source-V 160 272 M0
WINDOW 3 -480 90 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 {Vplus} 0 100n 100n {1/(2*fp)} {1/(fp)})
SYMATTR InstName V1
SYMBOL cap 1040 -288 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C3
SYMATTR Value 100µ
SYMBOL source-Vmarker 928 -272 R0
SYMATTR Value V={Vplus}
SYMATTR InstName U2
SYMBOL EIT_Semiconductors\\pnp 560 -144 M180
SYMATTR InstName Q4
SYMATTR Value 2N3906
SYMBOL EIT_Semiconductors\\pnp 528 -144 R180
WINDOW 3 94 88 Left 2
SYMATTR Value 2N3906
SYMATTR InstName Q5
SYMBOL res 320 -96 R0
SYMATTR InstName R4
SYMATTR Value 2k
SYMBOL EIT_Semiconductors\\pnp 272 -144 M180
WINDOW 3 92 120 Left 2
SYMATTR Value 2N3906
SYMATTR InstName Q6
SYMBOL res 640 -144 M0
WINDOW 0 35 64 Left 2
WINDOW 3 40 44 Left 2
SYMATTR InstName Rshsrc
SYMATTR Value 1m
SYMBOL res 640 16 M0
SYMATTR InstName Rshsink
SYMATTR Value 1m
SYMBOL bv 848 240 R0
SYMATTR InstName B1
SYMATTR Value V=ddt(V(mir)*1e-6)
SYMBOL bv 1088 256 R0
SYMATTR InstName B2
SYMATTR Value V=ddt(V(mir)*5e-3)
SYMBOL source-V 272 -464 R0
WINDOW 3 -12 -19 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(0 1 100k)
SYMATTR InstName V3
SYMBOL res 352 -464 R0
SYMATTR InstName R5
SYMATTR Value 1
SYMBOL res 240 -160 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 240 32 R0
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res 944 -256 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R9
SYMATTR Value .1
SYMBOL cap 720 32 R0
SYMATTR InstName C2
SYMATTR Value 3µ
SYMBOL res 304 576 R0
SYMATTR InstName R3
SYMATTR Value {R1}
SYMBOL res 400 576 R0
WINDOW 3 30 77 Left 2
SYMATTR Value {R2}
SYMATTR InstName R6
SYMBOL cap 336 736 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C1
SYMATTR Value {C1}
SYMBOL EIT_Semiconductors\\npn 576 800 R0
WINDOW 3 50 69 Left 2
SYMATTR Value BC547B
SYMATTR InstName Q7
SYMBOL res 656 576 M0
SYMATTR InstName R7
SYMATTR Value {R4}
SYMBOL res 560 576 M0
WINDOW 3 28 76 Left 2
SYMATTR Value {R3}
SYMATTR InstName R10
SYMBOL cap 624 736 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C4
SYMATTR Value {C2}
SYMBOL EIT_Semiconductors\\npn 384 800 M0
WINDOW 3 -30 107 Left 2
SYMATTR Value BC547B
SYMATTR InstName Q8
SYMBOL MDB_sym\\wirecross 480 784 R0
SYMATTR InstName U1
SYMBOL source-Vmarker 1072 448 R0
SYMATTR Value V={C1/1e-9}
SYMATTR InstName U3
TEXT 824 -504 Left 2 !.tran {3/fr} startup
TEXT 1168 -312 Left 2 !.param Vplus = 10V\n.param fp = 500\n.param Tp = 1/fp\n;.param Td = 0.05*Tp*0\n.param Td = 1u
TEXT 872 -192 Left 2 ;.step param set list 1 0
TEXT 728 568 Left 2 !.param fr = 500\n.param R1 = 470k\n.param R2 = 150*R1\n;.param C1 = 100n\n \n; fr = 1/( ln(2)*R*C)\n; fr = 1/( ln(2)*2*R2*C1)\n.param C1 = 1/( ln(2)*2*R2*fr )\n.param R3 = R2\n.param R4 = R1\n.param C2 = C1
TEXT 448 480 Left 2 !.ic V(c2)=0
