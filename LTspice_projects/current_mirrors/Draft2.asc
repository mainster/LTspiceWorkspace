Version 4
SHEET 1 880 776
WIRE 320 -576 320 -608
WIRE -320 -528 -608 -528
WIRE -64 -528 -320 -528
WIRE 320 -480 320 -496
WIRE -320 -464 -320 -528
WIRE -320 -464 -384 -464
WIRE -240 -464 -320 -464
WIRE -64 -464 -64 -528
WIRE -64 -464 -144 -464
WIRE 0 -464 -64 -464
WIRE -384 -448 -384 -464
WIRE -320 -448 -320 -464
WIRE -64 -448 -64 -464
WIRE 0 -448 0 -464
WIRE -240 -432 -240 -464
WIRE -144 -432 -144 -464
WIRE -608 -416 -608 -528
WIRE -608 -416 -672 -416
WIRE -528 -416 -608 -416
WIRE -672 -400 -672 -416
WIRE -608 -400 -608 -416
WIRE -528 -384 -528 -416
WIRE -384 -352 -384 -368
WIRE -320 -352 -320 -368
WIRE -320 -352 -384 -352
WIRE -240 -352 -240 -384
WIRE -192 -352 -240 -352
WIRE -144 -352 -144 -384
WIRE -144 -352 -192 -352
WIRE -64 -352 -64 -368
WIRE -64 -352 -144 -352
WIRE 0 -352 0 -368
WIRE 0 -352 -64 -352
WIRE -672 -304 -672 -320
WIRE -608 -304 -608 -320
WIRE -608 -304 -672 -304
WIRE -528 -304 -528 -336
WIRE -192 -304 -192 -352
WIRE -192 -304 -528 -304
WIRE 256 -304 240 -304
WIRE 304 -304 256 -304
WIRE 240 -272 240 -304
WIRE -320 -256 -320 -352
WIRE -320 -256 -336 -256
WIRE -64 -256 -64 -352
WIRE -48 -256 -64 -256
WIRE -608 -224 -608 -304
WIRE -320 -224 -320 -256
WIRE 240 -192 240 -224
WIRE -320 -160 -320 -192
WIRE -320 -160 -384 -160
WIRE -240 -160 -320 -160
WIRE -144 -160 -240 -160
WIRE -64 -160 -64 -256
WIRE 0 -160 -64 -160
WIRE 256 -160 240 -160
WIRE 304 -160 256 -160
WIRE -384 -144 -384 -160
WIRE -320 -144 -320 -160
WIRE -64 -144 -64 -160
WIRE 0 -144 0 -160
WIRE -240 -128 -240 -160
WIRE -144 -128 -144 -160
WIRE 240 -128 240 -160
WIRE -608 -112 -608 -144
WIRE -384 -48 -384 -64
WIRE -320 -48 -320 -64
WIRE -320 -48 -384 -48
WIRE -240 -48 -240 -80
WIRE -240 -48 -320 -48
WIRE -144 -48 -144 -80
WIRE -64 -48 -64 -64
WIRE -64 -48 -144 -48
WIRE -32 -48 -64 -48
WIRE 0 -48 0 -64
WIRE 0 -48 -32 -48
WIRE 240 -48 240 -80
WIRE -64 -32 -64 -48
WIRE -320 16 -320 -48
WIRE -64 64 -64 48
FLAG -608 -112 0
FLAG -320 16 0
FLAG -64 64 0
FLAG -240 -160 G1
FLAG -32 -48 S2
FLAG -320 -528 Vpl
FLAG -144 -352 G3
FLAG -336 -256 A
FLAG -48 -256 B
FLAG 320 -480 0
FLAG 240 -48 0
FLAG 256 -160 nms
FLAG 240 -192 0
FLAG 256 -304 pms
SYMBOL bi -64 -448 M0
WINDOW 3 -312 -197 Left 2
SYMATTR Value I=k3*(V(G3,Vpl)-Vp)**2*buf(V(G3,Vpl)+Vp-.5)
SYMATTR InstName ID1
SYMBOL res -16 -352 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R1
SYMATTR Value {r0}
SYMBOL bi -320 -448 R0
WINDOW 3 -197 -143 Left 2
SYMATTR Value I=k4*(V(G3,Vpl)-Vp)**2*buf(V(G3,Vpl)+Vp-.5)
SYMATTR InstName ID2
SYMBOL bi -608 -400 R0
WINDOW 3 -130 -152 Left 2
SYMATTR InstName ID3
SYMATTR Value I=k5*(V(G3,Vpl)-Vp)**2
SYMBOL source-I -608 -144 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Iref1
SYMATTR Value PULSE(0 1m 0 100m)
SYMBOL res -80 -48 R0
WINDOW 0 38 55 Left 2
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL bi -64 -144 M0
WINDOW 3 -239 246 Left 2
SYMATTR Value I=k2*(V(G1,S2)-Vp)**2*buf(V(G1,S2)-Vp+.5)
SYMATTR InstName ID4
SYMBOL bi -320 -144 M0
WINDOW 3 -89 245 Left 2
SYMATTR Value I=k2*(V(G1)-Vp)**2*buf(V(G1)-Vp+.5)
SYMATTR InstName ID5
SYMBOL MDB_sym\\arrow_curr -320 -208 R0
SYMATTR InstName ID6
SYMBOL res -368 -352 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value {r0}
SYMBOL res -656 -304 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value {r0}
SYMBOL res -368 -160 M0
SYMATTR InstName R5
SYMATTR Value {r0}
SYMBOL res -16 -160 R0
SYMATTR InstName R6
SYMATTR Value {r0}
SYMBOL source-V 320 -592 R0
WINDOW 3 -36 142 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(0 1 1k)
SYMATTR InstName V1
SYMBOL MDB_sym\\bvsmall 240 -96 R0
SYMATTR InstName B1
SYMATTR Value V=buf(V(G1)-Vp+.5)
SYMBOL MDB_sym\\bvsmall 240 -240 R0
SYMATTR InstName B2
SYMATTR Value V=buf(V(G3,Vpl)+Vp-.5)
TEXT -768 136 Left 2 !.param K1 = 2m\n.param K2 = 2m\n.param K3 = 2m\n.param K4 = 2m\n.param K5 = 2m
TEXT -760 8 Left 2 !.param ref = 10u\n.param r0=100e6\n.param VT0=2\n.param VP=VT0
TEXT 144 -416 Left 2 !.tran 100m
