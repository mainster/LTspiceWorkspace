Version 4
SHEET 1 1376 1288
WIRE -416 -560 -432 -560
WIRE -288 -560 -336 -560
WIRE 288 -560 256 -560
WIRE 320 -560 288 -560
WIRE 480 -560 400 -560
WIRE 560 -560 480 -560
WIRE 656 -560 560 -560
WIRE 688 -560 656 -560
WIRE 800 -560 768 -560
WIRE 864 -560 800 -560
WIRE 912 -560 864 -560
WIRE 560 -544 560 -560
WIRE 800 -544 800 -560
WIRE 480 -528 480 -560
WIRE 912 -528 912 -560
WIRE 656 -512 656 -560
WIRE 560 -496 560 -512
WIRE 784 -480 768 -480
WIRE 800 -480 800 -512
WIRE 800 -480 784 -480
WIRE 384 -464 384 -496
WIRE 288 -448 272 -448
WIRE 336 -448 336 -496
WIRE 336 -448 288 -448
WIRE 480 -400 480 -464
WIRE 560 -400 560 -432
WIRE 656 -400 656 -432
WIRE 800 -400 800 -416
WIRE 912 -400 912 -448
WIRE -560 -336 -624 -336
WIRE -624 -256 -624 -336
WIRE -608 -256 -624 -256
WIRE -512 -256 -528 -256
WIRE -480 -256 -512 -256
WIRE -336 -256 -400 -256
WIRE -240 -192 -240 -224
WIRE -208 -192 -240 -192
WIRE -512 -176 -512 -256
WIRE -464 -176 -512 -176
WIRE -144 -176 -160 -176
WIRE -48 -176 -144 -176
WIRE -16 -176 -48 -176
WIRE -336 -160 -336 -256
WIRE -336 -160 -400 -160
WIRE -256 -160 -336 -160
WIRE -208 -160 -256 -160
WIRE -464 -144 -544 -144
FLAG 800 -400 0
FLAG 480 -400 0
FLAG 912 -400 0
FLAG 864 -560 a
FLAG 560 -560 s
FLAG 384 -464 0
FLAG 192 -448 0
FLAG 288 -448 crtl
FLAG 784 -480 ca
FLAG 560 -400 0
FLAG 656 -400 0
FLAG -176 -144 0
FLAG -240 -224 saw
IOPIN -240 -224 In
FLAG -560 -336 out
IOPIN -560 -336 In
FLAG -256 -160 Cs
FLAG -48 -176 pwm
FLAG -544 -144 soll
IOPIN -544 -144 In
FLAG -432 -560 0
FLAG -288 -560 saw
IOPIN -288 -560 Out
FLAG -400 -352 0
FLAG -352 -352 0
FLAG -336 -352 0
FLAG 288 -560 V+
SYMBOL ind 672 -544 R270
WINDOW 0 30 56 VTop 2
WINDOW 3 6 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 20µ
SYMBOL cap 784 -480 R0
SYMATTR InstName C1
SYMATTR Value 7.3µ
SYMBOL schottky 496 -464 R180
WINDOW 0 24 72 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value dx
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 896 -544 R0
SYMATTR InstName RL
SYMATTR Value 33
SYMBOL crtl-V-S 304 -560 R270
WINDOW 0 -19 -8 VRight 2
WINDOW 3 27 37 VRight 2
SYMATTR InstName S1
SYMATTR Value swx
SYMBOL source-V 288 -448 R90
WINDOW 0 29 -2 VRight 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 56 -156 VRight 2
SYMATTR InstName V2
SYMATTR Value PULSE(0 2.5 0 1p 1p {pw*T} {T})
SYMBOL cap 544 -496 R0
SYMATTR InstName C2
SYMATTR Value 100p
SYMBOL res 640 -528 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL MDB_sym\\jumperSetable 0 -176 M0
SYMATTR InstName U5
SYMBOL EIT_Semiconductors\\comp_oc -176 -176 R0
WINDOW 0 1 -28 Left 2
WINDOW 3 9 26 Invisible 2
WINDOW 38 -43 62 Left 2
SYMATTR InstName U6
SYMBOL EIT_Semiconductors\\op_3 -432 -160 R0
WINDOW 0 -5 34 Left 2
WINDOW 123 -17 69 Invisible 2
WINDOW 3 -16 43 Invisible 2
SYMATTR InstName U7
SYMATTR Value Vp={Vcc*.98} Vm={Vee*.98} Ilim=20m
SYMBOL res -496 -240 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value {R2}
SYMBOL res -624 -240 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value {R1}
SYMBOL cap -400 -336 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C4
SYMATTR Value {Cc}
SYMBOL voltage -320 -560 R90
WINDOW 123 74 56 VTop 2
WINDOW 39 53 56 VTop 2
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName V4
SYMATTR Value PULSE({lSaw} {uSaw} 0 {T} 1n 1n {T+2n})
SYMBOL MDB_sym\\isoR 800 -528 R0
WINDOW 0 13 -13 Left 2
WINDOW 3 10 13 Left 2
SYMATTR InstName R7
SYMATTR Value 0.3
SYMBOL MDB_sym\\isoR 560 -528 R0
WINDOW 0 9 -10 Left 2
WINDOW 3 -32 -10 Left 2
SYMATTR InstName R8
SYMATTR Value 10
SYMBOL MDB_sym\\source-Vmarker 256 -560 R0
SYMATTR Value V=20V
SYMATTR InstName U1
TEXT 136 -136 Left 2 !.param Buck = 1\n+ Ca = 47uF\n+ Ia = 1.5A\n+ L1 = 20uH\n+ Rs = 0.1\n+ uSaw = 10V\n+ lSaw = -10V\n+ Vd0 = .5V\n \n+ Vin = 20V\n+ Vline = 3V
TEXT 352 -224 Left 2 !.tran 20m
TEXT 480 -144 Left 2 !.param opamp=1\n+ Vcc = 10V\n+ Vee = -10V
TEXT 320 -144 Left 2 !.param ctrl=1\n+ Vsoll = 5.5V\n+ kp = 15\n+ ki = 0.01\n \n+ pw = {t1/T}\n+ t1 = 0.75*T\n+ T = 15us \n+ t2 = T;\n \n+ R1 = 4k7\n+ R2 = {R1*kp}\n+ Cc = 1/(ki*R1)\n \n+Csaw = 1n
TEXT 744 -632 Left 2 ;.ic V(Ca) = 3.3V
