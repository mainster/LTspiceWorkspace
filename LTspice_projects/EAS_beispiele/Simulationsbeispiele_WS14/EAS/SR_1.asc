Version 4
SHEET 1 1084 1364
WIRE 0 -32 -112 -32
WIRE 96 -32 0 -32
WIRE -112 -16 -112 -32
WIRE 96 0 96 -32
WIRE 0 16 -48 16
WIRE 32 16 0 16
WIRE 32 64 16 64
WIRE -112 80 -112 64
WIRE 16 96 16 64
WIRE 96 112 96 80
WIRE 96 112 64 112
WIRE 144 112 96 112
WIRE 176 112 144 112
WIRE 304 112 256 112
WIRE 368 112 304 112
WIRE 400 112 368 112
WIRE 304 128 304 112
WIRE 400 128 400 112
WIRE -48 144 -48 16
WIRE 96 144 96 112
WIRE 672 160 592 160
WIRE 592 208 592 160
WIRE 96 224 96 208
WIRE 304 224 304 192
WIRE 400 224 400 208
WIRE -48 240 -48 224
WIRE 592 304 592 288
WIRE -32 400 -80 400
WIRE 64 400 -32 400
WIRE 64 432 64 400
WIRE -32 448 -80 448
WIRE 0 448 -32 448
WIRE 0 496 -16 496
WIRE -16 528 -16 496
WIRE 64 544 64 512
WIRE 80 544 64 544
WIRE 112 544 80 544
WIRE 240 544 192 544
WIRE 304 544 240 544
WIRE 240 560 240 544
WIRE 496 560 496 544
WIRE -80 576 -80 448
WIRE 64 576 64 544
WIRE 704 608 704 544
WIRE 64 656 64 640
WIRE 240 656 240 624
WIRE 496 656 496 640
WIRE -80 672 -80 656
WIRE 640 848 560 848
WIRE 720 848 640 848
WIRE 560 880 560 848
WIRE 560 976 560 960
WIRE 32 1120 32 1088
WIRE 48 1120 32 1120
WIRE 80 1120 48 1120
WIRE 208 1120 160 1120
WIRE 272 1120 208 1120
WIRE 304 1120 272 1120
WIRE 208 1136 208 1120
WIRE 304 1136 304 1120
WIRE 32 1152 32 1120
WIRE 32 1232 32 1216
WIRE 208 1232 208 1200
WIRE 304 1232 304 1216
FLAG 304 224 0
FLAG 400 224 0
FLAG 96 224 0
FLAG -112 80 0
FLAG -48 240 0
FLAG 16 96 0
FLAG 144 112 s
FLAG 368 112 out
FLAG 0 -32 e
FLAG 0 16 crtl
FLAG 592 304 0
FLAG 240 656 0
FLAG 496 656 0
FLAG 64 656 0
FLAG 80 544 sb
FLAG 304 544 outb
FLAG -80 672 0
FLAG -16 528 0
FLAG -32 400 e
FLAG -32 448 crtlb
FLAG 208 1232 0
FLAG 304 1232 0
FLAG 32 1232 0
FLAG 48 1120 sc
FLAG 272 1120 outc
FLAG 496 544 0
FLAG 560 976 0
FLAG 640 848 Vd2_open
FLAG 704 480 0
FLAG 704 688 0
SYMBOL ind 160 128 R270
WINDOW 0 30 56 VTop 2
WINDOW 3 6 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 50µ
SYMBOL cap 288 128 R0
WINDOW 3 -63 67 Left 2
SYMATTR Value {ca} IC=5
SYMATTR InstName C1
SYMBOL res 384 112 R0
SYMATTR InstName R1
SYMATTR Value {RL}
SYMBOL diode 112 208 R180
WINDOW 0 -44 35 Left 2
WINDOW 3 -56 4 Left 2
SYMATTR InstName D1
SYMATTR Value my_d
SYMBOL crtl-V-S 96 -16 R0
SYMATTR InstName S1
SYMATTR Value my_sw
SYMBOL source-V -112 -32 R0
SYMATTR InstName V1
SYMATTR Value 15
SYMBOL source-V -48 128 R0
WINDOW 3 -114 152 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 2.5 1u 1p 1p {p*Tper} {Tper})
SYMATTR InstName Vst
SYMBOL source-V 592 192 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value SINE(0 1 1meg)
SYMBOL ind 96 560 R270
WINDOW 0 30 56 VTop 2
WINDOW 3 6 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value 50µ
SYMBOL cap 224 560 R0
WINDOW 3 -63 67 Left 2
SYMATTR Value 1000µ
SYMATTR InstName C2
SYMBOL res 480 544 R0
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL diode 80 640 R180
WINDOW 0 -44 35 Left 2
WINDOW 3 -56 4 Left 2
SYMATTR InstName D2
SYMATTR Value my_d2
SYMBOL crtl-V-S 64 416 R0
SYMATTR InstName S2
SYMATTR Value my_sw
SYMBOL source-V -80 560 R0
WINDOW 3 -159 175 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 2.5 0 1p 1p 25u 1000u)
SYMATTR InstName Vst1
SYMBOL ind 64 1136 R270
WINDOW 0 30 56 VTop 2
WINDOW 3 6 56 VBottom 2
SYMATTR InstName L3
SYMATTR Value 50µ
SYMBOL cap 192 1136 R0
WINDOW 3 -63 67 Left 2
SYMATTR Value {ca}
SYMATTR InstName C3
SYMBOL res 288 1120 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL diode 48 1216 R180
WINDOW 0 -44 35 Left 2
WINDOW 3 -56 4 Left 2
SYMATTR InstName D3
SYMATTR Value my_d
SYMBOL bv 560 864 R0
SYMATTR InstName B1
SYMATTR Value V={n*VT*ln( I(L2)/Isd2 )}
SYMBOL diode 720 544 R180
WINDOW 0 -44 35 Left 2
WINDOW 3 -56 4 Left 2
SYMATTR InstName D4
SYMATTR Value my_d2
SYMBOL MDB_sym\\source-I 704 608 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value 0
TEXT 160 24 Left 2 !.model my_D D(Ron=1m Roff=1T Vfwd=0.4)
TEXT 160 -8 Left 2 !.model my_sw SW(Ron=1m Roff=1T Vt=1.25 Vh=-0.5)
TEXT 488 128 Left 2 ;VA=5V
TEXT 240 56 Left 2 ;P=(VA+VD0)/(VE+VD0)=5,4/15,4=0.35064935064935064935
TEXT 232 -104 Left 2 !.param p=0.35064935064935064935 Tper=20u ca=100u RL=7.13
TEXT -32 -104 Left 2 !.tran 0 500u 0 0.1u
TEXT 120 -64 Left 2 ;.step param ca list 22u 33u 47u 100u
TEXT 168 -32 Left 2 ;.step param RL list 4 5 6 7
TEXT 112 1288 Left 2 !.Ic I(L3) = 0
TEXT 144 696 Left 2 !.Ic V(outb) = 2
TEXT 176 1000 Left 2 !.param IcVc=0
TEXT 88 1024 Left 2 ;.step param IcVc list  0 4
TEXT 104 1328 Left 2 !.Ic V(outc) = 5
TEXT 144 728 Left 2 !.Ic I(L2) = {IL2}
TEXT 328 1280 Left 2 ;.step param IL3 list 0 500m -500m
TEXT 88 1056 Left 2 !.step param IL2 list 0 5
TEXT 192 424 Left 2 !.model my_D2 D (Is={Isd2} N={n})
TEXT 400 704 Left 2 !.param Id0=10A\n.param VT=26mV\n.param Vd0=0.8V\n.param n=1.2\n.param Isd2=Id0/exp( Vd0/( n*VT ) )
TEXT -240 1348 Left 2 !;dc I1 0 15 .1
