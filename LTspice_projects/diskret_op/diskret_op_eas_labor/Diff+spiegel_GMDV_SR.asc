Version 4
SHEET 1 1516 772
WIRE -336 -896 -368 -896
WIRE -368 -864 -368 -896
WIRE -368 -752 -368 -784
WIRE 880 -560 880 -576
WIRE 944 -560 944 -576
WIRE 368 -512 336 -512
WIRE 480 -512 448 -512
WIRE -208 -464 -208 -480
WIRE -160 -464 -160 -480
WIRE 320 -464 288 -464
WIRE 432 -464 400 -464
WIRE 880 -448 880 -480
WIRE 880 -448 816 -448
WIRE 944 -448 944 -480
WIRE 944 -448 880 -448
WIRE 1008 -448 944 -448
WIRE 576 -400 560 -400
WIRE 672 -400 656 -400
WIRE 736 -400 672 -400
WIRE 1104 -400 736 -400
WIRE -208 -368 -208 -384
WIRE -160 -368 -160 -384
WIRE -160 -368 -208 -368
WIRE 816 -368 816 -448
WIRE 1008 -368 1008 -448
WIRE 768 -352 720 -352
WIRE 1104 -352 1104 -400
WIRE 1104 -352 1056 -352
WIRE 576 -320 560 -320
WIRE 672 -320 656 -320
WIRE 720 -320 720 -352
WIRE 720 -320 672 -320
WIRE 736 -320 720 -320
WIRE 752 -320 736 -320
WIRE 1104 -320 1104 -352
WIRE 1104 -320 1072 -320
WIRE -320 -288 -368 -288
WIRE -208 -288 -208 -368
WIRE -208 -288 -320 -288
WIRE -96 -288 -208 -288
WIRE -48 -288 -96 -288
WIRE 384 -288 384 -304
WIRE 416 -288 384 -288
WIRE 384 -272 384 -288
WIRE -368 -240 -368 -288
WIRE -320 -240 -320 -288
WIRE -96 -240 -96 -288
WIRE -48 -240 -48 -288
WIRE 1008 -224 1008 -272
WIRE 1056 -224 1008 -224
WIRE 1120 -224 1088 -224
WIRE 816 -192 816 -272
WIRE 912 -192 816 -192
WIRE 816 -176 816 -192
WIRE 1008 -176 1008 -224
WIRE 1120 -176 1120 -224
WIRE -368 -144 -368 -160
WIRE -320 -144 -320 -160
WIRE -320 -144 -368 -144
WIRE -96 -144 -96 -160
WIRE -48 -144 -48 -160
WIRE -48 -144 -96 -144
WIRE 912 -128 912 -192
WIRE 912 -128 880 -128
WIRE 944 -128 912 -128
WIRE -608 -96 -624 -96
WIRE -512 -96 -528 -96
WIRE -464 -96 -512 -96
WIRE -16 -96 -464 -96
WIRE 480 -96 480 -144
WIRE 432 -80 432 -144
WIRE 1120 -80 1120 -96
WIRE -320 -64 -320 -144
WIRE -96 -64 -96 -144
WIRE 816 -32 816 -80
WIRE 1008 -32 1008 -80
WIRE 1008 -32 816 -32
WIRE 1024 -32 1008 -32
WIRE -608 -16 -624 -16
WIRE -512 -16 -528 -16
WIRE -464 -16 -512 -16
WIRE -384 -16 -464 -16
WIRE -16 -16 -16 -96
WIRE -16 -16 -32 -16
WIRE 432 16 432 0
WIRE 480 16 480 -16
WIRE 480 16 432 16
WIRE 176 80 160 80
WIRE 352 80 256 80
WIRE 432 80 432 16
WIRE 432 80 416 80
WIRE 1136 80 1088 80
WIRE 432 128 432 80
WIRE 432 128 304 128
WIRE 560 128 432 128
WIRE -320 176 -320 32
WIRE -208 176 -320 176
WIRE -96 176 -96 32
WIRE 64 176 -96 176
WIRE 160 176 160 80
WIRE 160 176 96 176
WIRE 240 176 160 176
WIRE 432 176 432 128
WIRE -320 192 -320 176
WIRE -96 192 -96 176
WIRE 720 208 688 208
WIRE 752 208 720 208
WIRE 368 224 304 224
WIRE 688 224 688 208
WIRE -208 240 -208 176
WIRE -208 240 -256 240
WIRE -160 240 -208 240
WIRE 304 240 304 224
WIRE 688 320 688 304
WIRE -320 336 -320 288
WIRE -320 336 -368 336
WIRE -96 336 -96 288
WIRE -96 336 -320 336
WIRE 304 336 304 320
WIRE 304 336 -96 336
WIRE 432 336 432 272
WIRE 432 336 304 336
WIRE 528 336 432 336
WIRE 1120 384 1056 384
WIRE 1056 400 1056 384
WIRE 720 432 688 432
WIRE 752 432 720 432
WIRE 688 464 688 432
WIRE 1056 496 1056 480
WIRE 1152 496 1136 496
FLAG -464 -16 IN-
FLAG -208 -480 V+
IOPIN -208 -480 In
FLAG 432 -144 V+
FLAG 560 128 out
FLAG 432 -464 V+
IOPIN 432 -464 Out
FLAG 480 -512 V-
IOPIN 480 -512 Out
FLAG -624 -96 0
FLAG 528 336 V-
IOPIN 528 336 In
FLAG -368 336 V-
IOPIN -368 336 In
FLAG 480 -144 V+
FLAG -160 -480 V+
IOPIN -160 -480 In
FLAG -464 -96 IN+
FLAG -624 -16 0
FLAG 416 -288 out
FLAG 384 -208 V-
IOPIN 384 -208 In
FLAG 384 -368 V+
IOPIN 384 -368 In
FLAG 1136 80 GMDV
FLAG 688 320 0
FLAG 720 208 SR_us_mess
FLAG 944 -576 V+
IOPIN 944 -576 In
FLAG 880 -576 V+
IOPIN 880 -576 In
FLAG 736 -400 in+2
FLAG 736 -320 in-2
FLAG 1024 -32 V-
IOPIN 1024 -32 In
FLAG 1120 -80 0
FLAG 560 -400 0
FLAG 560 -320 0
FLAG -368 -672 0
FLAG -336 -896 V+
IOPIN -336 -896 In
FLAG 704 -144 0
FLAG 704 -240 0
FLAG 640 -192 0
FLAG 1296 -320 0
FLAG 1296 -416 0
FLAG 1248 -400 0
FLAG 720 432 SR_us_calc
FLAG 688 544 0
FLAG 1152 496 0
FLAG 1120 384 V+
IOPIN 1120 384 In
SYMBOL EIT_Semiconductors\\pnp -32 32 R180
WINDOW 3 77 0 Left 2
SYMATTR Value Px
SYMATTR InstName Q1
SYMBOL EIT_Semiconductors\\pnp -384 32 M180
WINDOW 3 75 75 Left 2
SYMATTR Value Px
SYMATTR InstName Q2
SYMBOL res -336 -256 R0
SYMATTR InstName RE1
SYMATTR Value 1.8k
SYMBOL res -80 -256 M0
SYMATTR InstName RE2
SYMATTR Value 1.8k
SYMBOL res -352 -256 M0
SYMATTR InstName JD1
SYMATTR Value {JD1}
SYMBOL res -64 -256 R0
SYMATTR InstName JD2
SYMATTR Value {JD1}
SYMBOL EIT_Semiconductors\\npn -256 192 M0
SYMATTR InstName Q3
SYMATTR Value Nx
SYMBOL EIT_Semiconductors\\npn -160 192 R0
SYMATTR InstName Q4
SYMATTR Value Nx
SYMBOL source-I -208 -384 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value {I0}
SYMBOL source-V -512 -112 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -11 -11 Left 2
WINDOW 3 -331 614 Left 2
SYMATTR InstName V3
SYMATTR Value PULSE(-1 1 0 10n 10n {1/(2*fsig)} {1/fsig})
SYMBOL res 160 96 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName J5
SYMATTR Value {J5}
SYMBOL cap 416 64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName Ccomp1
SYMATTR Value {Cc}
SYMBOL EIT_Semiconductors\\npn 368 176 R0
SYMATTR InstName Q6
SYMATTR Value CA3046
SYMBOL EIT_Semiconductors\\npn 240 128 R0
SYMATTR InstName Q7
SYMATTR Value CA3046
SYMBOL res 288 224 R0
SYMATTR InstName RE5
SYMATTR Value 22k
SYMBOL source-I 432 0 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I2
SYMATTR Value {I1}
SYMBOL MDB_sym\\arrow_curr 80 176 R90
WINDOW 0 -4 0 VBottom 2
SYMATTR InstName IDV
SYMATTR Value2 Rsh=1
SYMBOL source-Vmarker 288 -464 R0
WINDOW 3 -60 0 Center 2
SYMATTR Value V=10V
SYMATTR InstName U1
SYMBOL source-Vmarker 336 -512 R0
WINDOW 3 -60 0 Center 2
SYMATTR Value V=-10V
SYMATTR InstName U2
SYMBOL res 304 -448 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value .1
SYMBOL res 352 -528 M90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R4
SYMATTR Value .1
SYMBOL res -512 -112 R90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 Invisible 2
SYMATTR InstName iso1
SYMATTR Value 100meg
SYMBOL res -176 -480 R0
SYMATTR InstName RE3
SYMATTR Value 100meg
SYMBOL res 464 -112 R0
SYMATTR InstName RE4
SYMATTR Value 100meg
SYMBOL res -512 -32 R90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 Invisible 2
SYMATTR InstName iso2
SYMATTR Value 100meg
SYMBOL diode 400 -304 R180
WINDOW 0 24 72 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value Dx
SYMBOL diode 400 -208 R180
WINDOW 0 24 72 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value Dx
SYMBOL source-Vmarker 1088 80 R0
WINDOW 3 -99 0 Center 2
SYMATTR Value V=alpha*I0/(2*VT) * 1e-6
SYMATTR InstName U3
SYMBOL bv 688 208 R0
WINDOW 3 -80 147 Left 2
SYMATTR InstName B1
SYMATTR Value V=ddt(V(out))*1e-6
SYMBOL EIT_Semiconductors\\pnp 640 -144 M180
WINDOW 3 51 33 Left 2
WINDOW 0 52 54 Left 2
SYMATTR Value Px
SYMATTR InstName Q8
SYMBOL source-I 944 -480 M180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I3
SYMATTR Value {I0}
SYMBOL res 896 -576 M0
SYMATTR InstName RE6
SYMATTR Value 100meg
SYMBOL EIT_Semiconductors\\npn 880 -176 M0
SYMATTR InstName Q9
SYMBOL EIT_Semiconductors\\npn 944 -176 R0
SYMATTR InstName Q10
SYMBOL res 1104 -192 R0
SYMATTR InstName R1
SYMATTR Value 10
SYMBOL MDB_sym\\arrow_curr 1072 -224 R90
WINDOW 0 -4 0 VBottom 2
SYMATTR InstName IDV2
SYMATTR Value2 Rsh=1
SYMBOL source-V 672 -416 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -11 -11 Left 2
WINDOW 3 -387 -246 Left 2
SYMATTR InstName V1
SYMATTR Value PULSE(-1 1 0 10n 10n {1/(2*fsig)} {1/fsig})
SYMBOL res 672 -416 R90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 Invisible 2
SYMATTR InstName iso3
SYMATTR Value 100meg
SYMBOL res 672 -336 R90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 Invisible 2
SYMATTR InstName iso4
SYMATTR Value 100meg
SYMBOL res -384 -768 R0
SYMATTR InstName R2
SYMATTR Value 1
SYMBOL bi -368 -864 R0
SYMATTR InstName GMDV_bjt
SYMATTR Value I=alpha*I0/(2*VT)
SYMBOL EIT_Semiconductors\\pmos 1248 -320 M180
SYMATTR InstName M1
SYMATTR Value PMx
SYMBOL EIT_Semiconductors\\pmos 1056 -272 R180
SYMATTR InstName M2
SYMATTR Value PMx
SYMBOL EIT_Semiconductors\\pmos 768 -272 M180
SYMATTR InstName M3
SYMATTR Value PMx
SYMBOL bv 688 448 R0
SYMATTR InstName B2
SYMATTR Value V=GMDV/Cc * 1e-6
SYMBOL res 1040 480 M90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 1
SYMBOL bi 1056 400 R0
WINDOW 0 32 9 Left 2
WINDOW 3 39 39 Left 2
SYMATTR InstName GMDV
SYMATTR Value I=GMDV
TEXT -432 -336 Left 2 ;PNP-\nDiff. stufe
TEXT -424 384 Left 2 ;Stromspiegel
TEXT 104 -392 Left 2 !.param VBE0=0.6\n.param VT=26m\n.param Cc=10p\n.param I0=80u\n.param I1=400u\n.param fsig=10k\n \n.param open = 100meg\n.param close = 1m\n.param JD1 = CLOSE\n.param JD2 = CLOSE\n.param J5 = CLOSE\n \n.param Ros = 1k\n.param off = 0.5
TEXT -536 -504 Left 2 !;tran {3/fsig*.95}
TEXT -80 -624 Left 2 ;.step param JD1 list 1m 100meg
TEXT 136 384 Left 2 ;Darlington- Stufe
TEXT -464 448 Left 2 ;i_dv=GMDV*v_in
TEXT -456 472 Left 2 ;.param GMDV=alpha*I0/(2*VT)
TEXT 704 -936 Left 2 !.model Nx NPN ( Is={I0/exp(VBE0/VT)} BF={BETA})\n.model Px PNP ( Is={I0/exp(VBE0/VT)} BF={BETA})\n.model NMx NMOS(VT0=2 KP={2*Kn})\n.model PMx PMOS(VT0=-1 KP={2*Kp})\n \n.param Kn=2m\n.param Kp=1m\n.param GMDV = 2*sqrt(0.5*Kp*I0)\n.model Dx D ( Ron=.1  Roff=10meg Vfwd=.1V )
TEXT -72 -600 Left 2 !.param BETA=200\n.param ALPHA=BETA/(1+BETA)
TEXT 416 -736 Left 2 ;.dc V1 -200m 200m 1m
TEXT 424 -696 Left 2 !.dc V1 -500m 500m 1m
RECTANGLE Normal 32 96 -448 -368 2
RECTANGLE Normal 32 408 -448 128 2
RECTANGLE Normal 505 409 112 16 2
