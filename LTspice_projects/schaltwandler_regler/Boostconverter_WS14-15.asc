Version 4
SHEET 1 1648 1864
WIRE -144 624 -160 624
WIRE -80 624 -144 624
WIRE 48 624 0 624
WIRE 112 624 48 624
WIRE 208 624 176 624
WIRE 384 624 208 624
WIRE 480 624 384 624
WIRE 544 624 480 624
WIRE 960 640 960 624
WIRE 384 656 384 624
WIRE 480 656 480 624
WIRE 720 656 720 624
WIRE -160 688 -160 624
WIRE 208 688 208 624
WIRE 48 720 48 624
WIRE 128 736 96 736
WIRE 144 736 128 736
WIRE 384 752 384 736
WIRE 720 752 720 736
WIRE 512 768 432 768
WIRE 832 768 768 768
WIRE 208 800 208 752
WIRE 512 800 512 768
WIRE 832 800 832 768
WIRE 48 816 48 800
WIRE 96 816 96 784
WIRE -160 832 -160 768
WIRE 384 880 384 832
WIRE 432 880 432 816
WIRE 480 880 432 880
WIRE 512 880 480 880
WIRE 720 880 720 832
WIRE 768 880 768 816
WIRE 800 880 800 864
WIRE 800 880 768 880
WIRE 832 880 800 880
WIRE -48 896 -80 896
WIRE -16 896 -48 896
WIRE 224 896 176 896
WIRE 240 896 224 896
WIRE 256 896 240 896
WIRE 480 896 480 880
WIRE 800 896 800 880
WIRE -80 928 -80 896
WIRE 176 928 176 896
WIRE 240 928 240 896
WIRE 960 1008 864 1008
WIRE -80 1024 -80 1008
WIRE 864 1056 864 1008
WIRE -80 1184 -144 1184
WIRE -64 1184 -80 1184
WIRE -80 1216 -144 1216
WIRE -64 1216 -80 1216
WIRE -80 1248 -144 1248
WIRE -64 1248 -80 1248
FLAG 208 800 0
FLAG -160 832 0
FLAG 384 880 0
FLAG 720 880 0
FLAG 480 896 0
FLAG 800 896 0
FLAG 544 624 Va
FLAG -80 1024 0
FLAG 48 816 0
FLAG 96 816 0
FLAG 128 736 VM1
FLAG -48 896 VM1
FLAG -80 1248 T
FLAG -80 1216 t1
FLAG -80 1184 Vapar
FLAG -144 624 Ve
FLAG 864 1136 0
FLAG 176 1008 0
FLAG 224 896 il
FLAG 240 1008 0
FLAG 48 624 sw
FLAG 720 624 0
FLAG 480 736 0
FLAG 384 736 0
FLAG 960 640 0
SYMBOL ind -96 640 R270
WINDOW 0 30 56 VTop 2
WINDOW 3 6 56 VBottom 2
WINDOW 39 -20 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {L1}
SYMBOL cap 192 688 R0
WINDOW 39 24 90 Left 2
SYMATTR InstName C1
SYMATTR Value {Ca}
SYMBOL voltage -160 672 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value {Ve}
SYMBOL sw 384 848 R180
SYMATTR InstName S1
SYMATTR Value SW1
SYMBOL res 704 640 R0
SYMATTR InstName R1
SYMATTR Value 14
SYMBOL sw 720 848 R180
SYMATTR InstName S2
SYMATTR Value SW1
SYMBOL voltage 512 784 R0
WINDOW 3 -163 159 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 1 1m 10n 10n 200m 400m)
SYMATTR InstName V2
SYMBOL voltage 832 784 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -354 194 Left 2
SYMATTR Value PULSE(0 1 35 10n 10n 200m 400m)
SYMATTR InstName V3
SYMBOL voltage -80 912 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -159 152 Left 2
SYMATTR Value PULSE(0 1 0 1p 1p {T*p} {T})
SYMATTR InstName V4
SYMBOL diode 112 640 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value Dx
SYMBOL sw 48 816 R180
SYMATTR InstName S3
SYMATTR Value M1
SYMBOL MDB_sym\\source-Vmarker -144 1184 R0
SYMATTR Value V={Va}
SYMATTR InstName U1
SYMBOL MDB_sym\\source-Vmarker -144 1216 R0
SYMATTR Value V={p*T}
SYMATTR InstName U2
SYMBOL MDB_sym\\source-Vmarker -144 1248 R0
SYMATTR Value V={T}
SYMATTR InstName U3
SYMBOL bv 864 1040 R0
SYMATTR InstName B1
SYMATTR Value V=0
SYMBOL bi 176 1008 R180
WINDOW 0 24 80 Left 2
WINDOW 3 -124 -50 Left 2
SYMATTR InstName B2
SYMATTR Value I={V(Ve)/L1*p*T}
SYMBOL res 224 912 R0
SYMATTR InstName R2
SYMATTR Value 1
SYMBOL MDB_sym\\source-I 480 736 M180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value {Ia}
SYMBOL powcalc 960 496 R0
SYMATTR InstName U4
TEXT -264 1104 Left 2 !.tran 0 40m {40m-4*T} startup
TEXT 224 520 Left 2 !.model SW1 SW(Ron=1m Roff=1Meg Vt=.5 Vh=-.4\n.model M1 SW(Ron=1m Roff=1Meg Vt=.5 Vh=-.4
TEXT 0 1184 Left 2 !.param L1=20u\n.param Ca = 1000µ\n.param Vd0 = 1\n.param Ve = 5V\n.param Va = 14V\n.param Iamin = 1/3\n.param Ia = Iamin\n.param T = 12u\n.param p = {1-Ve/(Va+Vd0)}
TEXT 224 440 Left 2 !.model Dx D ( Is={.2A/exp(Vd0/26m)} n=1)\n.model Dx2 D(Ron=1m Roff=1T Vfwd={Vd0})
TEXT -160 536 Left 2 !.ic V(Va)={Va}\n;.ic I(L2)=3A
TEXT -216 456 Left 2 ;.step param Va list 15 25 50 100
TEXT -248 488 Left 2 ;.step param Ia list .3 .250  .210 .200 .195
TEXT 368 1040 Left 2 !.meas TRAN  ILmax MAX   I(L1)\n.meas TRAN  ILmin MIN   I(L1)\n.meas TRAN  dIL   PARAM ILmax-ILmin\n \n.meas TRAN  ICmax MAX   I(C1)\n.meas TRAN  ICmin MIN   I(C1)\n \n.meas TRAN  t1    time  when I(C1)=ICmax rise=last ; equal to\n.meas TRAN  t01  time  when I(C1)=0 rise=last\n.meas TRAN  t02  time  when I(C1)=0 fall=last\n \n.meas TRAN  dtc2     PARAM t02-t01 \n.meas TRAN  A2       PARAM 1/2*dtc2*ICmax\n.meas TRAN charge PARAM 0+A2 \n.meas TRAN Vr_calc PARAM {charge/Ca}\n \n.meas TRAN Vr PP V(Va) from 35u to 45u
