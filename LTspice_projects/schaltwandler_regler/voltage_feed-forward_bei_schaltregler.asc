Version 4
SHEET 1 1992 808
WIRE 432 -896 400 -896
WIRE 528 -896 432 -896
WIRE 608 -896 528 -896
WIRE 432 -864 432 -896
WIRE -320 -848 -352 -848
WIRE -224 -848 -240 -848
WIRE -160 -848 -192 -848
WIRE -128 -848 -160 -848
WIRE 1296 -816 1296 -832
WIRE -160 -800 -160 -848
WIRE 528 -784 528 -896
WIRE 432 -768 432 -784
WIRE 480 -768 432 -768
WIRE -160 -704 -160 -736
WIRE 432 -704 432 -768
WIRE 16 -688 -16 -688
WIRE 96 -688 64 -688
WIRE 96 -656 96 -688
WIRE 144 -656 96 -656
WIRE 496 -656 480 -656
WIRE 528 -656 528 -688
WIRE 528 -656 496 -656
WIRE 560 -656 528 -656
WIRE 672 -656 640 -656
WIRE 688 -656 672 -656
WIRE 784 -656 768 -656
WIRE 864 -656 784 -656
WIRE 784 -640 784 -656
WIRE 16 -624 -16 -624
WIRE 96 -624 96 -656
WIRE 96 -624 64 -624
WIRE 528 -624 528 -656
WIRE 672 -624 672 -656
WIRE -304 -560 -320 -560
WIRE -144 -560 -224 -560
WIRE 784 -544 784 -560
WIRE 528 -528 528 -560
WIRE 672 -528 672 -560
WIRE 96 -496 64 -496
WIRE 864 -480 864 -656
WIRE 864 -480 720 -480
WIRE 80 -448 64 -448
WIRE 144 -448 128 -448
WIRE 80 -400 -48 -400
WIRE 144 -400 144 -448
WIRE 144 -400 128 -400
WIRE -352 -304 -416 -304
WIRE 128 -272 96 -272
WIRE 160 -272 128 -272
WIRE 128 -256 128 -272
WIRE -416 -224 -416 -304
WIRE -400 -224 -416 -224
WIRE -304 -224 -320 -224
WIRE -288 -224 -304 -224
WIRE -128 -224 -144 -224
WIRE 0 -160 0 -192
WIRE 32 -160 0 -160
WIRE -304 -144 -304 -224
WIRE -256 -144 -304 -144
WIRE 128 -144 128 -176
WIRE 128 -144 96 -144
WIRE 192 -144 128 -144
WIRE 224 -144 192 -144
WIRE -128 -128 -128 -224
WIRE -128 -128 -192 -128
WIRE -16 -128 -128 -128
WIRE 32 -128 -16 -128
WIRE -256 -112 -336 -112
WIRE 336 -16 336 -32
WIRE -96 32 -96 16
WIRE -176 48 -192 48
WIRE 336 80 336 64
WIRE -176 96 -192 96
WIRE -192 128 -192 96
WIRE 32 160 32 128
WIRE 64 160 32 160
WIRE 160 176 128 176
WIRE -96 192 -96 112
WIRE 32 192 -96 192
WIRE 64 192 32 192
WIRE -96 208 -96 192
WIRE 32 272 32 192
WIRE 48 272 32 272
WIRE 160 272 160 176
WIRE 160 272 128 272
WIRE -96 288 -96 272
FLAG 528 -528 0
FLAG 672 -528 0
FLAG 496 -656 sw
FLAG 784 -544 0
FLAG -160 -704 0
FLAG -144 -560 Ve2
FLAG -128 -848 Ve1
FLAG 64 -112 0
FLAG 128 -272 V+
FLAG 0 -192 saw
IOPIN 0 -192 In
FLAG -352 -304 out
IOPIN -352 -304 In
FLAG -16 -128 Cs
FLAG 192 -144 pwm
FLAG 96 -496 soll
IOPIN 96 -496 Out
FLAG 720 -480 out
IOPIN 720 -480 Out
FLAG -336 -112 soll
IOPIN -336 -112 In
FLAG -16 -688 Ve1
FLAG -16 -624 Ve2
FLAG 144 -656 V+
IOPIN 144 -656 BiDir
FLAG 400 -896 V+
IOPIN 400 -896 BiDir
FLAG -192 128 0
FLAG -192 48 V+
IOPIN -192 48 BiDir
FLAG -96 288 0
FLAG -96 16 0
FLAG 96 208 0
FLAG 336 80 0
FLAG 336 -32 saw
IOPIN 336 -32 Out
FLAG 432 -704 pwm
SYMBOL source-Vmarker -352 -848 R0
SYMATTR Value V={Vin}
SYMATTR InstName U1
SYMBOL schottky 544 -560 R180
WINDOW 0 -21 16 VRight 2
WINDOW 3 52 76 VLeft 2
SYMATTR InstName D1
SYMATTR Value MBRS140
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL ind 544 -640 R270
WINDOW 0 30 56 VTop 2
WINDOW 3 6 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {L1}
SYMATTR SpiceLine Rser=1n
SYMBOL cap 656 -624 R0
WINDOW 3 23 55 Left 2
SYMATTR Value {Ca}
SYMATTR InstName C1
SYMBOL source-I 784 -560 M180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 29 -9 Left 2
SYMATTR InstName I1
SYMATTR Value {Ia}
SYMATTR SpiceLine load
SYMBOL MDB_sym\\jumper 752 -720 R0
WINDOW 0 -7 50 Invisible 2
SYMATTR InstName J1
SYMBOL MDB_sym\\isoR -208 -848 R270
WINDOW 0 4 0 VTop 2
WINDOW 3 -28 -1 VTop 2
SYMATTR InstName Rq
SYMATTR Value .1
SYMBOL MDB_sym\\arrow_curr 704 -656 R270
WINDOW 0 4 0 VTop 2
SYMATTR InstName R3
SYMBOL source-V -224 -848 R90
WINDOW 3 73 -23 VRight 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -45 23 VRight 2
SYMATTR Value PULSE(0 {Vline} 10m 1n 1n 1)
SYMATTR InstName V_line1
SYMBOL cap -144 -800 M0
SYMATTR InstName C2
SYMATTR Value 220µ
SYMBOL source-Vmarker -320 -560 R0
SYMATTR Value V={Vin}
SYMATTR InstName U2
SYMBOL source-V -208 -560 R90
WINDOW 3 57 -36 VRight 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -45 23 VRight 2
SYMATTR Value PULSE(0 {Vline} 10m 1n 1n 1)
SYMATTR InstName V_line2
SYMBOL MDB_sym\\jumper 48 -688 R0
SYMATTR InstName X1
SYMBOL MDB_sym\\jumperSetable 240 -144 M0
SYMATTR InstName U5
SYMBOL EIT_Semiconductors\\comp_oc 64 -144 R0
WINDOW 0 1 -28 Left 2
WINDOW 3 9 26 Invisible 2
WINDOW 38 -43 62 Left 2
SYMATTR InstName U6
SYMBOL res 112 -272 R0
SYMATTR InstName R2
SYMATTR Value 4k7
SYMBOL EIT_Semiconductors\\op_3 -224 -128 R0
WINDOW 0 -5 34 Left 2
WINDOW 123 -17 69 Invisible 2
WINDOW 3 -16 43 Invisible 2
SYMATTR InstName U8
SYMATTR Value Vp={Vcc} Vm={Vee} Ilim=20m
SYMBOL res -304 -208 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value {R2}
SYMBOL res -416 -208 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value {R1}
SYMBOL MDB_sym\\source-Vmarker 64 -496 R0
SYMATTR Value V={Vsoll}
SYMATTR InstName U9
SYMBOL source-Vmarker 64 -448 R0
SYMATTR Value V={uSaw}
SYMATTR InstName U3
SYMBOL MDB_sym\\jumper 112 -512 R0
WINDOW 0 -7 50 Invisible 2
SYMATTR InstName X2
SYMBOL cap -208 -208 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C3
SYMATTR Value {Cc}
SYMBOL crtl-V-I_INV -96 16 R0
WINDOW 0 26 78 Left 2
WINDOW 3 30 40 Left 2
SYMATTR InstName G2
SYMATTR Value 100µ
SYMBOL cap -112 208 R0
WINDOW 0 37 20 Left 2
WINDOW 3 32 59 Left 2
SYMATTR InstName C7
SYMATTR Value {Csaw}
SYMBOL EIT_Semiconductors\\comp_oc 96 176 R0
WINDOW 0 1 -28 Left 2
WINDOW 3 79 14 Left 2
WINDOW 38 -32 -57 Left 2
WINDOW 123 78 37 Left 2
SYMATTR InstName U17
SYMBOL source-Vmarker 32 128 R90
SYMATTR Value V={uSaw}
SYMATTR InstName U18
SYMBOL res 32 256 M90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 10
SYMBOL voltage 336 -32 R0
WINDOW 123 74 56 VTop 2
WINDOW 39 53 56 VTop 2
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName V2
SYMATTR Value PULSE(0 1 0 1 0 0 1)
SYMBOL EIT_Semiconductors\\pmos 480 -688 M180
SYMATTR InstName M2
SYMBOL res 416 -768 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName 5R33
SYMATTR Value 56k
TEXT 736 -1008 Center 2 ;_Buckconverter\n_........................\nhttp://www.ti.com.cn/cn/lit/ds/symlink/tps40077.pdf
TEXT 1064 -976 Left 2 ;.op\n.param T = 8us \n+ t1 = 0.75*T\n+ t2 = T;\n+ pw = {t1/T}\n+ Va = 5V\n+ Ia = 1.5A\n+ Ca = 47uF\n+ Vd0 = .5V\n+ T_load = 0\n+ Vin = 20V\n+ Vline = 3V\n+ L1 = 20uH
TEXT -512 -928 Left 2 ;Supply_1
TEXT -488 -736 Left 2 !.ic V(in) = {.7*Vin}
TEXT -512 -640 Left 2 ;Supply_2
TEXT 1056 -616 Left 2 ;.param reg = 0\n+ Kp = 1\n+ R1 = 10k\n+ Rf = {R1*Kp}
TEXT 1232 -1016 Left 2 ;.param Buck = 1\n+ RL = 20meg\n+ Rp = 0.1\n+ Rs = 0.1\n+ L1 = 33u\n+ Ca = 22u\n+ Vd0 = .4V\n+ Ve = 5V\n+ Vcc = 10V\n+ Vsoll = 3V\n+ T = 15us \n+ pk = {(Va+Vd0)/(Ve+Vd0)}\n+ pl = {sqrt(2*L1/T*(Va+Vd0)/((Ve-Va)*(Ve+Vd0))*Ib)}\n+ pw = {if(Ib+.5-Iamin*.999, pk, pl)}\n+ Va = {Vsoll}\n+ Ib = {Iamin*2}\n+ Iamin = 286mA\n+ N = 400\n+ uSaw = 3V\n+ lSaw = 0V\n+ t1 = 0.75*T\n+ t2 = T;\n+ pw = {t1/T}\n+ Va = 5V\n+ Ia = 1.5A\n+ Ca = 47uF\n+ Vd0 = .5V\n+ T_load = 0\n+ Vin = 20V\n+ Vline = 3V\n+ L1 = 20uH\n+ Kp = 1\n+ R1 = 10k\n+ Rf = {R1*Kp}
TEXT 464 -264 Left 2 !.param Buck = 1\n+ Ca = 47uF\n+ Ia = 1.5A\n+ L1 = 20uH\n+ Rs = 0.1\n+ uSaw = 3V\n+ lSaw = 0V\n+ Vd0 = .5V\n \n+ Vin = 20V\n+ Vline = 3V
TEXT 728 -352 Left 2 !.tran 20m
TEXT 888 -264 Left 2 !.param opamp=1\n+ Vcc = 15V\n+ Vee = -15V
TEXT 704 -256 Left 2 !.param ctrl=1\n+ Vsoll = 5.5V\n+ kp = 2\n+ ki = 0.01\n \n+ pw = {t1/T}\n+ t1 = 0.75*T\n+ T = 15us \n+ t2 = T;\n \n+ R1 = 4k7\n+ R2 = {R1*kp}\n+ Cc = 1/(ki*R1)\n \n+Csaw = 1n
TEXT 1344 -104 Left 2 !Ron=1m  Roff=100meg  Lser=0n  Vser=.0
RECTANGLE Normal -80 -672 -512 -912 2
RECTANGLE Normal -80 -464 -512 -624 2
