Version 4
SHEET 1 1992 808
WIRE 16 -896 -16 -896
WIRE 96 -896 64 -896
WIRE 432 -896 400 -896
WIRE 528 -896 432 -896
WIRE 608 -896 528 -896
WIRE 96 -864 96 -896
WIRE 144 -864 96 -864
WIRE 432 -864 432 -896
WIRE -320 -848 -352 -848
WIRE -224 -848 -240 -848
WIRE -160 -848 -192 -848
WIRE -128 -848 -160 -848
WIRE 16 -832 -16 -832
WIRE 96 -832 96 -864
WIRE 96 -832 64 -832
WIRE 1296 -816 1296 -832
WIRE -160 -800 -160 -848
WIRE 528 -784 528 -896
WIRE 432 -768 432 -784
WIRE 480 -768 432 -768
WIRE -160 -704 -160 -736
WIRE 432 -704 432 -768
WIRE 496 -656 480 -656
WIRE 528 -656 528 -688
WIRE 528 -656 496 -656
WIRE 560 -656 528 -656
WIRE 672 -656 640 -656
WIRE 688 -656 672 -656
WIRE 784 -656 768 -656
WIRE 864 -656 784 -656
WIRE 784 -640 784 -656
WIRE 528 -624 528 -656
WIRE 672 -624 672 -656
WIRE -304 -560 -320 -560
WIRE -144 -560 -224 -560
WIRE 784 -544 784 -560
WIRE 528 -528 528 -560
WIRE 672 -528 672 -560
WIRE 96 -496 64 -496
WIRE 864 -480 864 -656
WIRE 864 -480 720 -480
WIRE 80 -448 64 -448
WIRE 144 -448 128 -448
WIRE 80 -400 0 -400
WIRE 144 -400 144 -448
WIRE 144 -400 128 -400
WIRE 416 -368 400 -368
WIRE 544 -368 496 -368
WIRE -224 -304 -288 -304
WIRE 224 -272 192 -272
WIRE 256 -272 224 -272
WIRE 224 -256 224 -272
WIRE -288 -224 -288 -304
WIRE -272 -224 -288 -224
WIRE -176 -224 -192 -224
WIRE -144 -224 -176 -224
WIRE 0 -224 -64 -224
WIRE 96 -160 96 -192
WIRE 128 -160 96 -160
WIRE -176 -144 -176 -224
WIRE -128 -144 -176 -144
WIRE 224 -144 224 -176
WIRE 224 -144 192 -144
WIRE 288 -144 224 -144
WIRE 320 -144 288 -144
WIRE 0 -128 0 -224
WIRE 0 -128 -64 -128
WIRE 80 -128 0 -128
WIRE 128 -128 80 -128
WIRE -128 -112 -208 -112
WIRE -96 32 -96 16
WIRE -176 48 -208 48
WIRE -176 96 -192 96
WIRE -192 128 -192 96
WIRE 32 160 32 128
WIRE 64 160 32 160
WIRE 160 176 128 176
WIRE -96 192 -96 112
WIRE 32 192 -96 192
WIRE 64 192 32 192
WIRE -96 208 -96 192
WIRE 32 272 32 192
WIRE 48 272 32 272
WIRE 160 272 160 176
WIRE 160 272 128 272
WIRE -96 288 -96 272
FLAG 528 -528 0
FLAG 672 -528 0
FLAG 496 -656 sw
FLAG 784 -544 0
FLAG -160 -704 0
FLAG -144 -560 Ve2
FLAG -128 -848 Ve1
FLAG 160 -112 0
FLAG 224 -272 V+
FLAG 96 -192 saw
IOPIN 96 -192 In
FLAG -224 -304 out
IOPIN -224 -304 In
FLAG 80 -128 Cs
FLAG 288 -144 pwm
FLAG 96 -496 soll
IOPIN 96 -496 Out
FLAG 720 -480 out
IOPIN 720 -480 Out
FLAG -208 -112 soll
IOPIN -208 -112 In
FLAG -16 -896 Ve1
FLAG -16 -832 Ve2
FLAG 144 -864 V+
IOPIN 144 -864 BiDir
FLAG 400 -896 V+
IOPIN 400 -896 BiDir
FLAG -192 128 0
FLAG -208 48 V+
IOPIN -208 48 BiDir
FLAG -96 288 0
FLAG -96 16 0
FLAG 96 208 0
FLAG 400 -368 0
FLAG 544 -368 saw
IOPIN 544 -368 Out
FLAG 432 -704 pwm
FLAG -64 -320 0
FLAG -16 -320 0
FLAG 0 -320 0
SYMBOL source-Vmarker -352 -848 R0
SYMATTR Value V={Vin}
SYMATTR InstName U1
SYMBOL schottky 544 -560 R180
WINDOW 0 -21 16 VRight 2
WINDOW 3 52 76 VLeft 2
SYMATTR InstName D1
SYMATTR Value MBRS140
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL ind 544 -640 R270
WINDOW 0 30 56 VTop 2
WINDOW 3 6 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {L1}
SYMATTR SpiceLine Rser=1n
SYMBOL cap 656 -624 R0
WINDOW 3 23 55 Left 2
SYMATTR Value {Ca}
SYMATTR InstName C1
SYMBOL source-I 784 -560 M180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 29 -9 Left 2
SYMATTR InstName I1
SYMATTR Value {Ia}
SYMATTR SpiceLine load
SYMBOL MDB_sym\\jumper 752 -720 R0
WINDOW 0 -7 50 Invisible 2
SYMATTR InstName J1
SYMBOL MDB_sym\\isoR -208 -848 R270
WINDOW 0 4 0 VTop 2
WINDOW 3 -28 -1 VTop 2
SYMATTR InstName Rq
SYMATTR Value .1
SYMBOL MDB_sym\\arrow_curr 704 -656 R270
WINDOW 0 4 0 VTop 2
SYMATTR InstName R3
SYMBOL source-V -224 -848 R90
WINDOW 3 73 -23 VRight 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -45 23 VRight 2
SYMATTR Value PULSE(0 {Vline} 10m 1n 1n 1)
SYMATTR InstName V_line1
SYMBOL cap -144 -800 M0
SYMATTR InstName C2
SYMATTR Value 220µ
SYMBOL source-Vmarker -320 -560 R0
SYMATTR Value V={Vin}
SYMATTR InstName U2
SYMBOL source-V -208 -560 R90
WINDOW 3 57 -36 VRight 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -45 23 VRight 2
SYMATTR Value PULSE(0 {Vline} 10m 1n 1n 1)
SYMATTR InstName V_line2
SYMBOL MDB_sym\\jumper 48 -896 R0
SYMATTR InstName X1
SYMBOL MDB_sym\\jumperSetable 336 -144 M0
SYMATTR InstName U5
SYMBOL EIT_Semiconductors\\comp_oc 160 -144 R0
WINDOW 0 1 -28 Left 2
WINDOW 3 9 26 Invisible 2
WINDOW 38 -43 62 Left 2
SYMATTR InstName U6
SYMBOL EIT_Semiconductors\\op_3 -96 -128 R0
WINDOW 0 -5 34 Left 2
WINDOW 123 -17 69 Invisible 2
WINDOW 3 -16 43 Invisible 2
SYMATTR InstName U8
SYMATTR Value Vp={Vcc*.98} Vm={Vee*.98} Ilim=20m
SYMBOL res -160 -208 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value {R2}
SYMBOL res -288 -208 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value {R1}
SYMBOL MDB_sym\\source-Vmarker 64 -496 R0
SYMATTR Value V={Vsoll}
SYMATTR InstName U9
SYMBOL source-Vmarker 64 -448 R0
SYMATTR Value V={uSaw}
SYMATTR InstName U3
SYMBOL MDB_sym\\jumper 112 -512 R0
WINDOW 0 -7 50 Invisible 2
SYMATTR InstName X2
SYMBOL cap -64 -304 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C3
SYMATTR Value {Cc}
SYMBOL crtl-V-I_INV -96 16 R0
WINDOW 0 26 78 Left 2
WINDOW 3 30 40 Left 2
SYMATTR InstName G2
SYMATTR Value 0
SYMBOL cap -112 208 R0
WINDOW 0 37 20 Left 2
WINDOW 3 32 59 Left 2
SYMATTR InstName C7
SYMATTR Value {Csaw}
SYMBOL EIT_Semiconductors\\comp_oc 96 176 R0
WINDOW 0 1 -28 Left 2
WINDOW 3 79 14 Left 2
WINDOW 38 -32 -57 Left 2
WINDOW 123 78 37 Left 2
SYMATTR InstName U17
SYMBOL source-Vmarker 32 128 R90
SYMATTR Value V={uSaw}
SYMATTR InstName U18
SYMBOL res 32 256 M90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 10
SYMBOL voltage 512 -368 R90
WINDOW 123 74 56 VTop 2
WINDOW 39 53 56 VTop 2
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName V2
SYMATTR Value PULSE({lSaw} {uSaw} 0 {T} 1n 1n {T+2n})
SYMBOL EIT_Semiconductors\\pmos 480 -688 M180
SYMATTR InstName M2
SYMBOL res 416 -768 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName 5R33
SYMATTR Value 56k
TEXT 736 -1008 Center 2 ;_Buckconverter\n_........................\nhttp://www.ti.com.cn/cn/lit/ds/symlink/tps40077.pdf
TEXT -512 -928 Left 2 ;Supply_1
TEXT -488 -736 Left 2 !.ic V(in) = {.7*Vin}
TEXT -512 -640 Left 2 ;Supply_2
TEXT 464 -264 Left 2 !.param Buck = 1\n+ Ca = 47uF\n+ Ia = 1.5A\n+ L1 = 20uH\n+ Rs = 0.1\n+ uSaw = 10V\n+ lSaw = -10V\n+ Vd0 = .5V\n \n+ Vin = 20V\n+ Vline = 3V
TEXT 728 -352 Left 2 !.tran 20m
TEXT 888 -264 Left 2 !.param opamp=1\n+ Vcc = 10V\n+ Vee = -10V
TEXT 704 -256 Left 2 !.param ctrl=1\n+ Vsoll = 5.5V\n+ kp = 15\n+ ki = 0.01\n \n+ pw = {t1/T}\n+ t1 = 0.75*T\n+ T = 15us \n+ t2 = T;\n \n+ R1 = 4k7\n+ R2 = {R1*kp}\n+ Cc = 1/(ki*R1)\n \n+Csaw = 1n
RECTANGLE Normal -80 -672 -512 -912 2
RECTANGLE Normal -80 -464 -512 -624 2
