Version 4
SHEET 1 1216 1340
WIRE -912 112 -928 112
WIRE -864 112 -912 112
WIRE -800 112 -864 112
WIRE -800 144 -800 112
WIRE -1152 192 -1152 144
WIRE -1152 192 -1280 192
WIRE -848 192 -880 192
WIRE -464 192 -512 192
WIRE -1280 224 -1280 192
WIRE -912 224 -912 112
WIRE -896 224 -912 224
WIRE -848 224 -848 192
WIRE -800 272 -800 224
WIRE -800 272 -848 272
WIRE -784 272 -800 272
WIRE -1152 288 -1152 192
WIRE -800 320 -800 272
WIRE -1280 336 -1280 304
WIRE -1216 336 -1280 336
WIRE -912 368 -912 320
WIRE -864 368 -912 368
WIRE -1280 384 -1280 336
WIRE -1152 416 -1152 384
WIRE -912 448 -912 368
WIRE -800 448 -800 416
WIRE -1280 528 -1280 464
WIRE -1152 544 -1152 496
WIRE -272 544 -320 544
WIRE -912 576 -912 528
WIRE -800 576 -800 528
WIRE -928 752 -976 752
WIRE -816 752 -928 752
WIRE -352 752 -400 752
WIRE -240 752 -352 752
WIRE 96 752 96 736
WIRE -928 800 -928 752
WIRE -816 800 -816 752
WIRE -352 800 -352 752
WIRE -240 800 -240 752
WIRE -816 912 -816 880
WIRE -240 912 -240 880
WIRE -928 960 -928 880
WIRE -880 960 -928 960
WIRE -352 960 -352 880
WIRE -304 960 -352 960
WIRE -928 992 -928 960
WIRE -352 992 -352 960
WIRE -816 1040 -816 1008
WIRE -816 1040 -864 1040
WIRE -752 1040 -816 1040
WIRE -704 1040 -752 1040
WIRE -240 1040 -240 1008
WIRE -240 1040 -288 1040
WIRE -176 1040 -240 1040
WIRE -128 1040 -176 1040
WIRE -816 1056 -816 1040
WIRE -240 1056 -240 1040
WIRE -928 1168 -928 1088
WIRE -816 1168 -816 1136
WIRE -352 1168 -352 1088
WIRE -240 1168 -240 1136
FLAG -352 1168 0
FLAG -240 1168 0
FLAG 96 816 0
FLAG 96 736 0
FLAG -176 1040 Vbe_q2
FLAG -928 1168 0
FLAG -816 1168 0
FLAG -752 1040 Vbe_q2
FLAG -912 576 0
FLAG -800 576 0
FLAG -784 272 B5
FLAG -864 112 VCC
FLAG -1152 544 0
FLAG -1280 528 0
DATAFLAG -272 544 "round(1e-1*$)*1e1/1A"
DATAFLAG -128 1040 "round(1e3*$)*1e-3"
DATAFLAG -192 912 "round(1e5*Ic(Q1))*1e-5"
DATAFLAG -704 1040 "round(1e3*$)*1e-3"
DATAFLAG -768 912 "round(1e5*Ic(Q1))*1e-5"
DATAFLAG -464 192 "$/1A"
DATAFLAG -880 192 "round($*1e3)*1e-3"
DATAFLAG -752 432 "round(1e5*Ic(Q5))*1e-5"
DATAFLAG -1104 400 "round(1e5*Ic(Q5))*1e-5"
SYMBOL BOR_sym\\source-Vmarker -320 544 R0
SYMATTR Value V=1
SYMATTR InstName U1
SYMBOL BOR_sym\\source-Vmarker -400 752 R0
SYMATTR Value V={Vcc}
SYMATTR InstName U2
SYMBOL diode 112 752 M0
WINDOW 0 32 8 Left 2
WINDOW 3 36 39 Left 2
SYMATTR InstName D1
SYMATTR Value Dx
SYMBOL BOR_sym\\EIT_Semiconductors\\npn -304 912 R0
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL res -256 1040 R0
SYMATTR InstName R1
SYMATTR Value {Rref}
SYMBOL BOR_sym\\EIT_Semiconductors\\npn -288 992 M0
SYMATTR InstName Q2
SYMATTR Value BC547B
SYMBOL res -368 784 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res -256 784 R0
SYMATTR InstName R3
SYMATTR Value 10
SYMBOL BOR_sym\\source-Vmarker -976 752 R0
SYMATTR Value V={Vcc}
SYMATTR InstName U3
SYMBOL BOR_sym\\EIT_Semiconductors\\npn -880 912 R0
SYMATTR InstName Q3
SYMATTR Value BC547B
SYMBOL res -832 1040 R0
SYMATTR InstName R4
SYMATTR Value {Rref}
SYMBOL BOR_sym\\EIT_Semiconductors\\npn -864 992 M0
SYMATTR InstName Q4
SYMATTR Value BC547B
SYMBOL res -944 784 R0
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res -832 784 R0
SYMATTR InstName R6
SYMATTR Value 10
SYMBOL BOR_sym\\EIT_Semiconductors\\pnp -864 416 M180
SYMATTR InstName Q5
SYMATTR Value BC327-40
SYMBOL BOR_sym\\EIT_Semiconductors\\pnp -848 320 R180
SYMATTR InstName Q6
SYMATTR Value BC327-40
SYMBOL res -816 128 R0
SYMATTR InstName R7
SYMATTR Value {Rrefp}
SYMBOL res -928 432 R0
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL res -816 432 R0
SYMATTR InstName R9
SYMATTR Value 10
SYMBOL BOR_sym\\source-Vmarker -928 112 R0
SYMATTR Value V={Vcc}
SYMATTR InstName U4
SYMBOL MDB_sym\\Vgs -832 256 R0
SYMATTR Value rnd=.1
SYMATTR InstName U8
SYMBOL BOR_sym\\source-Vmarker -512 192 R0
SYMATTR Value V={Rrefp}
SYMATTR InstName U5
SYMBOL BOR_sym\\EIT_Semiconductors\\pnp -1216 384 M180
SYMATTR InstName Q7
SYMATTR Value BC327-40
SYMBOL BOR_sym\\source-V -1152 400 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 2.5V
SYMBOL BOR_sym\\source-Vmarker -1152 144 R0
SYMATTR Value V=3.3V
SYMATTR InstName U7
SYMBOL res -1296 208 R0
WINDOW 3 -84 70 Left 2
SYMATTR InstName R10
SYMATTR Value {Rpot*p+1u}
SYMBOL res -1296 368 R0
WINDOW 3 -93 202 Left 2
SYMATTR InstName R11
SYMATTR Value {Rpot*(1-p)+1u}
TEXT -392 592 Left 2 !.tran 1m
TEXT -472 400 Left 2 !.model Dx D ( Is={Id0/(exp(Vd0/Vt)-1)} )\n.model npnx npn ( Is={Ic0/(exp(Vbe0/Vt)-1)} Bf={Bf})
TEXT -72 480 Left 2 !.param mdlPars=1 \n+ Vcc = 10V\n+ Vt = 26m\n+ Vd0 = 0.65\n+ Id0 = 50u\n+ Bf=200\n+ Vbe0=.6V \n+ Ic0 = 1m
TEXT -400 632 Left 2 !.param Iref=1m
TEXT -472 1264 Left 2 ;.param Iref={Vbe_q2/Rref}
TEXT -472 1232 Left 2 !.param Rref={0.7V/Iref}
TEXT -688 264 Left 2 !.param Rrefp={0.6V/Iref}
TEXT -1464 416 Left 2 !.param Rpot = 50k\n+ p = 0.5
TEXT -1600 504 Left 2 !.step param p 0 1 1e-3
