* Z:\home\mainster\CODES_local\LTSpice_projects\HF_technik\tline_eigeneAufgaben.asc
XU1 tdc vdc_single V={L1/Cu}
R2 N004 0 50
C2 N004 0 50p
XU2 Z1 0 Z2 0 tlineRiso Td={dL1/Cu} Riso=100t Z0=50
rZ1 P001 Z1 1µ noiseless
I1 0 N005 SINE(0 1 {f0}) AC 1
RIz2 Z2 N004 100e-6
RIz3 Z3 N009 100e-6
XU3 Z13 0 Z3 0 tlineRiso Td={L1/Cu} Riso=100t Z0=50
rZ4 N007 Z13 1µ noiseless
I2 0 N007 0 AC 1
R1 N009 P002 200
C1 P002 0 8p
V1 N002 0 SINE(0 1 {f0}) AC 1
R3 0 N005 1
R4 N002 P001 50
I3 0 P003 0 AC 1
R5 0 P003 1
XU5 td vdc_single V={dL1/Cu}
* .ac dec 100 1 1e08
.param f0 = 100meg
.param fm = f0
.param Cu = {0.85*3e8}
.param lambda=Cu/f0
; L/lambda = 0.205
; L1 = 0.205*3e8/f0 = 1.757m
;.param L1 = 1.757
 
;.param L1 = .045*lambda
.param L1 = .324*lambda
* For the ideal case, Z0 is the characteristic impedance. The transmission lineís length can be\nspecified either by TD, a delay in seconds, or by F and NL, a frequency and a relative\nwavelength at F. NL has a default value of 0.25 (F is the quarter-wave frequency). Although\nTD and F are both shown as optional, one of the two must be specified\n \nSIMULATION NOTES\nTransmission lines are defined by two parameters: characteristic impedance \nZ0 and delay time TD. What is the delay time? This tells you how long it takes \na step voltage to travel from one end of the cable to the other. The time delay \nis easily determined by the cable speed and cable length. In the circuit above, \nthe 5 meter cable is specified as having a speed of 85% compared to the speed \nof light. The time delay is calculated as\n \nTime = Length / Speed = 5 m / (0.85 * 300e6 m/s) = 19.6 ns.\n \nThe SPICE transmission line looks like\n T1 2 0  3 0  Z0=75 TD=19.6NS\n \nwhere nodes 2 0 and 3 0 are the connections at either end of this bidirectional device.
* weil (...) soll Z1/Z0=0.66+j*0.5\n--> Z1=33+j*25\n‹ber smith chart wurde\nL/lambda=0.205 bestimmt
* Td={L1/Cu}
* F=100meg NL=.25
.step param dL1 1e-6 .1 .0025
* .MEAS AC arg1 avg arg(V(Z2))\n.MEAS AC param Td \n.MEAS AC mag1 avg re(V(Z2)) AT={fm}\n.MEAS AC re1 find real(V(Z2))\n.MEAS AC im1 imag(V(Z2))\n.MEAS AC BW trig mag(V(out))=tmp/sqrt(2) rise=1\n+ targ mag(V(out))=tmp/sqrt(2) fall=last
.tran {10/f0}
* .meas Aavg avg V(a)\n.meas Bavg avg V(b)\n.meas Are avg (V(a)-Aavg)*cos(360*time*Freq)\n.meas Aim avg -(V(a)-Aavg)*sin(360*time*Freq)\n.meas Bre avg (V(b)-Bavg)*cos(360*time*Freq)\n.meas Bim avg -(V(b)-Bavg)*sin(360*time*Freq)\n.meas GainMag param 20*log10(hypot(Are,Aim)/hypot(Bre,Bim))\n.meas GainPhi param mod(atan2(Aim,Are)-atan2(Bim,Bre)+180,360)-180
.meas Aavg avg V(z1)
.meas Bavg avg V(z2)
.meas Are avg (V(z1)-Aavg)*cos(360*time*F0)
.meas Aim avg -(V(z1)-Aavg)*sin(360*time*F0)
.lib EIT_sub/vdc_single.sub
.lib MDB_sub/tlineRiso.sub
.backanno
.end
