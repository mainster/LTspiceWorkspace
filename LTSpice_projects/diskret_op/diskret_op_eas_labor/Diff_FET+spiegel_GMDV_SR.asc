Version 4
SHEET 1 1516 772
WIRE 304 -1424 288 -1424
WIRE 400 -1424 384 -1424
WIRE -256 -1248 -256 -1280
WIRE -208 -1248 -256 -1248
WIRE -208 -1232 -208 -1248
WIRE -208 -1168 -208 -1200
WIRE -208 -1168 -256 -1168
WIRE -512 -1120 -528 -1120
WIRE -336 -1120 -432 -1120
WIRE -256 -1120 -256 -1168
WIRE -256 -1120 -272 -1120
WIRE -256 -1072 -256 -1120
WIRE -256 -1072 -384 -1072
WIRE -128 -1072 -256 -1072
WIRE -576 -1024 -592 -1024
WIRE -528 -1024 -528 -1120
WIRE -528 -1024 -576 -1024
WIRE -448 -1024 -528 -1024
WIRE -256 -1024 -256 -1072
WIRE -320 -976 -384 -976
WIRE -384 -960 -384 -976
WIRE 416 -912 384 -912
WIRE 528 -912 496 -912
WIRE -384 -864 -384 -880
WIRE -256 -864 -256 -928
WIRE -256 -864 -384 -864
WIRE -160 -864 -256 -864
WIRE 368 -864 336 -864
WIRE 480 -864 448 -864
WIRE 384 -784 368 -784
WIRE 400 -784 384 -784
WIRE 384 -752 384 -784
WIRE -384 -704 -384 -720
WIRE -320 -704 -320 -720
WIRE 560 -672 528 -672
WIRE 592 -672 560 -672
WIRE 528 -656 528 -672
WIRE 160 -624 128 -624
WIRE 240 -624 160 -624
WIRE -384 -592 -384 -624
WIRE -384 -592 -448 -592
WIRE -320 -592 -320 -624
WIRE -320 -592 -384 -592
WIRE -256 -592 -320 -592
WIRE -768 -560 -784 -560
WIRE -672 -560 -688 -560
WIRE 528 -560 528 -576
WIRE -512 -544 -544 -544
WIRE -176 -544 -512 -544
WIRE -784 -512 -784 -560
WIRE 240 -512 240 -624
WIRE -448 -480 -448 -592
WIRE -256 -480 -256 -592
WIRE 32 -480 32 -512
WIRE 80 -480 32 -480
WIRE -496 -464 -544 -464
WIRE -176 -464 -176 -544
WIRE -176 -464 -208 -464
WIRE 80 -464 80 -480
WIRE 560 -464 528 -464
WIRE 592 -464 560 -464
WIRE -176 -448 -176 -464
WIRE 528 -432 528 -464
WIRE -176 -400 -176 -416
WIRE 80 -400 80 -432
WIRE 80 -400 32 -400
WIRE -752 -352 -784 -352
WIRE -624 -352 -688 -352
WIRE 240 -352 240 -432
WIRE -624 -336 -624 -352
WIRE -256 -336 -256 -384
WIRE -208 -336 -256 -336
WIRE -80 -336 -176 -336
WIRE -48 -336 -80 -336
WIRE 32 -336 32 -400
WIRE 32 -336 16 -336
WIRE 128 -336 32 -336
WIRE 160 -336 128 -336
WIRE -448 -304 -448 -384
WIRE -352 -304 -448 -304
WIRE -624 -288 -624 -304
WIRE -448 -288 -448 -304
WIRE -256 -288 -256 -336
WIRE 32 -272 32 -336
WIRE 160 -256 160 -288
WIRE 240 -256 240 -272
WIRE 576 -240 512 -240
WIRE 416 -224 384 -224
WIRE 448 -224 416 -224
WIRE 512 -224 512 -240
WIRE -352 -208 -352 -304
WIRE -352 -208 -400 -208
WIRE -304 -208 -352 -208
WIRE 384 -208 384 -224
WIRE -80 -192 -80 -336
WIRE -16 -192 -80 -192
WIRE -448 -144 -448 -192
WIRE -448 -144 -480 -144
WIRE -256 -144 -256 -192
WIRE -256 -144 -448 -144
WIRE 32 -144 32 -176
WIRE 32 -144 -256 -144
WIRE 144 -144 32 -144
WIRE 512 -128 512 -144
WIRE 608 -128 592 -128
WIRE 384 -112 384 -128
FLAG -256 -1280 V+
IOPIN -256 -1280 In
FLAG -128 -1072 outbj
FLAG 480 -864 V+
IOPIN 480 -864 Out
FLAG 528 -912 V-
IOPIN 528 -912 Out
FLAG -160 -864 V-
IOPIN -160 -864 In
FLAG 384 -752 out
FLAG 304 -784 V-
IOPIN 304 -784 In
FLAG 464 -784 V+
IOPIN 464 -784 In
FLAG 528 -560 0
FLAG 560 -672 SR_us_mess
FLAG -320 -720 V+
IOPIN -320 -720 In
FLAG -384 -720 V+
IOPIN -384 -720 In
FLAG -512 -544 in+2
FLAG -544 -464 in-2
FLAG -480 -144 V-
IOPIN -480 -144 In
FLAG 560 -464 SR_us_calc
FLAG 528 -352 0
FLAG 608 -128 0
FLAG 576 -240 V+
IOPIN 576 -240 In
FLAG -576 -1024 0
FLAG -176 -400 0
FLAG -624 -288 0
FLAG 32 -512 V+
IOPIN 32 -512 In
FLAG 128 -336 out
FLAG 144 -144 V-
IOPIN 144 -144 In
FLAG 384 -112 0
FLAG 416 -224 GMDV
FLAG 288 -1424 0
FLAG -784 -352 0
FLAG 160 -256 0
FLAG 240 -256 0
FLAG 160 -624 in-2
FLAG -544 -544 0
FLAG -784 -432 0
FLAG -672 -560 in-2
FLAG -784 -560 sig
SYMBOL res -528 -1104 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName J5
SYMATTR Value {J5}
SYMBOL cap -272 -1136 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName Ccomp1
SYMATTR Value {Cc}
SYMBOL EIT_Semiconductors\\npn -320 -1024 R0
SYMATTR InstName Q6
SYMATTR Value CA3046
SYMBOL EIT_Semiconductors\\npn -448 -1072 R0
SYMATTR InstName Q7
SYMATTR Value CA3046
SYMBOL res -400 -976 R0
SYMATTR InstName RE5
SYMATTR Value 22k
SYMBOL source-I -256 -1168 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I2
SYMATTR Value {I1}
SYMBOL source-Vmarker 336 -864 R0
WINDOW 3 -60 0 Center 2
SYMATTR Value V=10V
SYMATTR InstName U1
SYMBOL source-Vmarker 384 -912 R0
WINDOW 3 -60 0 Center 2
SYMATTR Value V=-10V
SYMATTR InstName U2
SYMBOL res 352 -848 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value .1
SYMBOL res 400 -928 M90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R4
SYMATTR Value .1
SYMBOL diode 400 -768 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value Dx
SYMBOL diode 304 -768 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value Dx
SYMBOL bv 528 -672 R0
WINDOW 3 -80 147 Left 2
SYMATTR InstName B1
SYMATTR Value V=ddt(V(out))*1e-6
SYMBOL source-I -320 -624 M180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I3
SYMATTR Value {I0}
SYMBOL res -368 -720 M0
SYMATTR InstName RE6
SYMATTR Value 100meg
SYMBOL MDB_sym\\arrow_curr -192 -336 R90
WINDOW 0 -4 0 VBottom 2
SYMATTR InstName IDV
SYMATTR Value2 Rsh=1
SYMBOL source-V -784 -528 M0
WINDOW 123 -11 13 Left 2
WINDOW 39 0 0 Left 2
WINDOW 0 -11 -11 Left 2
WINDOW 3 -267 298 Left 2
SYMATTR Value2 AC 1
SYMATTR InstName V1
SYMATTR Value sin 0 .1V {fsig}
SYMBOL EIT_Semiconductors\\pmos -208 -384 R180
SYMATTR InstName M2
SYMATTR Value PMx12
SYMBOL EIT_Semiconductors\\pmos -496 -384 M180
SYMATTR InstName M3
SYMATTR Value PMx12
SYMBOL bv 528 -448 R0
WINDOW 3 -88 131 Left 2
SYMATTR InstName B2
SYMATTR Value V=I0/Cc * 1e-6
SYMBOL res 496 -144 M90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 1
SYMBOL bi 512 -224 R0
WINDOW 0 32 9 Left 2
WINDOW 3 39 39 Left 2
SYMATTR InstName GMDV
SYMATTR Value I=V(GMDV)
SYMBOL MDB_sym\\isoR -208 -1216 R0
SYMATTR InstName ISO1
SYMBOL MDB_sym\\isoR -624 -320 M0
SYMATTR InstName ISO2
SYMBOL MDB_sym\\isoR -176 -432 R0
SYMATTR InstName ISO3
SYMBOL cap 16 -352 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName Cco
SYMATTR Value {Cc}
SYMBOL source-I 32 -400 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value {I1}
SYMBOL MDB_sym\\isoR 80 -448 R0
SYMATTR InstName ISO4
SYMATTR Value 1meg
SYMBOL EIT_Semiconductors\\nmos -16 -272 R0
SYMATTR InstName M1
SYMATTR Value NMx
SYMBOL EIT_Semiconductors\\nmos -304 -288 R0
SYMATTR InstName M4
SYMATTR Value NMx
SYMBOL EIT_Semiconductors\\nmos -400 -288 M0
SYMATTR InstName M5
SYMATTR Value NMx
SYMBOL bv 384 -224 R0
WINDOW 3 -80 147 Left 2
SYMATTR InstName B3
SYMATTR Value V= 2*sqrt(0.5*Kp*I0)
SYMBOL source-V 400 -1424 R90
WINDOW 0 25 87 VRight 2
WINDOW 3 -45 8 VRight 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value SINE(0 1 {25*fsig})
SYMBOL MDB_sym\\jumperRes -720 -416 R0
SYMATTR InstName U3
SYMBOL crtl-V-V 240 -368 R0
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL res 224 -528 R0
SYMATTR InstName R1
SYMATTR Value 9k
SYMBOL res -784 -576 M90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
TEXT -24 -1224 Left 2 !.param VBE0=0.6\n.param VT=26m\n.param Cc=4p\n.param I0=400u\n.param I1=400u\n.param fsig=.5meg\n \n.param open = 100meg\n.param close = 1m\n.param JD1 = CLOSE\n.param JD2 = CLOSE\n.param J5 = CLOSE\n \n.param Ros = 500k\n.param off = 0.5
TEXT -80 -808 Left 2 ;.step param JD1 list 1m 100meg
TEXT 256 -1352 Left 2 !.model Nx NPN ( Is={I0/exp(VBE0/VT)} BF={BETA})\n.model Px PNP ( Is={I0/exp(VBE0/VT)} BF={BETA})\n.param BETA=200\n.param ALPHA=BETA/(1+BETA)
TEXT -80 -776 Left 2 ;.dc V1 -10m 10m .1m
TEXT -76 -722 Left 2 ;.tran 0 {10/fsig} {8/fsig}
TEXT 264 -1200 Left 2 !;.model NMx NMOS(VT0=2 KP={2*Kn} W={W} L={L})\n;.model PMx PMOS(VT0=-2 KP={2*Kp} W={W} L={L})\n;.model PM12x PMOS(VT0=2 KP={2*Kn} W=355 L=1)\n \n.model NMx NMOS(VT0=2   W=100u L=2u)  \n.model PMx PMOS(VT0=-2  W=100u L=2u) \n.model PMx12 PMOS(VT0=-2  W=355u L=1u)  \n.param Kn=2m\n.param Kp=1m\n.param GMDV = 2*sqrt(0.5*Kp*I0)\n.model Dx D ( Ron=.1  Roff=10meg Vfwd=.01V )
TEXT -76 -690 Left 2 !.ac oct 100 10meg 1000meg
TEXT -784 -152 Left 2 !.step param NN 1 10 2
