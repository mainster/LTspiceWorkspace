Version 4
SHEET 1 880 680
WIRE -112 -560 -144 -560
WIRE -64 -560 -112 -560
WIRE -736 -512 -816 -512
WIRE -624 -512 -736 -512
WIRE -816 -464 -816 -512
WIRE -624 -464 -624 -512
WIRE -720 -448 -768 -448
WIRE -672 -448 -720 -448
WIRE -720 -336 -720 -448
WIRE -624 -336 -624 -368
WIRE -624 -336 -720 -336
WIRE -576 -336 -624 -336
WIRE -480 -336 -496 -336
WIRE -816 -224 -816 -368
WIRE -720 -224 -816 -224
WIRE 144 -224 144 -256
WIRE -816 -208 -816 -224
WIRE -624 -208 -624 -336
WIRE 336 -208 336 -240
WIRE -192 -176 -224 -176
WIRE -160 -176 -192 -176
WIRE -224 -144 -224 -176
WIRE -720 -112 -720 -224
WIRE -720 -96 -720 -112
WIRE -720 -96 -768 -96
WIRE -672 -96 -720 -96
WIRE -720 -80 -720 -96
WIRE -624 -64 -624 -80
WIRE -224 -48 -224 -64
WIRE -336 0 -368 0
WIRE -304 0 -336 0
WIRE -720 16 -720 0
WIRE -816 32 -816 -80
WIRE -624 32 -624 16
WIRE -368 32 -368 0
WIRE -368 128 -368 112
WIRE -304 192 -336 192
WIRE -272 192 -304 192
WIRE -496 208 -496 176
WIRE -832 224 -832 192
WIRE -336 224 -336 192
WIRE -496 304 -496 288
WIRE -496 304 -624 304
WIRE -832 320 -832 304
WIRE -832 320 -960 320
WIRE -496 320 -496 304
WIRE -336 320 -336 304
WIRE -832 336 -832 320
WIRE -624 336 -624 304
WIRE -496 336 -496 320
WIRE -960 352 -960 320
WIRE -832 352 -832 336
WIRE -160 368 -192 368
WIRE -128 368 -160 368
WIRE -192 400 -192 368
WIRE -624 432 -624 416
WIRE -496 432 -496 416
WIRE -960 448 -960 432
WIRE -832 448 -832 432
WIRE -192 496 -192 480
FLAG -624 32 0
FLAG -816 32 0
FLAG -112 -560 Vpl
FLAG -224 -48 0
FLAG -192 -176 ugs1
FLAG 144 -256 Vpl
FLAG -720 -112 g22
FLAG -368 128 0
FLAG -336 0 ugs2
FLAG 336 -240 Vpl
FLAG -496 432 0
FLAG -496 176 0
FLAG -496 320 z
FLAG -624 432 0
FLAG -832 448 0
FLAG -832 192 0
FLAG -832 336 z2
FLAG -960 448 0
FLAG -720 16 0
FLAG -336 320 0
FLAG -304 192 ugs3
FLAG -192 496 0
FLAG -160 368 ugs4
FLAG 144 -144 0
FLAG 336 -128 0
FLAG -736 -512 Vpl
FLAG -480 -336 0
SYMBOL EIT_Semiconductors\\nmos -768 -176 M0
SYMATTR InstName M1
SYMATTR Value Nx1
SYMBOL EIT_Semiconductors\\nmos -672 -176 R0
SYMATTR InstName M2
SYMATTR Value Nx2
SYMBOL res -640 -80 R0
SYMATTR InstName R1
SYMATTR Value {Rs}
SYMBOL MDB_sym\\arrow_curr -816 -192 R0
SYMATTR InstName ID1
SYMBOL MDB_sym\\arrow_curr -624 -192 R0
SYMATTR InstName ID2
SYMBOL source-Vmarker -144 -560 R0
SYMATTR Value V={Vpl}
SYMATTR InstName U1
SYMBOL bv -224 -160 R0
SYMATTR InstName B1
SYMATTR Value V=Id(M1)*Rs/(1-sqrt(KP1/KP2)+Vp)
SYMBOL source-I 144 -144 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value PULSE(0 1m 0 100m)
SYMBOL bv -368 16 R0
SYMATTR InstName B2
SYMATTR Value V=(sqrt(K2) * Rs * I(I1) )/( sqrt(K2) - sqrt(K1) )+Vp
SYMBOL bi -496 336 R0
SYMATTR InstName B3
SYMATTR Value I=if(V(z)+.5, Kp1*(V(z))**2, 0)
SYMBOL source-I -496 288 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I3
SYMATTR Value PULSE(100u 1m 0 100m)
SYMBOL res -640 320 R0
SYMATTR InstName R2
SYMATTR Value 100meg
SYMBOL bi -832 352 R0
WINDOW 3 -12 137 Left 2
SYMATTR InstName B4
SYMATTR Value I=if( V(z2)-Vp+.5,  Kp1*(V(z2)-Vp)**2,  0)
SYMBOL source-I -832 304 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I4
SYMATTR Value PULSE(10u 1m 0 100m)
SYMBOL res -976 336 R0
SYMATTR InstName R3
SYMATTR Value 100meg
SYMBOL bv -336 208 R0
SYMATTR InstName B5
SYMATTR Value V=1/sqrt(K1)*(sqrt(I(I1))+sqrt(K2)*Vp)+(1-sqrt(K2)/sqrt(K1))*Vp
SYMBOL source-I 336 -128 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I2
SYMATTR Value PULSE(0 1m 0 100m)
SYMBOL bv -192 384 R0
SYMATTR InstName B6
SYMATTR Value V=sqrt(K2/K1) * (sqrt( I(I1) / K2) +Vp) + Vp * ( sqrt(K1) - sqrt(K2) ) / sqrt(K1)
SYMBOL EIT_Semiconductors\\pmos -768 -368 R180
SYMATTR InstName M3
SYMATTR Value Px
SYMBOL EIT_Semiconductors\\pmos -672 -368 M180
SYMATTR InstName M4
SYMATTR Value Px
SYMBOL source-I -496 -336 R90
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I5
SYMATTR Value 5p
TEXT -264 -352 Left 2 !.model Px PMOS(VT0=-1 KP=2.4m )\n.model Nx1 NMOS(VT0={Vp} KP={KP1})\n.model Nx2 NMOS(VT0={Vp} KP={KP2})
TEXT -264 -520 Left 2 !.param ref = 5p\n.param r0=100e6\n.param Vpl = 5\n.param VP=1.5\n.param Rs=2.5k\n.param KP1=2m  KP2=8m\n.param K1=KP1  K2=KP2
TEXT -868 54 Left 2 !.tran 0 101m 1m
TEXT -432 -240 Left 2 ;.step param Rs list 1k 2k 3k
