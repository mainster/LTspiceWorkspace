Version 4
SHEET 1 880 948
WIRE -848 -1456 -1136 -1456
WIRE -848 -1392 -848 -1456
WIRE -848 -1392 -912 -1392
WIRE -1840 -1376 -1888 -1376
WIRE -912 -1376 -912 -1392
WIRE -848 -1376 -848 -1392
WIRE -1888 -1360 -1888 -1376
WIRE -320 -1360 -480 -1360
WIRE -128 -1360 -320 -1360
WIRE -1136 -1344 -1136 -1456
WIRE -1136 -1344 -1200 -1344
WIRE -1056 -1344 -1136 -1344
WIRE -1200 -1328 -1200 -1344
WIRE -1136 -1328 -1136 -1344
WIRE -1056 -1312 -1056 -1344
WIRE -320 -1296 -320 -1360
WIRE -128 -1296 -128 -1360
WIRE -2064 -1280 -2112 -1280
WIRE -2032 -1280 -2064 -1280
WIRE -1888 -1280 -1888 -1328
WIRE -1888 -1280 -1952 -1280
WIRE -912 -1280 -912 -1296
WIRE -848 -1280 -848 -1296
WIRE -848 -1280 -912 -1280
WIRE -224 -1280 -272 -1280
WIRE -176 -1280 -224 -1280
WIRE -1952 -1264 -1952 -1280
WIRE -1888 -1264 -1888 -1280
WIRE -2032 -1248 -2032 -1280
WIRE -1200 -1232 -1200 -1248
WIRE -1136 -1232 -1136 -1248
WIRE -1136 -1232 -1200 -1232
WIRE -1056 -1232 -1056 -1264
WIRE -1136 -1184 -1136 -1232
WIRE -1040 -1184 -1136 -1184
WIRE -848 -1184 -848 -1280
WIRE -848 -1184 -864 -1184
WIRE -480 -1184 -480 -1360
WIRE -2032 -1168 -2032 -1200
WIRE -1952 -1168 -1952 -1184
WIRE -1952 -1168 -2032 -1168
WIRE -1936 -1168 -1952 -1168
WIRE -1888 -1168 -1888 -1184
WIRE -1888 -1168 -1936 -1168
WIRE -224 -1168 -224 -1280
WIRE -224 -1168 -432 -1168
WIRE -176 -1168 -224 -1168
WIRE -128 -1168 -128 -1200
WIRE -128 -1168 -176 -1168
WIRE -1136 -1152 -1136 -1184
WIRE -1040 -1152 -1040 -1184
WIRE -848 -1152 -848 -1184
WIRE -1952 -1120 -1952 -1168
WIRE -848 -1088 -848 -1120
WIRE -848 -1088 -912 -1088
WIRE -320 -1088 -320 -1200
WIRE -272 -1088 -320 -1088
WIRE -224 -1088 -272 -1088
WIRE -912 -1072 -912 -1088
WIRE -848 -1072 -848 -1088
WIRE -320 -1072 -320 -1088
WIRE -128 -1072 -128 -1168
WIRE -1952 -1040 -1952 -1056
WIRE -1136 -1040 -1136 -1072
WIRE -1040 -1040 -1040 -1072
WIRE -480 -1024 -480 -1088
WIRE -224 -960 -224 -1088
WIRE -224 -960 -272 -960
WIRE -176 -960 -224 -960
WIRE -128 -928 -128 -944
WIRE -1904 -912 -1952 -912
WIRE -480 -912 -480 -944
WIRE -1952 -896 -1952 -912
WIRE -1040 -848 -1104 -848
WIRE -960 -848 -1040 -848
WIRE -1104 -832 -1104 -848
WIRE -1040 -832 -1040 -848
WIRE -320 -832 -320 -944
WIRE -128 -832 -128 -848
WIRE -1952 -816 -1952 -864
WIRE -1952 -816 -2016 -816
WIRE -1936 -816 -1952 -816
WIRE -1872 -816 -1936 -816
WIRE -960 -816 -960 -848
WIRE -2016 -800 -2016 -816
WIRE -1952 -800 -1952 -816
WIRE -1312 -800 -1312 -864
WIRE -1872 -784 -1872 -816
WIRE -1104 -736 -1104 -752
WIRE -1040 -736 -1040 -752
WIRE -1040 -736 -1104 -736
WIRE -960 -736 -960 -768
WIRE -2016 -704 -2016 -720
WIRE -1952 -704 -1952 -720
WIRE -1952 -704 -2016 -704
WIRE -1872 -704 -1872 -736
WIRE -1840 -704 -1872 -704
WIRE -1792 -704 -1840 -704
WIRE -352 -704 -368 -704
WIRE -336 -704 -352 -704
WIRE 0 -704 -16 -704
WIRE 16 -704 0 -704
WIRE -1040 -688 -1040 -736
WIRE -1952 -656 -1952 -704
WIRE -368 -656 -368 -704
WIRE -368 -656 -432 -656
WIRE -288 -656 -368 -656
WIRE 16 -656 16 -704
WIRE 16 -656 -64 -656
WIRE 80 -656 16 -656
WIRE -432 -640 -432 -656
WIRE -368 -640 -368 -656
WIRE 16 -640 16 -656
WIRE 80 -640 80 -656
WIRE -288 -624 -288 -656
WIRE -64 -624 -64 -656
WIRE -1312 -608 -1312 -624
WIRE -1040 -592 -1040 -608
WIRE -1952 -576 -1952 -592
WIRE -1312 -544 -1312 -576
WIRE -432 -544 -432 -560
WIRE -368 -544 -368 -560
WIRE -368 -544 -432 -544
WIRE -288 -544 -288 -576
WIRE -272 -544 -288 -544
WIRE -192 -544 -208 -544
WIRE -176 -544 -192 -544
WIRE -96 -544 -112 -544
WIRE -64 -544 -64 -576
WIRE -64 -544 -96 -544
WIRE 16 -544 16 -560
WIRE 80 -544 80 -560
WIRE 80 -544 16 -544
WIRE -1040 -528 -1040 -560
WIRE -192 -464 -192 -544
WIRE -192 -464 -480 -464
WIRE 16 -464 16 -544
WIRE 16 -464 -192 -464
WIRE -1152 -432 -1152 -560
WIRE -368 -400 -368 -544
WIRE -704 -384 -704 -400
WIRE -640 -384 -640 -400
WIRE -640 -384 -704 -384
WIRE -560 -384 -560 -416
WIRE -560 -384 -640 -384
WIRE -528 -384 -560 -384
WIRE -480 -384 -480 -464
WIRE -480 -384 -528 -384
WIRE -208 -352 -432 -352
WIRE -1152 -336 -1152 -352
WIRE -640 -336 -640 -384
WIRE -432 -288 -432 -352
WIRE -368 -288 -368 -368
WIRE -368 -288 -432 -288
WIRE -256 -288 -288 -288
WIRE -208 -288 -208 -352
WIRE -208 -288 -256 -288
WIRE -160 -288 -208 -288
WIRE -128 -288 -160 -288
WIRE 16 -288 16 -464
WIRE 16 -288 -48 -288
WIRE -432 -272 -432 -288
WIRE -368 -272 -368 -288
WIRE -48 -272 -48 -288
WIRE 16 -272 16 -288
WIRE -288 -256 -288 -288
WIRE -128 -256 -128 -288
WIRE -640 -224 -640 -256
WIRE -432 -176 -432 -192
WIRE -384 -176 -432 -176
WIRE -368 -176 -368 -192
WIRE -368 -176 -384 -176
WIRE -288 -176 -288 -208
WIRE -288 -176 -368 -176
WIRE -128 -176 -128 -208
WIRE -48 -176 -48 -192
WIRE -48 -176 -128 -176
WIRE -32 -176 -48 -176
WIRE 16 -176 16 -192
WIRE 16 -176 -32 -176
WIRE -1264 -160 -1296 -160
WIRE -1216 -160 -1264 -160
WIRE -368 -128 -368 -176
WIRE -48 -128 -48 -176
WIRE 272 256 272 224
WIRE -368 304 -656 304
WIRE -112 304 -368 304
WIRE 272 352 272 336
WIRE -368 368 -368 304
WIRE -368 368 -432 368
WIRE -288 368 -368 368
WIRE -112 368 -112 304
WIRE -112 368 -192 368
WIRE -48 368 -112 368
WIRE -432 384 -432 368
WIRE -368 384 -368 368
WIRE -112 384 -112 368
WIRE -48 384 -48 368
WIRE -288 400 -288 368
WIRE -192 400 -192 368
WIRE -656 416 -656 304
WIRE -656 416 -720 416
WIRE -576 416 -656 416
WIRE -720 432 -720 416
WIRE -656 432 -656 416
WIRE -576 448 -576 416
WIRE -432 480 -432 464
WIRE -368 480 -368 464
WIRE -368 480 -432 480
WIRE -288 480 -288 448
WIRE -240 480 -288 480
WIRE -192 480 -192 448
WIRE -192 480 -240 480
WIRE -112 480 -112 464
WIRE -112 480 -192 480
WIRE -48 480 -48 464
WIRE -48 480 -112 480
WIRE -720 528 -720 512
WIRE -656 528 -656 512
WIRE -656 528 -720 528
WIRE -576 528 -576 496
WIRE -240 528 -240 480
WIRE -240 528 -576 528
WIRE 208 528 192 528
WIRE 256 528 208 528
WIRE 192 560 192 528
WIRE -656 576 -656 528
WIRE -560 576 -656 576
WIRE -368 576 -368 480
WIRE -368 576 -384 576
WIRE -112 576 -112 480
WIRE -96 576 -112 576
WIRE -656 608 -656 576
WIRE -560 608 -560 576
WIRE -368 608 -368 576
WIRE 192 640 192 608
WIRE -368 672 -368 640
WIRE -368 672 -432 672
WIRE -288 672 -368 672
WIRE -192 672 -288 672
WIRE -112 672 -112 576
WIRE -48 672 -112 672
WIRE 208 672 192 672
WIRE 256 672 208 672
WIRE -432 688 -432 672
WIRE -368 688 -368 672
WIRE -112 688 -112 672
WIRE -48 688 -48 672
WIRE -288 704 -288 672
WIRE -192 704 -192 672
WIRE 192 704 192 672
WIRE -656 720 -656 688
WIRE -560 720 -560 688
WIRE -432 784 -432 768
WIRE -368 784 -368 768
WIRE -368 784 -432 784
WIRE -288 784 -288 752
WIRE -288 784 -368 784
WIRE -192 784 -192 752
WIRE -112 784 -112 768
WIRE -112 784 -192 784
WIRE -80 784 -112 784
WIRE -48 784 -48 768
WIRE -48 784 -80 784
WIRE 192 784 192 752
WIRE -112 800 -112 784
WIRE -368 848 -368 784
WIRE -112 896 -112 880
FLAG -656 720 0
FLAG -368 848 0
FLAG -112 896 0
FLAG -288 672 G1
FLAG -80 784 S2
FLAG -368 304 Vpl
FLAG -192 480 G3
FLAG -384 576 A
FLAG 272 352 0
FLAG 192 784 0
FLAG 208 672 nms
FLAG 192 640 0
FLAG 208 528 pms
FLAG -1264 -160 Vpl
FLAG -560 720 0
FLAG -128 -832 0
FLAG -320 -832 0
FLAG -480 -912 0
FLAG -320 -1360 Vpl
FLAG -224 -1280 G34
FLAG -176 -1168 G34
FLAG -272 -1088 G12
FLAG -1040 -848 Vpl
FLAG -1152 -336 0
FLAG -1152 -560 G3a
FLAG -1040 -528 0
FLAG -960 -736 G3a
FLAG -1136 -1040 0
FLAG -848 -1456 Vpl
FLAG -1040 -1040 0
FLAG -848 -992 0
FLAG -848 -1184 G3a
FLAG -1312 -864 Vpl
FLAG -1264 -784 G3a
FLAG -1312 -544 0
FLAG -1952 -1040 0
FLAG -2064 -1280 G1
FLAG -1936 -1168 S1
FLAG -1840 -1376 +5V
IOPIN -1840 -1376 In
FLAG -1952 -576 0
FLAG -1840 -704 G2
FLAG -1936 -816 Vpl
FLAG -1904 -912 +5V
IOPIN -1904 -912 In
FLAG -1728 -704 G3
FLAG -288 -544 Gm4
FLAG -352 -704 Vpl
FLAG -96 -544 Gm3
FLAG -528 -384 Gm5
FLAG 0 -704 Vpl
FLAG -256 -288 Gm1
FLAG -384 -176 Sm1
FLAG -160 -288 Gm2
FLAG -32 -176 Sm2
FLAG -368 -128 0
FLAG -48 -128 0
FLAG -640 -224 0
SYMBOL bi -112 384 M0
WINDOW 3 -270 -180 Left 2
SYMATTR Value I=k3*(V(G3a,Vpl)-Vp)**2 * inv(V(G3a,Vpl)+Vp+.5)
SYMATTR InstName ID1
SYMBOL res -64 480 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R1
SYMATTR Value {r0}
SYMBOL bi -368 384 R0
WINDOW 3 -197 -143 Left 2
SYMATTR Value I=k4*(V(G3a,Vpl)-Vp)**2 * inv(V(G3a,Vpl)+Vp+.5)
SYMATTR InstName ID2
SYMBOL bi -656 432 R0
WINDOW 3 -130 -152 Left 2
SYMATTR Value I=k5*(V(G3a,Vpl)-Vp)**2  *  inv(V(G3a,Vpl)+Vp+.5)
SYMATTR InstName ID3
SYMBOL source-I -656 688 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Iref1
SYMATTR Value {ref}
SYMBOL res -128 784 R0
WINDOW 0 38 55 Left 2
SYMATTR InstName R2
SYMATTR Value {Rs}
SYMBOL bi -112 688 M0
WINDOW 3 -239 246 Left 2
SYMATTR Value I=k2*(V(G1,S2)-Vp)**2*buf(V(G1,S2)-Vp+.5)
SYMATTR InstName ID4
SYMBOL bi -368 688 M0
WINDOW 3 -89 245 Left 2
SYMATTR Value I=k2*(V(G1)-Vp)**2*buf(V(G1)-Vp+.5)
SYMATTR InstName ID5
SYMBOL MDB_sym\\arrow_curr -368 624 R0
SYMATTR InstName ID6
SYMBOL res -416 480 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value {r0}
SYMBOL res -704 528 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value {r0}
SYMBOL res -416 672 M0
SYMATTR InstName R5
SYMATTR Value {r0}
SYMBOL res -64 672 R0
SYMATTR InstName R6
SYMATTR Value {r0}
SYMBOL source-V 272 240 R0
WINDOW 3 -36 142 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(0 1 1k)
SYMATTR InstName V1
SYMBOL MDB_sym\\bvsmall 192 736 R0
SYMATTR InstName B1
SYMATTR Value V=buf(V(G1)-Vp+.5)
SYMBOL MDB_sym\\bvsmall 192 592 R0
SYMATTR InstName B2
SYMATTR Value V=buf(V(G3a,Vpl)-Vp+.5)
SYMBOL source-Vmarker -1296 -160 R0
SYMATTR Value V={Vpl}
SYMATTR InstName U1
SYMBOL EIT_Semiconductors\\nmos -272 -1040 M0
SYMATTR InstName M1
SYMATTR Value Nx1
SYMBOL EIT_Semiconductors\\nmos -176 -1040 R0
SYMATTR InstName M2
SYMATTR Value Nx2
SYMBOL EIT_Semiconductors\\pmos -176 -1200 M180
SYMATTR InstName M3
SYMATTR Value Px
SYMBOL EIT_Semiconductors\\pmos -272 -1200 R180
SYMATTR InstName M4
SYMATTR Value Px
SYMBOL res -144 -944 R0
SYMATTR InstName R8
SYMATTR Value {Rs}
SYMBOL MDB_sym\\arrow_curr -320 -1056 R0
SYMATTR InstName ID7
SYMBOL MDB_sym\\arrow_curr -128 -1056 R0
SYMATTR InstName ID8
SYMBOL source-I -480 -944 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Iref2
SYMATTR Value {ref}
SYMBOL EIT_Semiconductors\\pmos -432 -1088 R180
SYMATTR InstName M5
SYMATTR Value Px
SYMBOL bi -1040 -832 R0
WINDOW 3 -127 -48 Left 2
SYMATTR Value I=k5*(V(G3a,Vpl)+Vp)**2*inv(V(G3a,Vpl)+Vp+.5)
SYMATTR InstName ID9
SYMBOL res -1088 -736 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value {r0}
SYMBOL source-V -1152 -448 R0
WINDOW 3 -36 142 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE({Vpl} {Vpl-4} 0 100m)
SYMATTR InstName V2
SYMBOL MDB_sym\\arrow_curr -1040 -576 R0
SYMATTR InstName ID10
SYMBOL res -1056 -704 R0
SYMATTR InstName R9
SYMATTR Value 100
SYMBOL bi -848 -1376 R0
WINDOW 3 -197 -143 Left 2
SYMATTR Value I=k4*(V(G3a,Vpl)-Vp)**2 * inv(V(G3a,Vpl)+Vp+.5)
SYMATTR InstName ID11
SYMBOL bi -1136 -1328 R0
WINDOW 3 -130 -152 Left 2
SYMATTR Value I=k5*(V(G3a,Vpl)-Vp)**2  *  inv(V(G3a,Vpl)+Vp+.5)
SYMATTR InstName ID12
SYMBOL source-I -1136 -1072 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Iref3
SYMATTR Value {ref}
SYMBOL MDB_sym\\arrow_curr -848 -1136 R0
SYMATTR InstName ID13
SYMBOL res -896 -1280 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value {r0}
SYMBOL res -1184 -1232 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value {r0}
SYMBOL res -864 -1088 R0
SYMATTR InstName R12
SYMATTR Value 100
SYMBOL EIT_Semiconductors\\pmos -1264 -704 R180
SYMATTR InstName M6
SYMATTR Value Px
SYMBOL MDB_sym\\arrow_curr -1312 -592 R0
SYMATTR InstName ID14
SYMBOL res -1328 -720 R0
SYMATTR InstName R13
SYMATTR Value 100
SYMBOL bi -1952 -1264 M0
WINDOW 3 -175 254 Left 2
SYMATTR Value I=K1*(V(G1,S1)-Vp)**2*buf(V(G1)-Vp+.5)
SYMATTR InstName ID15
SYMBOL res -1904 -1280 R0
SYMATTR InstName R14
SYMATTR Value {r0}
SYMBOL MDB_sym\\arrow_curr -1888 -1344 R0
SYMATTR InstName ID16
SYMBOL MDB_sym\\jumperRes -1888 -1088 R90
SYMATTR InstName U2
SYMBOL bi -1952 -800 R0
WINDOW 3 -170 276 Left 2
SYMATTR Value I=K1*(V(G2,Vpl)+Vp)**2*inv(V(G2,Vpl)+Vp+.5)
SYMATTR InstName ID17
SYMBOL res -2000 -704 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value {r0}
SYMBOL MDB_sym\\jumperRes -1888 -624 R90
WINDOW 0 -3 39 Bottom 2
SYMATTR InstName U3
SYMBOL MDB_sym\\arrow_curr -1952 -880 R0
SYMATTR InstName ID18
SYMBOL MDB_sym\\jumperRes -1760 -768 R0
SYMATTR InstName U4
SYMBOL MDB_sym\\jumperRes -2144 -1344 R0
SYMATTR InstName U5
SYMBOL bi -368 -640 R0
WINDOW 3 -247 -105 Left 2
SYMATTR Value I=K4*(V(Gm4,Vpl)+Vp)**2*inv(V(Gm4,Vpl)+Vp+.5)
SYMATTR InstName ID19
SYMBOL res -416 -544 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R16
SYMATTR Value {r0}
SYMBOL bi 16 -640 M0
WINDOW 3 -219 -133 Left 2
SYMATTR Value I=K3*(V(Gm3,Vpl)+Vp)**2*inv(V(Gm3,Vpl)+Vp+.5)
SYMATTR InstName ID20
SYMBOL res 64 -544 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R17
SYMATTR Value {r0}
SYMBOL bi -368 -272 R0
WINDOW 3 -225 258 Left 2
SYMATTR Value I=K1*(V(Gm1,Sm1)-Vp)**2*buf(V(Gm1,Sm1)-Vp+.5)
SYMATTR InstName ID22
SYMBOL res -416 -288 M0
SYMATTR InstName R19
SYMATTR Value {r0}
SYMBOL bi -48 -272 M0
WINDOW 3 -196 218 Left 2
SYMATTR Value I=K2*(V(Gm2,Sm2)-Vp)**2*buf(V(Gm2,Sm2)-Vp+.5)
SYMATTR InstName ID23
SYMBOL res 0 -288 R0
SYMATTR InstName R20
SYMATTR Value {r0}
SYMBOL source-I -640 -256 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Iref4
SYMATTR Value {ref}
SYMBOL MDB_sym\\jumperRes -240 -608 R0
SYMATTR InstName U6
SYMBOL MDB_sym\\jumperRes -144 -608 R0
SYMATTR InstName U7
SYMBOL MDB_sym\\arrow_curr -368 -384 R0
SYMATTR InstName ID21
TEXT 32 -1288 Left 2 !.param K1 = 2m*.5\n.param K2 = 2m*.5\n.param K3 = 2m*.5\n.param K4 = 2m*.5\n.param K5 = 2m*.5
TEXT 32 -1488 Left 2 !.param ref = 5p\n.param r0=100e6\n.param Vpl = 5\n.param VP=1.5\n.param Rs=2.5k
TEXT 96 416 Left 2 !;tran 100m
TEXT -424 -1576 Left 2 !.model Px PMOS(VT0=-1 KP=2.4m )\n.model Nx1 NMOS(VT0={Vp} KP=2m)\n.model Nx2 NMOS(VT0={Vp} KP=8m)
TEXT -1232 -248 Left 2 ;PULSE(-100u 100u 0 100m)
TEXT -1368 -376 Left 2 !.dc V2 {Vpl} {Vpl-4} 0.01
TEXT -1088 -944 Left 2 ;buf(V(G3a,Vpl)+Vp+.5)\nI=if(buf(V(G3a,Vpl)+Vp+.5), 0, k5*(V(G3a,Vpl)+Vp)**2)
RECTANGLE Normal -1824 -1136 -2080 -1312 2
RECTANGLE Normal -1824 -672 -2080 -848 2
RECTANGLE Normal -240 -512 -496 -688 2
RECTANGLE Normal -112 -512 144 -688 2
RECTANGLE Normal -512 -352 -768 -528 2
RECTANGLE Normal -496 -144 -240 -320 2
RECTANGLE Normal 80 -144 -176 -320 2
