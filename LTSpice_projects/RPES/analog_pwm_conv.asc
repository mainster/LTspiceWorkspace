Version 4
SHEET 1 880 2276
WIRE -832 432 -880 432
WIRE -816 432 -832 432
WIRE -912 592 -976 592
WIRE -576 592 -832 592
WIRE -1360 656 -1440 656
WIRE -1248 656 -1296 656
WIRE -1184 656 -1248 656
WIRE -1168 656 -1184 656
WIRE -976 656 -976 592
WIRE -976 656 -1088 656
WIRE -960 656 -976 656
WIRE -832 656 -896 656
WIRE -1440 688 -1440 656
WIRE -976 736 -976 656
WIRE -928 736 -976 736
WIRE -832 752 -832 656
WIRE -832 752 -864 752
WIRE -768 752 -832 752
WIRE -752 752 -768 752
WIRE -1184 768 -1200 768
WIRE -1168 768 -1184 768
WIRE -1056 768 -1088 768
WIRE -976 768 -1056 768
WIRE -928 768 -976 768
WIRE -1440 784 -1440 768
WIRE -1056 800 -1056 768
WIRE -976 816 -976 768
WIRE -752 864 -752 752
WIRE -688 864 -752 864
WIRE -1360 880 -1440 880
WIRE -1248 880 -1248 656
WIRE -1248 880 -1296 880
WIRE -608 880 -624 880
WIRE -576 880 -576 592
WIRE -576 880 -608 880
WIRE -496 880 -576 880
WIRE -1056 896 -1056 880
WIRE -976 896 -976 880
WIRE -688 896 -752 896
WIRE -1440 912 -1440 880
WIRE -1440 1008 -1440 992
WIRE -1088 1024 -1136 1024
WIRE -976 1024 -1008 1024
WIRE -928 1024 -976 1024
WIRE -832 1024 -864 1024
WIRE -768 1024 -832 1024
WIRE -752 1024 -752 896
WIRE -752 1024 -768 1024
WIRE -976 1120 -976 1024
WIRE -944 1120 -976 1120
WIRE -832 1136 -832 1024
WIRE -832 1136 -880 1136
WIRE -992 1152 -1024 1152
WIRE -944 1152 -992 1152
WIRE -544 1152 -608 1152
WIRE -432 1152 -464 1152
WIRE -384 1152 -432 1152
WIRE -352 1152 -384 1152
WIRE -1136 1168 -1136 1024
WIRE -1088 1168 -1136 1168
WIRE -992 1184 -1024 1184
WIRE -432 1184 -432 1152
WIRE -1136 1248 -1136 1168
WIRE -1104 1248 -1136 1248
WIRE -992 1248 -992 1184
WIRE -992 1248 -1024 1248
WIRE -960 1248 -992 1248
WIRE -832 1248 -832 1136
WIRE -832 1248 -880 1248
WIRE -432 1280 -432 1248
WIRE -976 1504 -992 1504
WIRE -896 1504 -976 1504
WIRE -896 1520 -896 1504
WIRE -1168 1600 -1184 1600
WIRE -1056 1600 -1088 1600
WIRE -976 1616 -976 1504
WIRE -1056 1632 -1056 1600
WIRE -1008 1632 -1056 1632
WIRE -896 1648 -896 1600
WIRE -896 1648 -944 1648
WIRE -864 1648 -896 1648
WIRE -1008 1664 -1056 1664
WIRE -1168 1696 -1184 1696
WIRE -1056 1696 -1056 1664
WIRE -1056 1696 -1088 1696
WIRE -976 1696 -976 1680
FLAG -992 1152 vref
FLAG -832 432 vref
FLAG -768 1024 tri
FLAG -976 896 0
FLAG -1056 896 0
FLAG -1184 768 vref
FLAG -1440 784 0
FLAG -1184 656 ain
FLAG -608 880 pwm
FLAG -432 1280 0
FLAG -384 1152 pwfil2
FLAG -768 752 err
FLAG -976 1696 0
FLAG -1184 1696 err
FLAG -864 1648 LM
FLAG -1184 1600 tri
FLAG -1440 1008 0
FLAG -608 1152 0
SYMBOL EIT_Semiconductors\\op_3 -912 1136 R0
WINDOW 123 -17 69 Invisible 2
WINDOW 3 -16 43 Invisible 2
SYMATTR InstName U1
SYMATTR Value Vp=Vpop Vm=0 Ilim=20m
SYMBOL EIT_Semiconductors\\op_3 -1056 1168 M0
WINDOW 123 -17 69 Invisible 2
WINDOW 3 -16 43 Invisible 2
SYMATTR InstName U2
SYMATTR Value Vp=Vpop Vm=0 Ilim=20m
SYMBOL res -864 1232 R90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {R1}
SYMBOL res -1008 1232 R90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {R2}
SYMBOL res -1104 1040 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value {R3}
SYMBOL cap -928 1040 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C1
SYMATTR Value {C1}
SYMBOL source-Vmarker -880 432 R0
WINDOW 3 -61 -2 Center 2
SYMATTR Value V=2.5V
SYMATTR InstName U3
SYMBOL EIT_Semiconductors\\op_3 -896 752 R0
WINDOW 123 -17 69 Invisible 2
WINDOW 3 -16 43 Invisible 2
SYMATTR InstName U5
SYMATTR Value Vp=Vpop Vm=0 Ilim=20m
SYMBOL cap -960 672 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C2
SYMATTR Value 220n
SYMBOL res -1184 672 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -1184 784 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res -1072 784 R0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL cap -992 816 R0
SYMATTR InstName C4
SYMATTR Value 100n
SYMBOL res -928 608 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL source-V -1440 672 R0
WINDOW 3 -46 156 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value SINE(0 1 600)
SYMBOL res -560 1168 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL cap -448 1184 R0
SYMATTR InstName C6
SYMATTR Value 100n
SYMBOL EIT_Semiconductors\\op_3 -656 880 M180
WINDOW 123 -17 69 Invisible 2
WINDOW 3 -16 43 Invisible 2
SYMATTR InstName U4
SYMATTR Value Vp=Vpop Vm=0 Ilim=20m
SYMBOL SBORKA\\COMPARATOR\\lm393 -976 1648 R0
WINDOW 38 7 29 Left 2
SYMATTR InstName U11
SYMBOL source-Vmarker -992 1504 R0
SYMATTR InstName U12
SYMBOL res -1184 1616 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R16
SYMATTR Value 100
SYMBOL res -1184 1712 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R17
SYMATTR Value 100
SYMBOL res -912 1504 R0
SYMATTR InstName R18
SYMATTR Value 4k7
SYMBOL source-V -1440 896 R0
WINDOW 3 -46 156 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value PULSE(0 4.5 0 50m 50m)
SYMBOL MDB_sym\\jumperRes -1328 592 R0
SYMATTR InstName U6
TEXT -1098 312 Left 2 !.tran {500/ft} startup uic
TEXT -1104 152 Left 2 !.param Vsup=10V\n.param Ik=3.9m\n \n.param rail=0
TEXT -1216 424 Left 2 !.param Vpop = 5V
TEXT -1200 536 Left 2 ;Error Amplifier
TEXT -1208 1320 Left 2 ;Triangle wave gen
TEXT -704 968 Left 2 ;Comparator
TEXT -1240 1768 Left 2 ;Comparator
TEXT -496 544 Left 2 ;; ft=R2/(4*R3*R1*C1)\n; --------------------------\n.param R1 = 8.45k\n.param R2 = 10k\n.param R3 = 5.9k\n.param C1 = 1n
TEXT -208 544 Left 2 !; ft*(4*R3*R1*C1)=R2\n; --------------------------\n.param R1 = 8.45k\n.param R3 = 5.9k\n.param C1 = 10n\n.param ft = 5k\n.param R2 = {ft*(4*R3*R1*C1)}
TEXT -208 1304 Left 2 !.meas TRAN peri \n+ trig V(pwm)=2V rise=10\n+ targ V(pwm)=3V fall=10
TEXT -1104 368 Left 2 !.options plotwinsize = 0
RECTANGLE Normal -800 928 -1216 512 2
RECTANGLE Normal -800 1344 -1216 976 2
RECTANGLE Normal -544 992 -720 768 2
RECTANGLE Normal -808 1792 -1248 1440 2
