Version 4
SHEET 1 5844 1956
WIRE -400 -432 -416 -432
WIRE -384 -432 -400 -432
WIRE -784 -256 -784 -288
WIRE -688 -256 -688 -288
WIRE -560 -256 -560 -288
WIRE -464 -256 -464 -288
WIRE 80 -256 80 -288
WIRE 208 -256 208 -288
WIRE 400 -256 400 -288
WIRE 16 -208 -16 -208
WIRE 304 -208 272 -208
WIRE 336 -208 304 -208
WIRE -16 -192 -16 -208
WIRE 976 -160 976 -176
WIRE 400 -144 400 -160
WIRE -832 -128 -880 -128
WIRE -784 -128 -784 -176
WIRE -784 -128 -832 -128
WIRE -768 -128 -784 -128
WIRE -688 -128 -688 -176
WIRE -688 -128 -704 -128
WIRE -656 -128 -688 -128
WIRE -640 -128 -656 -128
WIRE -592 -128 -608 -128
WIRE -560 -128 -560 -176
WIRE -560 -128 -592 -128
WIRE -544 -128 -560 -128
WIRE -464 -128 -464 -176
WIRE -464 -128 -480 -128
WIRE -416 -128 -464 -128
WIRE -400 -128 -416 -128
WIRE 80 -112 80 -160
WIRE 208 -112 208 -160
WIRE 208 -112 80 -112
WIRE 304 -112 304 -208
WIRE 304 -112 208 -112
WIRE -304 -96 -320 -96
WIRE -240 -96 -304 -96
WIRE -160 -96 -176 -96
WIRE -16 -96 -16 -112
WIRE 304 -96 304 -112
WIRE 1152 -64 1120 -64
WIRE 1184 -64 1152 -64
WIRE -784 -48 -784 -128
WIRE -464 -48 -464 -128
WIRE -304 -48 -320 -48
WIRE -240 -48 -304 -48
WIRE -160 -48 -160 -96
WIRE -160 -48 -176 -48
WIRE 816 -48 816 -64
WIRE 208 -32 208 -48
WIRE 400 -32 400 -64
WIRE 448 -32 400 -32
WIRE 528 -32 448 -32
WIRE 784 -32 528 -32
WIRE 1120 -32 1120 -64
WIRE 928 -16 848 -16
WIRE 976 -16 976 -80
WIRE 976 -16 928 -16
WIRE 1040 -16 976 -16
WIRE -688 0 -560 -128
WIRE -688 0 -720 0
WIRE -560 0 -688 -128
WIRE -528 0 -560 0
WIRE 784 0 704 0
WIRE 304 16 304 -16
WIRE 400 16 400 -32
WIRE 528 16 528 -32
WIRE -16 32 -16 0
WIRE 816 48 816 16
WIRE 816 48 800 48
WIRE 1120 64 1120 48
WIRE 208 80 208 48
WIRE 208 80 80 80
WIRE 304 80 208 80
WIRE -784 96 -784 48
WIRE -464 96 -464 48
WIRE -304 128 -320 128
WIRE -240 128 -304 128
WIRE -128 128 -176 128
WIRE 80 128 80 80
WIRE 208 128 208 80
WIRE 400 128 400 96
WIRE 528 128 528 80
WIRE -304 176 -320 176
WIRE -240 176 -304 176
WIRE -128 176 -128 128
WIRE -128 176 -176 176
WIRE -80 176 -128 176
WIRE 16 176 0 176
WIRE 304 176 304 80
WIRE 304 176 272 176
WIRE 336 176 304 176
WIRE -768 192 -816 192
WIRE -720 192 -768 192
WIRE -624 192 -672 192
WIRE -576 192 -624 192
WIRE -368 192 -464 192
WIRE 704 192 704 0
WIRE -816 208 -816 192
WIRE -672 208 -672 192
WIRE -464 208 -464 192
WIRE -368 208 -368 192
WIRE 80 256 80 224
WIRE 208 256 208 224
WIRE 400 256 400 224
WIRE -848 448 -880 448
WIRE -816 448 -848 448
WIRE -640 448 -672 448
WIRE -608 448 -640 448
WIRE -480 448 -512 448
WIRE -448 448 -480 448
WIRE -880 464 -880 448
WIRE -816 464 -816 448
WIRE -672 464 -672 448
WIRE -608 464 -608 448
WIRE -512 464 -512 448
WIRE -448 464 -448 448
WIRE -880 560 -880 544
WIRE -672 560 -672 544
WIRE -512 560 -512 544
WIRE -816 656 -880 656
WIRE -800 656 -816 656
WIRE -768 656 -800 656
WIRE -544 656 -608 656
WIRE -528 656 -544 656
WIRE -496 656 -528 656
WIRE -800 672 -800 656
WIRE -608 672 -608 656
WIRE -528 672 -528 656
WIRE -880 688 -880 656
WIRE -320 704 -320 640
WIRE -304 704 -320 704
WIRE -288 704 -304 704
WIRE -608 768 -608 752
WIRE -880 800 -880 768
FLAG 400 256 0
FLAG 208 256 0
FLAG 208 -48 V+
FLAG 80 256 0
FLAG 304 16 0
FLAG 400 -288 V+
FLAG 208 -288 V+
FLAG 80 -288 V+
FLAG 448 -32 mir
FLAG -608 768 0
FLAG -544 656 dmir_pro_ms
FLAG -880 800 0
FLAG -816 656 dmir_pro_5ms
FLAG -464 288 0
FLAG -368 288 0
FLAG 528 128 0
FLAG -784 96 0
FLAG -464 96 0
FLAG -784 -288 V+
FLAG -688 -288 V+
FLAG -560 -288 V+
FLAG -464 -288 V+
FLAG -304 704 C1_in_nF
FLAG -592 -128 C2
FLAG -656 -128 C1
FLAG -16 32 0
FLAG -304 -48 src_off
FLAG -304 176 sink_off
FLAG -880 560 0
FLAG -672 560 0
FLAG -640 448 int_I_sink
FLAG -848 448 int_I_src
FLAG -512 560 0
FLAG -480 448 mirCalc
FLAG -400 -432 V+
FLAG -832 -128 src_off
FLAG -416 -128 sink_off
FLAG -816 288 0
FLAG -768 192 src_off2
FLAG -672 288 0
FLAG -624 192 sink_off2
FLAG -528 752 0
FLAG -448 544 0
FLAG -608 544 0
FLAG -816 544 0
FLAG -800 752 0
FLAG -320 784 0
FLAG 304 -208 Bsrc
FLAG 304 80 Bsink
FLAG -304 -96 src_off2
FLAG -304 128 sink_off2
FLAG 816 -64 0
FLAG 928 -16 out
FLAG 1040 32 0
FLAG 1120 64 0
FLAG 1152 -64 lap
FLAG 800 48 V+
FLAG 976 -176 V+
FLAG 704 272 0
SYMBOL source-Vmarker -416 -432 R0
WINDOW 3 -53 -1 Center 2
SYMATTR Value V={Vplus}
SYMATTR InstName U2
SYMBOL EIT_Semiconductors\\pnp 336 -160 M180
WINDOW 3 -86 139 Left 2
SYMATTR Value BC327-40
SYMATTR InstName Q4
SYMBOL EIT_Semiconductors\\pnp 272 -160 R180
WINDOW 3 -79 115 Left 2
SYMATTR Value BC327-40
SYMATTR InstName Q5
SYMBOL res 288 -112 R0
WINDOW 0 25 19 Left 2
WINDOW 3 23 104 Left 2
SYMATTR InstName R4
SYMATTR Value {Rmir}
SYMBOL EIT_Semiconductors\\pnp 16 -160 M180
WINDOW 3 -63 110 Left 2
SYMATTR Value BC327-40
SYMATTR InstName Q6
SYMBOL res 416 -160 M0
WINDOW 0 -12 98 VLeft 2
WINDOW 3 40 44 Left 2
SYMATTR InstName Rsrc
SYMATTR Value 1n
SYMBOL res 416 0 M0
WINDOW 0 -10 102 VLeft 2
SYMATTR InstName Rsink
SYMATTR Value 1n
SYMBOL bv -608 656 R0
WINDOW 3 -30 147 Left 2
SYMATTR Value V=ddt(V(mir)*1e-3)
SYMATTR InstName B1
SYMBOL bv -880 672 R0
SYMATTR InstName B2
SYMATTR Value V=ddt(V(mir)*5e-3)
SYMBOL source-V -464 192 R0
WINDOW 3 -12 -19 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(0 1 1)
SYMATTR InstName V3
SYMBOL res -384 192 R0
SYMATTR InstName R5
SYMATTR Value 1
SYMBOL cap 512 16 R0
SYMATTR InstName Ctri
SYMATTR Value {Ctri}
SYMBOL res -800 -272 R0
SYMATTR InstName R3
SYMATTR Value {R1}
SYMBOL res -704 -272 R0
WINDOW 3 30 77 Left 2
SYMATTR Value {R2}
SYMATTR InstName R6
SYMBOL cap -768 -112 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C1
SYMATTR Value {C1}
SYMBOL EIT_Semiconductors\\npn -528 -48 R0
WINDOW 3 50 69 Left 2
SYMATTR Value BC182BP
SYMATTR InstName Q7
SYMBOL res -448 -272 M0
SYMATTR InstName R7
SYMATTR Value {R1}
SYMBOL res -544 -272 M0
WINDOW 3 28 76 Left 2
SYMATTR Value {R2}
SYMATTR InstName R10
SYMBOL cap -480 -112 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C4
SYMATTR Value {C1}
SYMBOL source-Vmarker -320 640 R0
WINDOW 3 -57 30 Center 2
SYMATTR Value V={C1/1e-9}
SYMATTR InstName U3
SYMBOL EIT_Semiconductors\\npn -80 -96 R0
SYMATTR InstName Q9
SYMATTR Value BC182BP
SYMBOL res -176 -32 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R12
SYMATTR Value 12k
SYMBOL res 0 -208 M0
SYMATTR InstName R13
SYMATTR Value 2.2k
SYMBOL res -96 192 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R14
SYMATTR Value 12k
SYMBOL EIT_Semiconductors\\npn 16 128 R0
WINDOW 3 -45 120 Left 2
SYMATTR Value BC182BP
SYMATTR InstName Q3
SYMBOL bv -880 448 R0
WINDOW 3 -80 146 Left 2
SYMATTR Value V=Idt(I(Rsrc))
SYMATTR InstName B3
SYMBOL bv -672 448 R0
WINDOW 3 -87 148 Left 2
SYMATTR Value V=Idt(I(Rsink))
SYMATTR InstName B4
SYMBOL bv -512 448 R0
WINDOW 3 27 118 Left 2
SYMATTR Value V=1/550n*Idt(I(Ctri))
SYMATTR InstName B5
SYMBOL EIT_Semiconductors\\npn -720 -48 M0
WINDOW 3 50 69 Left 2
SYMATTR Value BC182BP
SYMATTR InstName Q8
SYMBOL res 224 -48 M0
WINDOW 0 -27 38 Left 2
WINDOW 3 -64 85 Left 2
SYMATTR InstName R1
SYMATTR Value {Rmir}
SYMBOL source-V -816 192 R0
WINDOW 3 -104 151 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 8.5 0 100n 100n {1/(2*frm)-Td} {1/frm})
SYMATTR InstName V1
SYMBOL source-V -672 192 R0
WINDOW 3 -245 178 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 8.5 {1/(2*frm)} 100n 100n {1/(2*frm)-Td} {1/frm})
SYMATTR InstName V2
SYMBOL res -544 656 R0
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL res -464 448 R0
SYMATTR InstName R15
SYMATTR Value 1k
SYMBOL res -624 448 R0
SYMATTR InstName R16
SYMATTR Value 1k
SYMBOL res -832 448 R0
SYMATTR InstName R17
SYMATTR Value 1k
SYMBOL res -816 656 R0
SYMATTR InstName R18
SYMATTR Value 1k
SYMBOL res -336 688 R0
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL EIT_Semiconductors\\npn 272 128 M0
WINDOW 3 -45 120 Left 2
SYMATTR Value BC182BP
SYMATTR InstName Q1
SYMBOL EIT_Semiconductors\\npn 336 128 R0
WINDOW 3 -45 120 Left 2
SYMATTR Value BC182BP
SYMATTR InstName Q2
SYMBOL MDB_sym\\jumperRes -208 -112 R0
SYMATTR InstName U1
SYMBOL MDB_sym\\jumperRes -208 112 R0
SYMATTR InstName U4
SYMBOL SBORKA\\COMPARATOR\\lm393 816 -16 M180
WINDOW 0 15 -24 Left 2
WINDOW 38 8 25 Left 2
SYMATTR InstName U5
SYMBOL res 992 -176 M0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL crtl-V-V 1120 -48 R0
SYMATTR InstName E1
SYMATTR Value laplace=1/(s/(2*pi*fc)+1)**4
SYMBOL source-V 704 176 R0
WINDOW 3 53 67 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value SINE(8 2 25)
SYMATTR InstName V4
TEXT -168 384 Left 2 !; Multivibrator \n; ____________________\n; fr = 1/( ln(2)*2*R2*C1)\n; R1 << R2\n.param fr = 500\n.param R1 = 2.2k\n.param R2 = 220k\n.param C1 = 1/( ln(2)*2*R2*fr )
TEXT -704 96 Left 2 ;.ic V(c2)=0
TEXT -912 -424 Left 3 ;Astabiler Multivibrator
TEXT 176 -424 Left 3 ;current mirrors
TEXT -160 -424 Left 3 ;mirror control
TEXT 176 808 Left 2 ;.savebias testbiasDC internal\n+ temp = 27
TEXT 184 720 Left 2 ;.savebias testbiasTRAN internal\n+ temp = 27\n+ time = 100m
TEXT -168 640 Left 2 !; Stromspiegel\n; ____________________\n.param Rmir = 12k\n.param Ctri = 130n
TEXT 184 384 Left 2 !; Astabile Kippstufe \n; ____________________\n; mit idealen quellen\n.param frm = 550\n.param Td = -10u
TEXT 184 560 Left 2 !; Simulation\n; ____________________\n.param Vplus = 12V\n.loadbias testbiasDC\n.tran 0 {50/fr}  uic
TEXT -616 -680 Left 2 !;.model BC546B npn ( IS=7.59E-15 VAF=73.4 BF=480 IKF=0.0962 NE=1.2665\n \n.model BC549B npn ( IS=7.59E-15 VAF=73.4 BF=480 IKF=0.0962 NE=1.2665\n+ ISE=3.278E-15 IKR=0.03 ISC=2.00E-13 NC=1.2 NR=1 BR=5 RC=0.25\n+ CJC=6.33E-12 FC=0.5 MJC=0.33 VJC=0.65 CJE=1.25E-11 MJE=0.55 VJE=0.65\n+ TF=4.26E-10 ITF=0.6 VTF=3 XTF=20 RB=100 IRB=0.0001 RBM=10 RE=0.5 TR=1.50E-07)
TEXT 96 960 Left 2 ;.step param Ctri list 100n 150n 200n
TEXT 640 -136 Left 2 ;Comparator
TEXT 1192 112 Left 2 !.param fc = 50
RECTANGLE Normal -352 128 -912 -400 2
RECTANGLE Normal 464 304 176 -400 2
RECTANGLE Normal 128 304 -160 -400 2
RECTANGLE Normal 896 80 624 -160 2
