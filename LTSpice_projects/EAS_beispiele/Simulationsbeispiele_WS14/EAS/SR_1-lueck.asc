Version 4
SHEET 1 1492 824
WIRE 0 -32 -144 -32
WIRE 96 -32 0 -32
WIRE -144 -16 -144 -32
WIRE 96 0 96 -32
WIRE 0 16 -48 16
WIRE 32 16 0 16
WIRE 32 64 16 64
WIRE -144 80 -144 64
WIRE 16 96 16 64
WIRE 96 112 96 80
WIRE 96 112 64 112
WIRE 144 112 96 112
WIRE 224 112 144 112
WIRE 272 112 224 112
WIRE 400 112 352 112
WIRE 464 112 400 112
WIRE 496 112 464 112
WIRE -48 128 -48 16
WIRE 224 128 224 112
WIRE 400 128 400 112
WIRE 496 128 496 112
WIRE 96 144 96 112
WIRE 832 144 752 144
WIRE 992 160 960 160
WIRE 1120 160 1088 160
WIRE 960 176 960 160
WIRE 1088 176 1088 160
WIRE 752 192 752 144
WIRE 224 208 224 192
WIRE -48 224 -48 208
WIRE 96 224 96 208
WIRE 400 224 400 192
WIRE 496 224 496 208
WIRE 752 288 752 272
WIRE 224 304 224 288
WIRE 688 384 656 384
WIRE 720 384 688 384
WIRE 656 400 656 384
WIRE 560 416 528 416
WIRE 592 416 560 416
WIRE 528 432 528 416
WIRE 448 448 416 448
WIRE 480 448 448 448
WIRE 416 464 416 448
WIRE 656 496 656 480
WIRE 528 544 528 512
WIRE 416 576 416 544
FLAG 400 224 0
FLAG 496 224 0
FLAG 96 224 0
FLAG -144 80 0
FLAG -48 224 0
FLAG 16 96 0
FLAG 144 112 s
FLAG 464 112 out
FLAG 0 -32 e
FLAG 0 16 crtl
FLAG 752 288 0
FLAG 224 304 0
FLAG 832 224 0
FLAG 416 576 0
FLAG 528 544 0
FLAG 448 448 intIl
FLAG 560 416 resInt
FLAG 656 496 0
FLAG 688 384 ddt
FLAG 960 256 0
FLAG 992 160 _rise
FLAG 1088 256 0
FLAG 1120 160 rise
SYMBOL ind 256 128 R270
WINDOW 0 30 56 VTop 2
WINDOW 3 6 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {L1}
SYMBOL cap 384 128 R0
WINDOW 3 -63 67 Left 2
SYMATTR Value {ca} IC=5
SYMATTR InstName C1
SYMBOL res 816 128 R0
SYMATTR InstName R1
SYMATTR Value {RL}
SYMBOL diode 112 208 R180
WINDOW 0 -44 35 Left 2
WINDOW 3 -56 4 Left 2
SYMATTR InstName D1
SYMATTR Value my_d
SYMBOL crtl-V-S 96 -16 R0
SYMATTR InstName S1
SYMATTR Value my_sw
SYMBOL source-V -144 -32 R0
SYMATTR InstName V1
SYMATTR Value {Ve}
SYMBOL source-V -48 112 R0
WINDOW 3 -163 151 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 2.5 0 1p 1p {p*T} {T})
SYMATTR InstName Vst
SYMBOL source-V 752 176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value SINE(0 1 1meg)
SYMBOL cap 208 128 R0
SYMATTR InstName C2
SYMATTR Value 200p
SYMBOL res 208 192 R0
SYMATTR InstName R2
SYMATTR Value 10
SYMBOL current 496 128 R0
SYMATTR InstName I1
SYMATTR Value {IaMin}
SYMBOL bv 416 448 R0
WINDOW 3 -195 167 Left 2
SYMATTR Value V=idt( 0.5*(V(s)-V(out))/L1, 0,0* V(_rise))*V(rise) + idt( 0.5*(V(s)-V(out))/L1, 0, 0*V(rise))*V(_rise)
SYMATTR InstName B1
SYMBOL bv 528 416 R0
WINDOW 3 10 112 Left 2
SYMATTR Value V=inv( I(L1)/(1.4/.5) )
SYMATTR InstName B2
SYMBOL bv 656 384 R0
WINDOW 3 12 104 Left 2
SYMATTR Value V=inv( ddt( I(L1) )-.5 )
SYMATTR InstName B3
SYMBOL bv 960 160 R0
WINDOW 3 -162 132 Left 2
SYMATTR Value V=inv( ddt( I(L1) )-.5 )
SYMATTR InstName B4
SYMBOL bv 1088 160 R0
WINDOW 3 -49 129 Left 2
SYMATTR Value V=buf( ddt( I(L1) )-.5 )
SYMATTR InstName B5
TEXT 160 24 Left 2 !.model my_D D(Ron=1m Roff=1T Vfwd=0.4)
TEXT 160 -8 Left 2 !.model my_sw SW(Ron=1m Roff=1T Vt=1.25 Vh=-0.5)
TEXT 512 112 Left 2 ;VA=5V
TEXT 240 56 Left 2 ;P=(VA+VD0)/(VE+VD0)=5,4/15,4=0.35064935064935064935
TEXT -192 400 Left 2 !.param T=20u \n.param Vd0 = 0.4\n.param p=(Va+Vd0)/(Ve+Vd0)  ; =t1/T=p\n.param t1 = (Va+Vd0)/(Ve+Vd0)*T\n;.param p=0.13241022442571242945 \n.param ca=100u RL=50 L1=50µ\n.param Va = 5V\n.param Ve=15V
TEXT -152 328 Left 2 ;IAmin=700mA -> RL=5/0,7=7,13Ohm
TEXT -32 -104 Left 2 !.tran 0 {10*T} {7*T}
TEXT 120 -64 Left 2 ;.step param ca list 22u 33u 47u 100u
TEXT 168 -32 Left 2 ;.step param RL list 4 5 6 7
TEXT 312 288 Left 2 !.param IaMin=0.5*(Ve-Va)/L1*t1
