Version 4
SHEET 1 880 944
WIRE 112 -224 64 -224
WIRE 144 -224 112 -224
WIRE 64 -208 64 -224
WIRE 64 -112 64 -128
WIRE -272 -80 -272 -112
WIRE -464 80 -464 48
WIRE -272 80 -272 0
WIRE -256 80 -272 80
WIRE -176 80 -256 80
WIRE -32 80 -96 80
WIRE 32 80 -32 80
WIRE -272 112 -272 80
WIRE -32 112 -32 80
WIRE 336 144 288 144
WIRE 368 144 336 144
WIRE -272 208 -272 192
WIRE -176 208 -272 208
WIRE -32 208 -32 176
WIRE -32 208 -96 208
WIRE 32 208 -32 208
WIRE 320 208 288 208
WIRE 368 208 320 208
WIRE -464 224 -464 160
WIRE 368 224 368 208
WIRE -608 256 -608 240
WIRE -272 272 -272 208
WIRE 32 272 0 272
WIRE 32 304 0 304
WIRE 368 320 368 304
WIRE 160 368 160 336
WIRE -384 480 -384 432
WIRE -384 608 -384 560
WIRE -336 608 -384 608
WIRE -224 608 -256 608
WIRE -192 608 -224 608
WIRE -80 608 -112 608
WIRE -384 656 -384 608
WIRE -224 688 -224 608
WIRE -176 688 -224 688
WIRE -80 704 -80 608
WIRE -80 704 -112 704
WIRE 0 704 -80 704
WIRE -176 720 -224 720
WIRE -384 784 -384 736
WIRE -336 784 -384 784
WIRE -224 784 -224 720
WIRE -224 784 -256 784
WIRE -192 784 -224 784
WIRE -80 784 -112 784
WIRE -384 832 -384 784
WIRE -80 832 -80 784
FLAG 64 -112 0
FLAG 112 -224 V+
FLAG 160 -16 V+
FLAG 160 368 0
FLAG -272 272 0
FLAG -272 -112 0
FLAG 368 320 0
FLAG 320 208 Vref
FLAG 336 144 Isens_dc
FLAG -256 80 shunt
FLAG -32 80 IN-
FLAG -32 208 IN+
FLAG -80 832 Vref
FLAG -384 832 0
FLAG 0 704 IsensSelber
FLAG -384 432 0
FLAG -608 320 0
FLAG -608 256 0
FLAG -464 224 0
FLAG -464 -32 0
FLAG -656 576 0
FLAG -656 496 0
SYMBOL ina225 160 144 R0
SYMATTR InstName U1
SYMATTR Description Current sens variable gain 25/50/100/200
SYMBOL source-V 64 -224 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value {Vs}
SYMBOL source-Vmarker 0 272 R0
SYMATTR Value V={UGS0}
SYMATTR InstName U2
SYMBOL source-Vmarker 0 304 R0
SYMATTR Value V={UGS1}
SYMATTR InstName U3
SYMBOL res -288 96 R0
SYMATTR InstName Rsh
SYMATTR Value {Rshunt}
SYMBOL res -80 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {Rs}
SYMBOL res -80 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {Rs}
SYMBOL cap -48 112 R0
SYMATTR InstName C1
SYMATTR Value {Cs}
SYMBOL source-I -464 48 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 29 45 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value SINE({dcoffs} 1 25k)
SYMATTR Value2 AC 1
SYMBOL source-V 368 208 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value {Ref}
SYMBOL EIT_Semiconductors\\op_3 -144 704 R0
WINDOW 123 -17 69 Invisible 2
WINDOW 3 -16 43 Invisible 2
SYMATTR InstName U4
SYMATTR Value Vp={Vs} Vm=0 Ilim=20m
SYMBOL res -208 624 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value {k*1k}
SYMBOL res -352 624 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res -352 800 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res -208 800 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R6
SYMATTR Value {k*1k}
SYMBOL res -400 640 R0
SYMATTR InstName R7
SYMATTR Value {Rshunt}
SYMBOL bi -272 -80 R0
SYMATTR InstName B1
SYMATTR Value I=I(Rbv)*16*TIME*25k/20
SYMBOL res -480 64 R0
SYMATTR InstName Rbv
SYMATTR Value 0.01
SYMBOL bi -656 496 R0
WINDOW 3 -89 138 Left 2
SYMATTR InstName B2
SYMATTR Value I=I(Rbv)*16*TIME*25k/20
SYMBOL source-I -384 560 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 29 45 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I2
SYMATTR Value SINE(0 0.5 25k)
SYMATTR Value2 AC 1
TEXT -88 456 Left 2 !* Av=25 *\n.param UGS0=0\n.param UGS1=0
TEXT 120 456 Left 2 ;* Av=50 *\n.param UGS0=0\n.param UGS1={Vs}
TEXT 352 456 Left 2 ;* Av=100 *\n.param UGS0={Vs}\n.param UGS1=0
TEXT 584 456 Left 2 ;* Av=200 *\n.param UGS0={Vs}\n.param UGS1={Vs}
TEXT 264 -264 Left 2 !.param Vs = 12V\n.param VAref = 0\n.param Ref = 5\n.param Rs = 5\n.param fg=2500k\n.param Cs = {1/(2*pi*Rs*fg)}\n.param dcoffs = 0\n.param Rshunt = 0.01
TEXT 492 -20 Left 2 !.tran 0 {4/25k} {1/25k}
TEXT 464 192 Left 2 ;.step param dcoffs 0 3 .25
TEXT -264 888 Left 2 !.param K=100
TEXT 48 640 Left 2 ;.step param VAref 3.5 10.5 0.5
TEXT 32 776 Left 2 !.MEAS op res7 AVG V(Isensselber)
TEXT 104 864 Left 2 ;.step param Ref 4.5 5.5 .2,
