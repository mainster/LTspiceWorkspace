Version 4
SHEET 1 1316 804
WIRE 560 -1136 560 -1184
WIRE 656 -1136 656 -1184
WIRE -496 -1008 -496 -1040
WIRE 560 -1008 560 -1056
WIRE 656 -1008 656 -1056
WIRE 656 -1008 560 -1008
WIRE 656 -976 656 -1008
WIRE 48 -928 48 -1040
WIRE 48 -928 -96 -928
WIRE -496 -880 -496 -928
WIRE -384 -880 -496 -880
WIRE -160 -880 -384 -880
WIRE 48 -880 48 -928
WIRE -496 -848 -496 -880
WIRE -96 -800 -96 -832
WIRE -48 -800 -96 -800
WIRE 0 -800 -48 -800
WIRE -496 -736 -496 -768
WIRE -96 -736 -96 -800
WIRE -64 -736 -96 -736
WIRE -48 -736 -64 -736
WIRE 48 -736 48 -784
WIRE 48 -736 16 -736
WIRE -496 -704 -496 -736
WIRE 48 -688 48 -736
WIRE -720 -640 -736 -640
WIRE -736 -624 -736 -640
WIRE -768 -608 -800 -608
WIRE -688 -592 -704 -592
WIRE -656 -592 -688 -592
WIRE -624 -592 -656 -592
WIRE -496 -592 -496 -640
WIRE -496 -592 -560 -592
WIRE -1056 -576 -1072 -576
WIRE -976 -576 -1056 -576
WIRE -880 -576 -896 -576
WIRE -848 -576 -880 -576
WIRE -832 -576 -848 -576
WIRE -768 -576 -832 -576
WIRE -848 -560 -848 -576
WIRE -656 -560 -656 -592
WIRE 48 -560 48 -608
WIRE 128 -560 48 -560
WIRE 208 -560 128 -560
WIRE 464 -560 272 -560
WIRE -736 -544 -736 -560
WIRE -720 -544 -736 -544
WIRE -1072 -528 -1072 -576
WIRE -848 -448 -848 -480
WIRE -656 -448 -656 -496
WIRE -656 -448 -848 -448
WIRE 48 -448 48 -560
WIRE 48 -448 -656 -448
WIRE -1072 -432 -1072 -448
WIRE 48 -432 48 -448
WIRE 464 -416 464 -560
WIRE -496 -368 -496 -592
WIRE -880 -352 -880 -576
WIRE -864 -352 -880 -352
WIRE -784 -352 -800 -352
WIRE -688 -352 -688 -592
WIRE -688 -352 -704 -352
WIRE 464 -320 464 -336
WIRE -496 -288 -496 -304
WIRE -64 -288 -112 -288
WIRE 48 -288 48 -352
WIRE 48 -288 16 -288
WIRE 864 -288 736 -288
WIRE -496 -272 -496 -288
WIRE 48 -256 48 -288
WIRE 736 -256 736 -288
WIRE 48 -208 48 -256
WIRE -112 -192 -112 -288
WIRE -32 -192 -112 -192
WIRE 0 -192 -32 -192
WIRE 864 -192 864 -288
WIRE 688 -176 576 -176
WIRE -112 -160 -112 -192
WIRE 576 -160 576 -176
WIRE 736 -160 736 -176
WIRE 272 -144 240 -144
WIRE 464 -144 464 -240
WIRE 464 -144 272 -144
WIRE -496 -112 -496 -192
WIRE -416 -112 -496 -112
WIRE -176 -112 -416 -112
WIRE 736 -96 736 -160
WIRE 864 -96 864 -112
WIRE -496 -80 -496 -112
WIRE 48 -64 48 -112
WIRE 48 -64 -112 -64
WIRE 576 -48 576 -80
WIRE 48 32 48 -64
WIRE 48 32 32 32
WIRE -496 48 -496 0
WIRE 736 48 640 48
WIRE 848 48 736 48
WIRE 240 112 240 -144
WIRE 736 144 736 48
WIRE 640 160 640 128
WIRE 688 160 640 160
WIRE 848 192 848 48
WIRE 240 272 240 192
WIRE 848 288 848 272
WIRE 736 320 736 240
FLAG 48 -1040 V+
FLAG 32 32 V-
FLAG 128 -560 out_A
FLAG -32 -192 Gp1
FLAG 48 -256 Sp1
FLAG 48 -736 Sn1
FLAG -48 -800 Gn1
FLAG -832 -576 in
FLAG 656 -976 0
FLAG 656 -1184 V-
FLAG 560 -1184 V+
FLAG -1072 -432 0
FLAG 736 -96 0
FLAG 864 -96 0
FLAG 576 -48 0
FLAG 848 288 0
FLAG 736 320 0
FLAG -384 -880 b1
FLAG -416 -112 b2
FLAG -496 -736 d1
FLAG -496 -288 r4
FLAG -496 128 0
FLAG -496 -1120 0
FLAG 240 272 0
FLAG -800 -608 0
FLAG -1056 -576 stim
FLAG -1456 672 0
FLAG 512 32 0
FLAG 416 32 0
FLAG 272 -144 shunt
FLAG -736 -544 V+
FLAG -736 -640 V-
SYMBOL EIT_Semiconductors\\npn -160 -928 R0
SYMATTR InstName T1
SYMATTR Value 2N2222
SYMBOL EIT_Semiconductors\\pnp -176 -64 M180
SYMATTR InstName T2
SYMATTR Value 2N4403
SYMBOL res 32 -272 M270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R2
SYMATTR Value {bias}
SYMBOL res -512 -864 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res -512 -288 R0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL diode -512 -704 R0
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode -512 -368 R0
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL res 448 -336 R0
SYMATTR InstName Rload1
SYMATTR Value 1.56
SYMBOL EIT_Semiconductors\\nmos 0 -880 R0
SYMATTR InstName M1
SYMATTR Value IRFP240
SYMBOL EIT_Semiconductors\\pmos 0 -112 M180
SYMATTR InstName M2
SYMATTR Value IRFP9240
SYMBOL ind 448 -432 R0
SYMATTR InstName L1
SYMATTR Value 2.888m
SYMBOL source-V 560 -1152 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -87 92 Left 2
SYMATTR Value {vsup}
SYMATTR InstName V1
SYMBOL source-V 656 -1152 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -72 98 Left 2
SYMATTR Value {-vsup}
SYMATTR InstName V2
SYMBOL source-V -1072 -544 R0
WINDOW 123 -64 165 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -56 143 Left 2
SYMATTR Value2 AC 1
SYMATTR Value PULSE(-1 1 100u 20n 20n 2m 4m)
SYMATTR InstName V3
SYMBOL res -512 -96 R0
SYMATTR InstName R12
SYMATTR Value 1m
SYMBOL res -512 -1024 R0
SYMATTR InstName R13
SYMATTR Value 1m
SYMBOL EIT_Semiconductors\\nmos 688 -256 R0
SYMATTR InstName M3
SYMATTR Value IRFP240
SYMBOL source-V 864 -208 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -18 167 Left 2
SYMATTR Value 10
SYMATTR InstName V5
SYMBOL source-V 576 -176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -18 167 Left 2
SYMATTR Value 10
SYMATTR InstName V6
SYMBOL EIT_Semiconductors\\pmos 688 240 M180
SYMATTR InstName M4
SYMATTR Value IRFP9240
SYMBOL source-V 848 176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -18 167 Left 2
SYMATTR Value 10
SYMATTR InstName V4
SYMBOL source-V 640 144 R180
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -18 167 Left 2
SYMATTR Value 10
SYMATTR InstName V7
SYMBOL source-I -496 -1040 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value {IK1}
SYMBOL source-I -496 128 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I2
SYMATTR Value {Ik1}
SYMBOL res 224 96 R0
SYMATTR InstName R5
SYMATTR Value 0.1
SYMBOL res -880 -560 M270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R6
SYMATTR Value {120k*set+1u}
SYMBOL res 32 -704 R0
SYMATTR InstName R8
SYMATTR Value {Rs}
SYMBOL res 32 -448 R0
SYMATTR InstName R9
SYMATTR Value {Rs}
SYMBOL Misc\\jumper 240 -624 R0
SYMATTR InstName X1
SYMBOL NJM4580_1 -736 -528 M180
WINDOW 3 -194 142 Left 2
SYMATTR InstName U1
SYMBOL res -864 -576 R0
SYMATTR InstName R7
SYMATTR Value 120k
SYMBOL res 32 -720 M270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R10
SYMATTR Value {bias}
SYMBOL Misc\\jumper -592 -656 R0
SYMATTR InstName X2
SYMBOL cap -800 -368 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {Cm}
SYMBOL res -688 -368 R90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
TEXT 512 -792 Left 2 ;.step param bias list 200 1k 2.4k
TEXT -976 -1456 Left 2 !.model npnx npn (Bf=200 Is={10m/exp(0.7/26m)}\n.model pnpx pnp (Bf=200 Is={10m/exp(0.7/26m)}\n.model Dx D (Is={(20*50u)/exp(0.7/26m)}\n.model Osw SW(Ron=10u Roff=10meg Vt=12 Vh=-.2)
TEXT 520 -888 Left 2 ;.ac oct 100 1k 100meg
TEXT 520 -856 Left 2 ;.step param Ik1 1m 1.05m 5u
TEXT -832 -720 Left 2 ;Vp=25 Vm=-25 Ilim=20m
TEXT -320 -1544 Left 2 !.param Ik1 = 3m\n.param bias = 1.5k\n.param Rs = 1u\n.param vsup = 12\n.param poti = 10k\n.param set = 0.5\n.param Rll = 5k\n.param FT = 10meg
TEXT 528 -824 Left 2 ;.temp 27 90
TEXT 512 -752 Left 2 ;.step param Rset 10 30 0.1
TEXT 520 -656 Left 2 ;.step param Rll 10 10k 200
TEXT -456 -560 Left 2 !.param Cm=1p
TEXT -464 -512 Left 2 ;.step param Cm list 100p 500p 1n 2n
TEXT -944 -232 Left 2 ;.step param set 1 0.5 -0.05
RECTANGLE Normal -1040 -1304 352 320 2
