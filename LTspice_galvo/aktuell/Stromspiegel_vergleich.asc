Version 4
SHEET 1 6184 2724
WIRE -128 288 -128 272
WIRE 160 288 -128 288
WIRE 448 288 448 272
WIRE 736 288 448 288
WIRE 1248 288 1248 272
WIRE 1248 288 1088 288
WIRE 1536 288 1248 288
WIRE 160 304 160 288
WIRE 736 320 736 288
WIRE 1536 320 1536 288
WIRE 1088 336 1088 288
WIRE 448 352 448 288
WIRE 1248 352 1248 288
WIRE -128 384 -128 288
WIRE 736 448 736 400
WIRE 1536 448 1536 400
WIRE 160 464 160 384
WIRE 448 464 448 432
WIRE 576 464 448 464
WIRE 1248 464 1248 432
WIRE 1376 464 1248 464
WIRE -128 512 -128 464
WIRE 160 512 160 464
WIRE 448 512 448 464
WIRE 736 512 736 448
WIRE 1248 512 1248 464
WIRE 1536 512 1536 448
WIRE -16 560 -64 560
WIRE 96 560 -16 560
WIRE 576 560 576 464
WIRE 576 560 512 560
WIRE 672 560 576 560
WIRE 1088 560 1088 416
WIRE 1088 560 1024 560
WIRE 1184 560 1088 560
WIRE 1472 560 1184 560
WIRE -128 640 -128 608
WIRE -16 640 -16 560
WIRE -16 640 -128 640
WIRE 1088 640 1088 560
WIRE 448 656 448 608
WIRE -128 672 -128 640
WIRE 448 800 448 736
WIRE 576 800 448 800
WIRE 1088 800 1088 720
WIRE 1088 800 992 800
WIRE -128 816 -128 752
WIRE 0 816 -128 816
WIRE 448 848 448 800
WIRE 736 848 736 608
WIRE 1088 848 1088 800
WIRE 1248 848 1248 608
WIRE 1536 848 1536 608
WIRE -128 864 -128 816
WIRE 160 864 160 608
WIRE 576 896 576 800
WIRE 576 896 512 896
WIRE 672 896 576 896
WIRE 992 896 992 800
WIRE 1024 896 992 896
WIRE 1376 896 1376 464
WIRE 1376 896 1312 896
WIRE 1472 896 1376 896
WIRE 0 912 0 816
WIRE 0 912 -64 912
WIRE 96 912 0 912
WIRE 448 1008 448 944
WIRE 544 1008 448 1008
WIRE 736 1008 736 944
WIRE 736 1008 544 1008
WIRE 1088 1008 1088 944
WIRE 1248 1008 1248 944
WIRE 1248 1008 1088 1008
WIRE 1344 1008 1248 1008
WIRE 1536 1008 1536 944
WIRE 1536 1008 1344 1008
WIRE -128 1024 -128 960
WIRE -32 1024 -128 1024
WIRE 160 1024 160 960
WIRE 160 1024 -32 1024
WIRE 1104 1280 1104 1264
WIRE 1392 1280 1104 1280
WIRE -336 1312 -352 1312
WIRE -304 1312 -336 1312
WIRE 16 1312 -32 1312
WIRE 144 1312 16 1312
WIRE 368 1312 144 1312
WIRE 1392 1312 1392 1280
WIRE 1104 1344 1104 1280
WIRE -336 1360 -336 1312
WIRE 16 1376 16 1312
WIRE 368 1376 368 1312
WIRE 688 1408 688 1360
WIRE 96 1424 80 1424
WIRE 304 1424 96 1424
WIRE 1392 1440 1392 1392
WIRE 624 1456 560 1456
WIRE 1104 1456 1104 1424
WIRE 1232 1456 1104 1456
WIRE -336 1488 -336 1440
WIRE 16 1504 16 1472
WIRE 96 1504 96 1424
WIRE 96 1504 16 1504
WIRE 368 1504 368 1472
WIRE 560 1504 560 1456
WIRE 560 1504 368 1504
WIRE 1104 1504 1104 1456
WIRE 1392 1504 1392 1440
WIRE 368 1552 368 1504
WIRE 560 1552 560 1504
WIRE 592 1552 560 1552
WIRE 688 1552 688 1504
WIRE 688 1552 672 1552
WIRE 1232 1552 1232 1456
WIRE 1232 1552 1168 1552
WIRE 1328 1552 1232 1552
WIRE 16 1568 16 1504
WIRE 304 1600 240 1600
WIRE 688 1616 688 1552
WIRE 1568 1616 1568 1552
WIRE -176 1648 -192 1648
WIRE -80 1648 -112 1648
WIRE 1104 1648 1104 1600
WIRE 1392 1664 1392 1600
WIRE 1504 1664 1392 1664
WIRE -368 1712 -400 1712
WIRE -240 1728 -304 1728
WIRE -176 1728 -240 1728
WIRE -80 1728 -80 1648
WIRE -80 1728 -112 1728
WIRE 240 1728 240 1600
WIRE 240 1728 -80 1728
WIRE 272 1728 240 1728
WIRE 368 1728 368 1648
WIRE 368 1728 336 1728
WIRE 384 1728 368 1728
WIRE 400 1728 384 1728
WIRE -368 1744 -400 1744
WIRE -336 1776 -336 1760
WIRE 688 1776 688 1696
WIRE -336 1792 -336 1776
WIRE 688 1792 688 1776
WIRE 688 1792 -176 1792
WIRE 848 1792 688 1792
WIRE 1104 1792 1104 1728
WIRE 1232 1792 1104 1792
WIRE -176 1808 -176 1792
WIRE 688 1824 688 1792
WIRE 240 1840 240 1728
WIRE 272 1840 240 1840
WIRE 368 1840 336 1840
WIRE 384 1840 368 1840
WIRE 400 1840 384 1840
WIRE 1104 1840 1104 1792
WIRE 1392 1840 1392 1664
WIRE 1568 1840 1568 1712
WIRE 368 1888 368 1840
WIRE 1232 1888 1232 1792
WIRE 1232 1888 1168 1888
WIRE 1328 1888 1232 1888
WIRE 1504 1888 1328 1888
WIRE -400 1904 -400 1744
WIRE -176 1904 -176 1888
WIRE -176 1904 -400 1904
WIRE 848 1904 848 1792
WIRE -176 1920 -176 1904
WIRE 240 1936 240 1840
WIRE 304 1936 240 1936
WIRE 592 1984 560 1984
WIRE 688 1984 688 1904
WIRE 688 1984 672 1984
WIRE 1104 2000 1104 1936
WIRE 1200 2000 1104 2000
WIRE 1392 2000 1392 1936
WIRE 1392 2000 1200 2000
WIRE 1568 2000 1568 1936
WIRE 1568 2000 1392 2000
WIRE -640 2016 -656 2016
WIRE -528 2016 -560 2016
WIRE -480 2016 -528 2016
WIRE -384 2016 -400 2016
WIRE 368 2016 368 1984
WIRE 848 2016 848 1984
WIRE -864 2032 -896 2032
WIRE -752 2032 -784 2032
WIRE 16 2032 16 1648
WIRE 112 2032 16 2032
WIRE 368 2032 368 2016
WIRE 560 2032 560 1984
WIRE 560 2032 368 2032
WIRE 688 2032 688 1984
WIRE -448 2080 -464 2080
WIRE 16 2080 16 2032
WIRE 368 2080 368 2032
WIRE 560 2080 560 2032
WIRE 624 2080 560 2080
WIRE -816 2096 -832 2096
WIRE -448 2096 -448 2080
WIRE -816 2112 -816 2096
WIRE -528 2112 -528 2016
WIRE -480 2112 -528 2112
WIRE -1008 2128 -1088 2128
WIRE -992 2128 -1008 2128
WIRE -896 2128 -896 2032
WIRE -896 2128 -912 2128
WIRE -848 2128 -896 2128
WIRE -384 2128 -384 2016
WIRE -384 2128 -416 2128
WIRE -336 2128 -384 2128
WIRE -176 2128 -176 2000
WIRE -176 2128 -336 2128
WIRE 112 2128 112 2032
WIRE 112 2128 80 2128
WIRE 304 2128 112 2128
WIRE -752 2144 -752 2032
WIRE -752 2144 -784 2144
WIRE -672 2144 -752 2144
WIRE -656 2144 -672 2144
WIRE -528 2144 -576 2144
WIRE -480 2144 -528 2144
WIRE -848 2160 -880 2160
WIRE -448 2176 -448 2160
WIRE -448 2176 -464 2176
WIRE 688 2176 688 2128
WIRE -816 2192 -816 2176
WIRE -816 2192 -832 2192
WIRE -528 2208 -528 2144
WIRE 16 2240 16 2176
WIRE 16 2240 -32 2240
WIRE 112 2240 16 2240
WIRE 368 2240 368 2176
WIRE 368 2240 112 2240
WIRE -528 2320 -528 2288
WIRE -416 2320 -528 2320
WIRE 160 2320 -352 2320
WIRE 624 2320 160 2320
WIRE 848 2320 848 2096
WIRE 848 2320 704 2320
WIRE 624 2352 624 2320
WIRE 704 2368 704 2320
WIRE 848 2416 848 2320
WIRE 704 2432 704 2416
WIRE 848 2432 848 2416
WIRE 624 2448 624 2432
WIRE 848 2528 848 2512
FLAG 384 1728 V-
FLAG 384 1840 V+
FLAG 368 1504 mp1
FLAG 368 2016 mp2
FLAG 112 2240 V-
FLAG 144 1312 V+
FLAG 688 2176 V-
FLAG 688 1360 V+
FLAG -32 1024 V-
FLAG -128 272 V+
FLAG 544 1008 V-
FLAG 448 272 V+
FLAG 160 464 outa
FLAG 736 448 outb
FLAG 1344 1008 V-
FLAG 1248 272 V+
FLAG 1536 448 outc
FLAG 976 560 Uv
IOPIN 976 560 Out
FLAG 1200 2000 V-
FLAG 1104 1264 V+
FLAG 1392 1440 outd
FLAG -336 1488 0
FLAG 688 1776 oute
FLAG -304 1312 src
FLAG 448 1280 src
FLAG 848 2528 0
FLAG -240 1728 opOut
FLAG -336 1776 V+
FLAG -336 1696 V-
FLAG -400 1712 0
FLAG -192 1648 src
FLAG 848 2416 Rshunt
FLAG -880 2160 0
FLAG -656 2016 0
FLAG -448 2176 V-
FLAG -816 2192 V-
FLAG -448 2080 V+
FLAG -816 2096 V+
FLAG -336 2128 err
FLAG -672 2144 preAmp
FLAG -288 2288 V-
FLAG 624 2448 0
FLAG 704 2432 0
FLAG -1008 2128 src
FLAG 160 2320 fb
FLAG -1536 2464 0
SYMBOL res 688 1968 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value {bias*0.5}
SYMBOL res 576 1568 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value {bias}
SYMBOL res 672 1600 R0
SYMATTR InstName R8
SYMATTR Value {Re}
SYMBOL res 672 1920 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value {Re}
SYMBOL MJ11016G 624 1408 R0
SYMATTR InstName U1
SYMBOL MJ11015G 624 2128 M180
SYMATTR InstName U2
SYMBOL source-Vmarker -32 1312 R0
SYMATTR Value V=30V
SYMATTR InstName U3
SYMBOL source-Vmarker -32 2240 R0
SYMATTR Value V=-30V
SYMATTR InstName U4
SYMBOL npn 96 864 R0
SYMATTR InstName Q9
SYMATTR Value npnx
SYMBOL npn -64 864 M0
SYMATTR InstName Q14
SYMATTR Value npnx
SYMBOL npn 672 848 R0
SYMATTR InstName Q12
SYMATTR Value npnx
SYMBOL npn 512 848 M0
SYMATTR InstName Q13
SYMATTR Value npnx
SYMBOL npn 672 512 R0
SYMATTR InstName Q15
SYMATTR Value npnx
SYMBOL npn 512 512 M0
SYMATTR InstName Q16
SYMATTR Value npnx
SYMBOL res 720 304 R0
SYMATTR InstName Rm1
SYMATTR Value {Rm}
SYMBOL pnp -64 608 R180
SYMATTR InstName Q11
SYMATTR Value pnpx
SYMBOL pnp 96 608 M180
SYMATTR InstName Q17
SYMATTR Value pnpx
SYMBOL res 432 336 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL res -144 368 R0
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL res -112 656 M0
SYMATTR InstName Rset1
SYMATTR Value {Rset}
SYMBOL res 464 640 M0
SYMATTR InstName Rset2
SYMATTR Value {Rset}
SYMBOL res 144 288 R0
SYMATTR InstName Rm2
SYMATTR Value {Rm}
SYMBOL npn 1472 848 R0
SYMATTR InstName Q7
SYMATTR Value npnx
SYMBOL npn 1312 848 M0
SYMATTR InstName Q10
SYMATTR Value npnx
SYMBOL npn 1472 512 R0
SYMATTR InstName Q18
SYMATTR Value npnx
SYMBOL npn 1184 512 R0
SYMATTR InstName Q19
SYMATTR Value npnx
SYMBOL res 1520 304 R0
SYMATTR InstName Rm3
SYMATTR Value {Rm}
SYMBOL res 1232 336 R0
SYMATTR InstName R3
SYMATTR Value 35k
SYMBOL source-I 1088 416 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value 1m
SYMBOL res 1104 624 M0
SYMATTR InstName R4
SYMATTR Value {Rset*10}
SYMBOL npn 1024 848 R0
SYMATTR InstName Q20
SYMATTR Value npnx
SYMBOL npn 1328 1840 R0
SYMATTR InstName Q21
SYMATTR Value npnx
SYMBOL npn 1168 1840 M0
SYMATTR InstName Q22
SYMATTR Value npnx
SYMBOL npn 1328 1504 R0
SYMATTR InstName Q23
SYMATTR Value npnx
SYMBOL npn 1168 1504 M0
SYMATTR InstName Q24
SYMATTR Value npnx
SYMBOL res 1376 1296 R0
SYMATTR InstName Rm4
SYMATTR Value {Rm}
SYMBOL res 1088 1328 R0
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res 1120 1632 M0
SYMATTR InstName Rset3
SYMATTR Value {Rset}
SYMBOL npn 1504 1616 R0
SYMATTR InstName Q25
SYMATTR Value npnx
SYMBOL npn 1504 1840 R0
SYMATTR InstName Q26
SYMATTR Value npnx
SYMBOL source-V -336 1344 R0
WINDOW 123 28 109 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 1
SYMATTR InstName V1
SYMATTR Value SINE(0 15 1k 1m)
SYMBOL res 832 2000 R0
SYMATTR InstName R2
SYMATTR Value 1.5
SYMBOL res 32 1552 M0
SYMATTR InstName Rset4
SYMATTR Value {Rset}
SYMBOL Opamps\\opamp2 -336 1792 M180
WINDOW 3 13 9 Left 2
SYMATTR Value ada4700
SYMATTR InstName U5
SYMATTR SpiceModel ada4700
SYMBOL res -192 1904 R0
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res -160 1792 M0
SYMATTR InstName R12
SYMATTR Value {1k*Kp}
SYMBOL Misc\\jumper -144 1616 R0
SYMATTR InstName X1
SYMBOL ind 832 1888 R0
SYMATTR InstName L1
SYMATTR Value 170µ
SYMBOL res 832 2416 R0
SYMATTR InstName R13
SYMATTR Value 0.01
SYMBOL cap 272 1712 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {mill}
SYMBOL res -880 2048 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R14
SYMATTR Value {Kvv*10k}
SYMBOL res -1008 2144 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res -544 2032 M270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R16
SYMATTR Value {Rsu}
SYMBOL res -672 2160 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R17
SYMATTR Value {Rsu}
SYMBOL res -544 2304 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R18
SYMATTR Value {Rsu}
SYMBOL res -496 2032 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R19
SYMATTR Value {Rsu}
SYMBOL ADA4700 -816 2080 R0
SYMATTR InstName U6
SYMBOL ADA4700 -448 2064 R0
SYMATTR InstName U7
SYMBOL crtl-V-V 624 2336 M0
SYMATTR InstName E1
SYMATTR Value 100
SYMBOL Misc\\jumper -384 2256 R0
SYMATTR InstName X2
SYMBOL cap 272 1824 M90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value {mill}
SYMBOL BST62R 80 1472 R180
SYMATTR InstName U8
SYMBOL BST62R 304 1472 M180
SYMATTR InstName U9
SYMBOL BST62R 304 1648 M180
SYMATTR InstName U10
SYMBOL BST52 304 2080 R0
SYMATTR InstName U11
SYMBOL BST52 304 1888 R0
SYMATTR InstName U12
SYMBOL BST52 80 2080 M0
SYMATTR InstName U13
TEXT 728 1192 Left 2 !.param Re = 1n\n.param bias = 1500\n.param Rset = 57600
TEXT -8 1120 Left 2 !.tran 4m
TEXT -104 1192 Left 2 ;.step param Rset 100 500 100
TEXT -464 200 Left 2 !.param Rm = 1000
TEXT -464 176 Left 2 ;.step param Rm 10 1k 100
TEXT 488 1056 Left 2 ;Kaskode- Stromspiegel\nTietze S. 308
TEXT 112 2528 Left 2 !.model npnx npn(Is={I0/exp(0.7/26m)}  Bf=200)\n.model pnpx pnp(Is={I0/exp(0.7/26m)}  Bf=200)
TEXT 744 1304 Left 2 !.param I0 =1m
TEXT 1288 1056 Left 2 ;Kaskode- Stromspiegel mit\nVorspannungszweig\nTietze S. 319
TEXT 1144 2048 Left 2 ;Doppel- Kaskode- Stromspiegel\nTietze S. 320
TEXT 64 2680 Left 2 ;.model pnpx PNP(IS=2.014E-14 NF=0.9974 ISE=6.578E-15 NE=1.45 BF=315.3 IKF=0.079 VAF=39.15 NR=0.9952 ISC=1.633E-14 NC=1.15 BR=8.68 IKR=0.09 VAR=9.5 RB=10 IRB=5.00E-06 RBM=5.00E-06 RE=0.663 RC=0.718 CJE=1.135E-11 VJE=0.7071 MJE=0.3808 TF=6.546E-10 XTF=5.387 VTF=6.245 ITF=0.2108 PTF=0 CJC=6.395E-12 VJC=0.4951 MJC=0.44 XCJC=0.6288 TR=5.50E-08 CJS=0 VJS=0.75 MJS=0.333 XTB=0 XTI=3 EG=1.11 FC=0.9059 Vceo=45 Icrating=100m mfg=Philips)\n.model npnx NPN(IS=1.822E-14 NF=0.9932 ISE=2.894E-16 NE=1.4 BF=324.4 IKF=0.109 VAF=82 NR=0.9931 ISC=9.982E-12 NC=1.763 BR=8.29 IKR=0.09 VAR=17.9 RB=10 IRB=5.00E-06 RBM=5 RE=0.649 RC=0.7014 XTB=0 EG=1.11 XTI=3 CJE=1.244E-11 VJE=0.7579 MJE=0.3656 TF=4.908E-10 XTF=9.51 VTF=2.927 ITF=0.3131 PTF=0 CJC=3.347E-12 VJC=0.5463 MJC=0.391 XCJC=0.6193 TR=9.00E-08 CJS=0 VJS=0.75 MJS=0.333 FC=0.979 Vceo=45 Icrating=100m mfg=Philips)
TEXT -200 2640 Left 2 !.inc /home/mainster/.wine/drive_c/Program Files (x86)/LTC_orig/LTspiceIV_4.18/lib/sub/ADA4700.sub
TEXT -504 1632 Left 2 !.param mill = 22p
TEXT -128 1208 Left 2 ;.step param mill list 10p 100p 300p
TEXT -832 1656 Left 2 !; ---------------------\n;   Compensator\n; ---------------------\n.param Uset = 3\n.param Rsu = 10k\n.param Kp = 2\n.param Ki = 15000\n; Vorverstärker: Ic=Kvv*Uset\n.param Kvv = 1
TEXT -688 2432 Left 2 ;V(preAmp)-V(src) + V(err)-V(preAmp)  + V(opout)-V(err) + V(oute)-V(opout)  + V(rshunt)-V(fb)
TEXT 1160 1200 Left 2 !.step param Rset 1k 80k 5k
