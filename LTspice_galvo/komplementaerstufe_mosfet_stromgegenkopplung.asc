Version 4
SHEET 1 1316 680
WIRE -624 -1248 -752 -1248
WIRE -752 -1216 -752 -1248
WIRE -656 -1136 -688 -1136
WIRE -544 -1136 -656 -1136
WIRE 560 -1136 560 -1184
WIRE 656 -1136 656 -1184
WIRE -656 -1104 -656 -1136
WIRE -544 -1104 -544 -1136
WIRE -304 -1008 -304 -1056
WIRE 560 -1008 560 -1056
WIRE 656 -1008 656 -1056
WIRE 656 -1008 560 -1008
WIRE -752 -992 -752 -1056
WIRE -656 -992 -656 -1024
WIRE -656 -992 -752 -992
WIRE 656 -976 656 -1008
WIRE -656 -960 -656 -992
WIRE 16 -928 16 -1040
WIRE 16 -928 -128 -928
WIRE -752 -912 -752 -992
WIRE -720 -912 -752 -912
WIRE -304 -880 -304 -928
WIRE -224 -880 -304 -880
WIRE -192 -880 -224 -880
WIRE 16 -880 16 -928
WIRE -304 -848 -304 -880
WIRE -656 -816 -656 -864
WIRE -592 -816 -656 -816
WIRE -544 -816 -544 -1024
WIRE -544 -816 -592 -816
WIRE -128 -800 -128 -832
WIRE -80 -800 -128 -800
WIRE -32 -800 -80 -800
WIRE -592 -784 -592 -816
WIRE -592 -768 -592 -784
WIRE -304 -736 -304 -768
WIRE -128 -736 -128 -800
WIRE -96 -736 -128 -736
WIRE 16 -736 16 -784
WIRE 16 -736 -16 -736
WIRE -304 -704 -304 -736
WIRE 16 -688 16 -736
WIRE -688 -576 -736 -576
WIRE -640 -576 -688 -576
WIRE -528 -576 -560 -576
WIRE -432 -576 -528 -576
WIRE -304 -560 -304 -640
WIRE -304 -560 -368 -560
WIRE 16 -560 16 -608
WIRE 128 -560 16 -560
WIRE 560 -560 128 -560
WIRE -432 -544 -464 -544
WIRE 16 -528 16 -560
WIRE -736 -496 -736 -576
WIRE -304 -496 -304 -560
WIRE -304 -464 -304 -496
WIRE 1008 -464 880 -464
WIRE 880 -432 880 -464
WIRE -736 -400 -736 -416
WIRE -96 -400 -128 -400
WIRE 16 -400 16 -448
WIRE 16 -400 -16 -400
WIRE 560 -400 560 -560
WIRE -304 -384 -304 -400
WIRE -304 -368 -304 -384
WIRE 16 -368 16 -400
WIRE 1008 -368 1008 -464
WIRE 16 -352 16 -368
WIRE 832 -352 720 -352
WIRE -128 -336 -128 -400
WIRE -64 -336 -128 -336
WIRE -32 -336 -64 -336
WIRE 720 -336 720 -352
WIRE 880 -336 880 -352
WIRE -128 -304 -128 -336
WIRE 560 -272 560 -320
WIRE 560 -272 240 -272
WIRE 880 -272 880 -336
WIRE 1008 -272 1008 -288
WIRE -304 -256 -304 -288
WIRE -240 -256 -304 -256
WIRE -192 -256 -240 -256
WIRE 720 -224 720 -256
WIRE -304 -208 -304 -256
WIRE 16 -208 16 -256
WIRE 16 -208 -128 -208
WIRE -688 -176 -688 -208
WIRE -576 -160 -576 -176
WIRE -576 -128 -576 -160
WIRE 880 -128 784 -128
WIRE 992 -128 880 -128
WIRE 208 -112 80 -112
WIRE 240 -112 240 -272
WIRE 240 -112 208 -112
WIRE -304 -96 -304 -128
WIRE -688 -80 -688 -96
WIRE -640 -80 -688 -80
WIRE 16 -80 16 -208
WIRE 16 -80 0 -80
WIRE 80 -80 80 -112
WIRE -688 -32 -688 -80
WIRE 880 -32 880 -128
WIRE 240 -16 240 -112
WIRE 784 -16 784 -48
WIRE 832 -16 784 -16
WIRE -576 0 -576 -32
WIRE -576 0 -656 0
WIRE 992 16 992 -128
WIRE -576 32 -576 0
WIRE -528 32 -528 -576
WIRE -192 32 -528 32
WIRE 80 32 80 0
WIRE 80 32 -192 32
WIRE 80 48 80 32
WIRE -192 64 -192 32
WIRE 992 112 992 96
WIRE -688 128 -688 32
WIRE -624 128 -688 128
WIRE -576 128 -576 112
WIRE -576 128 -624 128
WIRE 240 144 240 64
WIRE 880 144 880 64
WIRE -192 160 -192 128
FLAG 16 -1040 Vplus
FLAG 0 -80 Vmin
FLAG 128 -560 out_A
FLAG -64 -336 Gp1
FLAG 16 -368 Sp1
FLAG 16 -736 Sn1
FLAG -80 -800 Gn1
FLAG -688 -208 Vplus
FLAG -576 -176 IsinkOP
FLAG -624 128 Vmin
FLAG 656 -976 0
FLAG 656 -1184 Vmin
FLAG 560 -1184 Vplus
FLAG -736 -400 0
FLAG -192 160 0
FLAG -752 -992 bcl
FLAG -592 -816 LM334
FLAG 1184 -784 0
FLAG -624 -1248 Vplus
FLAG 880 -272 0
FLAG 1008 -272 0
FLAG 720 -224 0
FLAG 992 112 0
FLAG 880 144 0
FLAG -224 -880 b1
FLAG -240 -256 b2
FLAG -304 -736 d1
FLAG -304 -496 d2
FLAG -304 -384 r4
FLAG -592 -784 0
FLAG -576 -160 0
FLAG -304 -16 0
FLAG -304 -1136 0
FLAG 240 144 0
FLAG -464 -544 0
FLAG 208 -112 shunt
FLAG -688 -576 in
SYMBOL EIT_Semiconductors\\npn -192 -928 R0
SYMATTR InstName T1
SYMATTR Value BC547B
SYMBOL EIT_Semiconductors\\pnp -192 -208 M180
SYMATTR InstName T2
SYMATTR Value BC327-40
SYMBOL res -112 -720 R270
WINDOW 0 25 56 VTop 0
WINDOW 3 7 56 VBottom 0
SYMATTR InstName R1
SYMATTR Value {bias}
SYMBOL res 0 -384 M270
WINDOW 0 25 56 VTop 0
WINDOW 3 7 56 VBottom 0
SYMATTR InstName R2
SYMATTR Value {bias}
SYMBOL res -320 -864 R0
SYMATTR InstName R3
SYMATTR Value 4k
SYMBOL res -320 -384 R0
SYMATTR InstName R4
SYMATTR Value 4k
SYMBOL diode -320 -704 R0
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode -320 -464 R0
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL res 544 -416 R0
SYMATTR InstName Rload1
SYMATTR Value 1m
SYMBOL EIT_Semiconductors\\nmos -32 -880 R0
SYMATTR InstName M1
SYMATTR Value IRFP240
SYMBOL EIT_Semiconductors\\pmos -32 -256 M180
SYMATTR InstName M2
SYMATTR Value IRFP9240
SYMBOL res 64 -96 R0
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL TL431 -688 16 R180
SYMATTR InstName U3
SYMBOL res -672 -192 M0
SYMATTR InstName R10
SYMATTR Value 4.7k
SYMBOL EIT_Semiconductors\\npn -640 -128 R0
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL res -592 16 R0
SYMATTR InstName R11
SYMATTR Value 2498
SYMBOL source-V 560 -1152 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -87 92 Left 0
SYMATTR Value {vsup}
SYMATTR InstName V1
SYMBOL source-V 656 -1152 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -72 98 Left 0
SYMATTR Value {-vsup}
SYMATTR InstName V2
SYMBOL source-V -736 -512 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -233 150 Left 0
SYMATTR Value ac 1
SYMATTR InstName V3
SYMBOL res -320 -224 R0
SYMATTR InstName R12
SYMATTR Value 1m
SYMBOL res -320 -1024 R0
SYMATTR InstName R13
SYMATTR Value 1m
SYMBOL LM334 -752 -1136 R0
SYMATTR InstName U5
SYMBOL res -672 -1120 R0
SYMATTR InstName R17
SYMATTR Value 166
SYMBOL res -560 -1120 R0
SYMATTR InstName R18
SYMATTR Value {6.8*166}
SYMBOL EIT_Semiconductors\\npn -720 -960 R0
SYMATTR InstName Q2
SYMATTR Value BC547B
SYMBOL EIT_Semiconductors\\op_3 -400 -560 R0
WINDOW 123 -264 -90 Left 0
WINDOW 3 -286 -119 Left 0
SYMATTR Value Vp={OpRail} Vm={-OpRail} Ilim=20m
SYMATTR InstName U1
SYMBOL EIT_Semiconductors\\nmos 832 -432 R0
SYMATTR InstName M3
SYMATTR Value IRFP240
SYMBOL source-V 1008 -384 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -18 167 Left 0
SYMATTR Value 10
SYMATTR InstName V5
SYMBOL source-V 720 -352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -18 167 Left 0
SYMATTR Value 10
SYMATTR InstName V6
SYMBOL EIT_Semiconductors\\pmos 832 64 M180
SYMATTR InstName M4
SYMATTR Value IRFP9240
SYMBOL source-V 992 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -18 167 Left 0
SYMATTR Value 10
SYMATTR InstName V4
SYMBOL source-V 784 -32 R180
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -18 167 Left 0
SYMATTR Value 10
SYMATTR InstName V7
SYMBOL source-I -304 -1056 R180
WINDOW 0 29 73 Left 0
WINDOW 3 29 17 Left 0
SYMATTR InstName I1
SYMATTR Value {Ik1}
SYMBOL source-I -304 -16 R180
WINDOW 0 29 73 Left 0
WINDOW 3 29 17 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I2
SYMATTR Value {Ik1}
SYMBOL res 224 -32 R0
SYMATTR InstName R5
SYMATTR Value 0.1
SYMBOL res -544 -592 R90
WINDOW 0 7 56 VBottom 0
WINDOW 3 25 56 VTop 0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 0 -704 R0
SYMATTR InstName R8
SYMATTR Value {Rs}
SYMBOL res 0 -544 R0
SYMATTR InstName R9
SYMATTR Value {Rs}
TEXT 512 -792 Left 0 ;.step temp 27 90\n.step param Rs list 1u 10m 100m 1\n;.step param bias 100 10k 500
TEXT -448 -1392 Left 0 !.model npnx npn (Bf=200 Is={10m/exp(0.7/26m)}\n.model pnpx pnp (Bf=200 Is={10m/exp(0.7/26m)}\n.model Dx D (Is={(20*50u)/exp(0.7/26m)}
TEXT -184 -1000 Left 0 ;4.27m
TEXT -216 -128 Left 0 ;4.25m
TEXT 520 -888 Left 0 !.dc V3 -0.5 0.5 0.01
TEXT 520 -832 Left 0 !.param vsup=25
TEXT 520 -856 Left 0 ;.step param Ik1 1m 1.05m 5u
TEXT -840 -328 Left 0 ;PULSE(-.5 .5 0 1m 1m 10m 23m)
TEXT -640 -720 Left 0 ;Vp=25 Vm=-25 Ilim=20m
TEXT 24 -1576 Left 0 !.param Ik1=1.04m\n.param bias=1k\n.param Rs=1u\n.param OpRail=16
RECTANGLE Normal -848 -1304 352 192 2
