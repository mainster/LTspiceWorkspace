Version 4
SHEET 1 880 1480
WIRE -640 -32 -640 -80
WIRE 144 -32 144 -80
WIRE 272 -32 272 -80
WIRE -240 16 -240 -64
WIRE -240 16 -448 16
WIRE -448 48 -448 16
WIRE 144 64 144 48
WIRE 272 64 272 48
WIRE 272 64 144 64
WIRE -240 80 -240 16
WIRE 144 80 144 64
WIRE -640 96 -640 48
WIRE -512 96 -640 96
WIRE -448 160 -448 144
WIRE -288 160 -448 160
WIRE -640 176 -640 96
WIRE -448 240 -448 160
WIRE -400 240 -448 240
WIRE -240 240 -240 176
WIRE -240 240 -320 240
WIRE -240 288 -240 240
WIRE -640 320 -640 256
WIRE -736 432 -736 416
WIRE -240 432 -240 368
WIRE 112 432 -240 432
WIRE -736 448 -736 432
WIRE -944 464 -1088 464
WIRE -832 464 -864 464
WIRE -768 464 -832 464
WIRE -640 480 -640 384
WIRE -640 480 -704 480
WIRE 112 480 112 432
WIRE -768 496 -800 496
WIRE -240 512 -240 432
WIRE -1088 544 -1088 464
WIRE -736 544 -736 512
WIRE -640 576 -640 480
WIRE 112 624 112 560
WIRE -1088 672 -1088 624
WIRE -400 688 -432 688
WIRE -240 688 -240 592
WIRE -240 688 -320 688
WIRE -640 720 -640 640
WIRE -240 768 -240 688
WIRE -432 784 -432 688
WIRE -288 784 -432 784
WIRE -432 816 -432 784
WIRE 112 816 112 704
WIRE 112 816 -96 816
WIRE -640 864 -640 800
WIRE -496 864 -640 864
WIRE -640 896 -640 864
WIRE -240 912 -240 864
WIRE -240 912 -432 912
WIRE -240 992 -240 912
WIRE -640 1024 -640 976
WIRE -832 1168 -832 464
WIRE -224 1168 -832 1168
WIRE -96 1168 -96 816
WIRE -96 1168 -144 1168
WIRE -96 1232 -96 1168
WIRE -96 1360 -96 1312
FLAG 144 80 0
FLAG 144 -80 Vplus
FLAG 272 -80 Vmin
FLAG -1088 672 0
FLAG -736 432 Vplus
FLAG -736 544 Vmin
FLAG -640 1024 0
FLAG -640 -80 0
FLAG -240 -64 Vplus
FLAG -240 992 Vmin
FLAG -96 1360 0
FLAG -800 496 0
SYMBOL voltage 144 -48 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 15
SYMBOL voltage 272 -48 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value -15
SYMBOL voltage -1088 528 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value SINE(0 0.5 1k)
SYMATTR Value2 AC 1
SYMBOL Opamps\\UniversalOpamp2 -736 480 R0
SYMATTR InstName U1
SYMBOL diode -656 320 R0
SYMATTR InstName D1
SYMBOL diode -656 576 R0
SYMATTR InstName D2
SYMBOL res -656 704 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL res -656 160 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL npn -512 48 R0
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL pnp -496 912 M180
SYMATTR InstName Q2
SYMATTR Value BC327-40
SYMBOL current -640 896 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value 3m
SYMBOL current -640 -32 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I2
SYMATTR Value 3m
SYMBOL nmos -288 80 R0
SYMATTR InstName M1
SYMATTR Value IRFP240
SYMBOL pmos -288 864 M180
SYMATTR InstName M2
SYMATTR Value IRFP9240
SYMBOL res -304 672 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {bias}
SYMBOL res -304 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value {bias}
SYMBOL res -224 384 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value {Rs}
SYMBOL res -224 608 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value {Rs}
SYMBOL res -960 480 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res 96 608 R0
SYMATTR InstName R8
SYMATTR Value 3.5
SYMBOL ind 96 464 R0
SYMATTR InstName L1
SYMATTR Value 170µ
SYMBOL res -112 1216 R0
SYMATTR InstName R9
SYMATTR Value 0.1
SYMBOL res -128 1152 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {poti*(1-set)}
TEXT -952 -64 Left 2 !.param Ik1 = 3m\n.param bias = 1.5k\n.param Rs = 1u\n.param vsup = 20\n.param poti = 100\n.param set = 0.5\n.param Rll = 5k\n.param FT = 10meg
TEXT -728 1312 Left 2 !.step param set 0.1 0.9 0.25
TEXT 86 150 Left 2 ;.ac oct 100 1k 10meg
TEXT -1122 1462 Left 2 !.tran 5m
RECTANGLE Normal 32 1456 -992 -176 2
