Version 4
SHEET 1 880 2284
WIRE -1392 -880 -1440 -880
WIRE -1280 -880 -1312 -880
WIRE -1008 -800 -1008 -832
WIRE -896 -800 -896 -832
WIRE -1360 -752 -1360 -784
WIRE -1440 -736 -1440 -880
WIRE -1392 -736 -1440 -736
WIRE -1280 -720 -1280 -880
WIRE -1280 -720 -1328 -720
WIRE -608 -720 -640 -720
WIRE -496 -720 -528 -720
WIRE -464 -720 -496 -720
WIRE 496 -720 -384 -720
WIRE -1552 -704 -1584 -704
WIRE -1520 -704 -1552 -704
WIRE -1424 -704 -1440 -704
WIRE -1392 -704 -1424 -704
WIRE -1008 -688 -1008 -720
WIRE -944 -688 -1008 -688
WIRE -896 -688 -896 -720
WIRE -896 -688 -944 -688
WIRE -944 -672 -944 -688
WIRE -1360 -640 -1360 -688
WIRE -192 -640 -240 -640
WIRE 160 -640 -192 -640
WIRE -192 -608 -192 -640
WIRE 160 -560 160 -640
WIRE 160 -560 16 -560
WIRE 16 -512 16 -560
WIRE -192 -464 -192 -528
WIRE -48 -464 -192 -464
WIRE 160 -448 160 -560
WIRE -192 -432 -192 -464
WIRE 16 -368 16 -416
WIRE 112 -368 16 -368
WIRE -192 -320 -192 -352
WIRE 16 -304 16 -368
WIRE 48 -304 16 -304
WIRE 160 -304 160 -352
WIRE 160 -304 128 -304
WIRE 160 -224 160 -304
WIRE -416 -176 -416 -192
WIRE -640 -160 -656 -160
WIRE -608 -160 -640 -160
WIRE -496 -160 -496 -720
WIRE -496 -160 -528 -160
WIRE -464 -160 -496 -160
WIRE -448 -160 -464 -160
WIRE -336 -144 -384 -144
WIRE -192 -144 -192 -256
WIRE -192 -144 -336 -144
WIRE -448 -128 -480 -128
WIRE -656 -112 -656 -160
WIRE 160 -112 160 -144
WIRE 256 -112 160 -112
WIRE 336 -112 256 -112
WIRE -416 -96 -416 -112
WIRE -192 -80 -192 -144
WIRE 336 -80 336 -112
WIRE 160 -64 160 -112
WIRE -656 16 -656 -32
WIRE 336 32 336 0
WIRE 496 32 496 -720
WIRE 496 32 336 32
WIRE -192 48 -192 -16
WIRE 48 48 32 48
WIRE 160 48 160 16
WIRE 160 48 128 48
WIRE 336 64 336 32
WIRE 160 80 160 48
WIRE 32 96 32 48
WIRE 112 96 32 96
WIRE 32 144 32 96
WIRE -400 192 -560 192
WIRE -192 192 -192 128
WIRE -32 192 -192 192
WIRE 336 192 336 144
WIRE -192 256 -192 192
WIRE 32 256 32 240
WIRE 160 256 160 176
WIRE 160 256 32 256
WIRE -480 304 -480 272
WIRE -560 320 -560 192
WIRE -512 320 -560 320
WIRE -400 336 -400 192
WIRE -400 336 -448 336
WIRE -720 352 -736 352
WIRE -640 352 -720 352
WIRE -512 352 -560 352
WIRE -192 368 -192 336
WIRE 0 368 -192 368
WIRE 160 368 160 256
WIRE 160 368 0 368
WIRE -480 416 -480 368
FLAG -720 352 in
FLAG -944 -672 0
FLAG -1008 -832 Vm
FLAG -896 -832 Vp
FLAG -480 272 Vp
FLAG -480 416 Vm
FLAG -1280 -720 outOp2
FLAG -1360 -784 Vp
FLAG -1360 -640 Vm
FLAG -1424 -704 in+2
FLAG -1520 -880 0
FLAG -1552 -704 in
FLAG 336 192 0
FLAG 256 -112 out5
FLAG -240 -640 Vp
FLAG -640 -160 in
FLAG -640 -720 0
FLAG -656 16 0
FLAG -336 -144 outOp
FLAG -416 -192 Vp
FLAG -416 -96 Vm
FLAG 0 368 Vm
FLAG -464 -160 in-
FLAG -480 -128 0
SYMBOL res -544 336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL voltage -1008 -816 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value {-Vsup}
SYMBOL voltage -896 -816 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value {Vsup}
SYMBOL Opamps\\LT1028 -480 272 R0
WINDOW 3 10 126 Left 2
SYMATTR InstName U2
SYMBOL Opamps\\UniversalOpamp2 -1360 -720 R0
WINDOW 123 -282 158 Left 2
SYMATTR Value2 Avol=1Meg GBW=50Meg Slew=11Meg
SYMATTR InstName U1
SYMATTR SpiceLine ilimit=25m rail={rail} Vos=0 phimargin=45
SYMBOL res -1424 -720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res -1296 -896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 19k
SYMBOL res -1424 -896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res -208 -448 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL npn -48 -512 R0
SYMATTR InstName Q3
SYMATTR Value BC547B
SYMBOL nmos 112 -448 R0
SYMATTR InstName M3
SYMATTR Value IRFP240
SYMBOL res 144 -320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 270
SYMBOL res 176 -128 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R13
SYMATTR Value 1m
SYMBOL res 176 32 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R14
SYMATTR Value 1m
SYMBOL pmos 112 176 M180
SYMATTR InstName M4
SYMATTR Value IRF9640
SYMBOL pnp -32 240 M180
SYMATTR InstName Q4
SYMATTR Value BC327-40
SYMBOL res 32 64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R15
SYMATTR Value 270
SYMBOL res -208 32 R0
SYMATTR InstName R16
SYMATTR Value 1k
SYMBOL diode -208 -80 R0
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode -208 -320 R0
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL res 320 -96 R0
SYMATTR InstName RL2
SYMATTR Value 2
SYMBOL res 320 48 R0
SYMATTR InstName Shunt2
SYMATTR Value 0.1
SYMBOL res -368 -736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 9k
SYMBOL res -512 -176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 10k
SYMBOL res -512 -736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 1k
SYMBOL voltage -656 -128 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 1
SYMATTR InstName V4
SYMATTR Value SINE(0 1 10k)
SYMBOL current -192 -608 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I3
SYMATTR Value {Ik}
SYMBOL current -192 256 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I4
SYMATTR Value {Ik}
SYMBOL Opamps\\LT1028 -416 -208 R0
WINDOW 3 10 126 Left 2
SYMATTR InstName U3
TEXT -776 -584 Left 2 !.param Vsup=20\n.param Ik=3.9m\n.param R1=10k\n.param R2=20k\n.param rail=0\n.param Rl=200\n.param tstop=5m\n.param vsw=2
TEXT -216 -768 Left 2 ;abs(V(Op+)-V(op-))
TEXT -952 -248 Left 2 !.dc V4 {-vsw} {vsw} 0.01
TEXT -952 -312 Left 2 ;.ac oct 100 1k 100meg
