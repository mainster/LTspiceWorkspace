Version 4
SHEET 1 1044 680
WIRE -1056 -1088 -1056 -1136
WIRE -928 -1088 -928 -1136
WIRE -320 -1088 -336 -1088
WIRE -736 -1040 -752 -1040
WIRE -592 -1040 -608 -1040
WIRE -320 -1040 -320 -1088
WIRE -736 -1008 -736 -1040
WIRE -608 -1008 -608 -1040
WIRE -1056 -992 -1056 -1008
WIRE -928 -992 -928 -1008
WIRE -928 -992 -1056 -992
WIRE -1056 -976 -1056 -992
WIRE -320 -944 -320 -960
WIRE 80 -928 80 -976
WIRE -1040 -880 -1088 -880
WIRE -992 -880 -1040 -880
WIRE -736 -880 -736 -928
WIRE -608 -880 -608 -928
WIRE -320 -848 -320 -864
WIRE -96 -848 -320 -848
WIRE 16 -848 -16 -848
WIRE 32 -848 16 -848
WIRE -1088 -800 -1088 -880
WIRE 80 -800 80 -832
WIRE -736 -784 -736 -800
WIRE -672 -784 -736 -784
WIRE -608 -784 -608 -800
WIRE -608 -784 -672 -784
WIRE -320 -784 -320 -848
WIRE -368 -768 -432 -768
WIRE -1088 -672 -1088 -720
WIRE -320 -672 -320 -688
WIRE -320 -672 -336 -672
WIRE -320 -592 -336 -592
WIRE -688 -576 -784 -576
WIRE -320 -576 -320 -592
WIRE 80 -576 80 -720
WIRE 160 -576 80 -576
WIRE 176 -576 176 -608
WIRE 176 -576 160 -576
WIRE 288 -576 176 -576
WIRE 80 -512 80 -576
WIRE -576 -496 -624 -496
WIRE -560 -496 -576 -496
WIRE -432 -496 -432 -768
WIRE -432 -496 -496 -496
WIRE -400 -496 -432 -496
WIRE -368 -496 -400 -496
WIRE 288 -496 288 -576
WIRE 80 -416 80 -432
WIRE -320 -400 -320 -480
WIRE -96 -400 -320 -400
WIRE 16 -400 -16 -400
WIRE 32 -400 16 -400
WIRE -800 -368 -832 -368
WIRE -320 -368 -320 -400
WIRE 288 -368 288 -416
WIRE -656 -336 -672 -336
WIRE -672 -320 -672 -336
WIRE -720 -304 -720 -368
WIRE -704 -304 -720 -304
WIRE -592 -288 -640 -288
WIRE -560 -288 -592 -288
WIRE -480 -288 -496 -288
WIRE -432 -288 -432 -496
WIRE -432 -288 -480 -288
WIRE -864 -272 -912 -272
WIRE -832 -272 -864 -272
WIRE -736 -272 -752 -272
WIRE -704 -272 -736 -272
WIRE -320 -272 -320 -288
WIRE -672 -240 -672 -256
WIRE -656 -240 -672 -240
WIRE 176 -240 176 -576
WIRE 80 -224 80 -320
WIRE -320 -176 -320 -192
WIRE -320 -176 -336 -176
WIRE -736 -112 -736 -272
WIRE -720 -112 -736 -112
WIRE -608 -112 -640 -112
WIRE -560 -112 -608 -112
WIRE -464 -112 -480 -112
WIRE -336 -112 -464 -112
WIRE 176 -112 176 -176
WIRE 176 -112 -336 -112
WIRE 192 -112 176 -112
WIRE 288 -112 288 -288
WIRE 288 -112 256 -112
WIRE -736 -80 -736 -112
WIRE -608 -80 -608 -112
WIRE 288 -80 288 -112
WIRE -464 -64 -464 -112
WIRE -336 -48 -336 -112
WIRE 288 16 288 0
FLAG -1056 -976 0
FLAG -1056 -1136 Vplus
FLAG -928 -1136 Vmin
FLAG 288 16 0
FLAG 160 -576 out_fet
FLAG -320 -176 V-drv
FLAG 16 -848 Gph
FLAG 16 -400 Gpl
FLAG -672 -240 V+drv
FLAG -672 -336 V-drc
FLAG -832 -368 0
FLAG -672 -784 0
FLAG -736 -1040 V+drv
FLAG -608 -1040 V-drv
FLAG -320 -1088 V+drv
FLAG -320 -672 V-drv
FLAG -320 -592 V+drv
FLAG -640 -576 0
FLAG -704 -496 0
FLAG 240 -768 0
FLAG 240 -832 0
FLAG -400 -496 GG
FLAG -592 -288 opO
FLAG -1088 -672 0
FLAG -1040 -880 stim
FLAG -864 -272 stim
FLAG -784 -576 stim
SYMBOL voltage -1056 -1104 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 30
SYMBOL voltage -928 -1104 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value -30
SYMBOL pmos 32 -320 M180
SYMATTR InstName Ml1
SYMATTR Value IRF9640
SYMBOL nmos 32 -928 R0
SYMATTR InstName Mh1
SYMATTR Value IRFP240
SYMBOL nmos -368 -576 R0
SYMATTR InstName M1
SYMATTR Value BSS145
SYMBOL pmos -368 -688 M180
SYMATTR InstName M2
SYMATTR Value BSS84
SYMBOL current -320 -1040 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value {ictrl}
SYMBOL current -320 -272 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -70 80 Left 2
SYMATTR InstName I2
SYMATTR Value {ictrl}
SYMBOL source-Vmarker 80 -224 R0
SYMATTR Value V=-30V
SYMATTR InstName U1
SYMBOL source-Vmarker 80 -976 R0
SYMATTR Value V=30V
SYMATTR InstName U2
SYMBOL res 272 -384 R0
SYMATTR InstName R1
SYMATTR Value 1.5
SYMBOL ind 272 -512 R0
SYMATTR InstName L1
SYMATTR Value 170µ
SYMATTR SpiceLine Ipk=25
SYMBOL res -848 -288 M90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL Opamps\\opamp2 -672 -224 M180
SYMATTR InstName U3
SYMATTR Value ada4700
SYMATTR SpiceModel ada4700
SYMBOL res -704 -352 M270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value 10
SYMBOL voltage -736 -896 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 30V
SYMBOL voltage -608 -896 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value -30
SYMBOL voltage -736 -1024 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value {10V*hv}
SYMBOL voltage -608 -1024 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value {-10V*hv}
SYMBOL res -112 -864 M90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName Rgh1
SYMATTR Value 5
SYMBOL res 0 -384 M270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName Rgl1
SYMATTR Value 5
SYMBOL res 96 -816 M0
SYMATTR InstName Rsh1
SYMATTR Value 100m
SYMBOL res 64 -416 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName Rsl1
SYMATTR Value 100m
SYMBOL crtl-V-V -608 -496 R90
WINDOW 0 -47 6 Left 2
WINDOW 3 -43 109 Left 2
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL res -736 -128 M90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R4
SYMATTR Value {rfb}
SYMBOL res -576 -96 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value {1t*j1+1f}
SYMBOL res -576 -272 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R6
SYMATTR Value {1t*j1+1u}
SYMBOL res -592 -480 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value {1t*(1-j1)+1u}
SYMBOL cap 224 -832 R0
SYMATTR InstName C1
SYMATTR Value 10p
SYMBOL res -336 -384 R0
SYMATTR InstName R8
SYMATTR Value 1
SYMBOL res -336 -960 R0
SYMATTR InstName R9
SYMATTR Value 1
SYMBOL source-Vmarker -112 -704 R0
SYMATTR Value V=30V
SYMATTR InstName U4
SYMBOL res 272 -96 R0
SYMATTR InstName R10
SYMATTR Value 10m
SYMBOL voltage -1088 -816 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 1
SYMATTR InstName V7
SYMATTR Value PULSE(-5 5 0 10n 10n 1m 2m)
SYMBOL Misc\\jumper 224 -144 R0
SYMATTR InstName X1
SYMBOL Misc\\jumper 96 -208 R270
SYMATTR InstName X2
TEXT -600 -1272 Left 2 !.tran 5m
TEXT -768 -648 Left 2 !.param ictrl = 0
TEXT -736 -744 Left 2 !.param hv=0
TEXT -696 -1200 Left 2 ;.step param hv list 0 1
TEXT -640 -400 Left 2 !.param j1 = 0
TEXT -888 -40 Left 2 !.param rfb = 60k
TEXT -872 24 Left 2 ;.step param rfb list 10k 20k 40k
TEXT -256 -1208 Left 2 !.inc /home/mainster/.wine/drive_c/Program Files (x86)/LTC_orig/LTspiceIV_4.18/lib/sub/ADA4700.sub
TEXT -256 -1176 Left 2 !.inc /home/mainster/.wine/drive_c/Program Files (x86)/LTC_orig/LTspiceIV_4.18/lib/sub/LM358.sub
