Version 4
SHEET 1 2804 2100
WIRE 1984 -96 1936 -96
WIRE 2128 -96 2080 -96
WIRE 2144 -96 2128 -96
WIRE 1936 -48 1936 -96
WIRE 2080 -48 2080 -96
WIRE 1936 64 1936 32
WIRE 2080 64 2080 32
WIRE 128 128 96 128
WIRE 240 128 208 128
WIRE 272 128 240 128
WIRE 1424 128 352 128
WIRE -96 144 -160 144
WIRE -32 144 -96 144
WIRE -32 192 -32 144
WIRE 576 208 320 208
WIRE 688 208 576 208
WIRE 736 208 688 208
WIRE 1088 208 736 208
WIRE 736 240 736 208
WIRE -320 272 -320 144
WIRE -160 272 -160 144
WIRE 1088 288 1088 208
WIRE 1088 288 944 288
WIRE 1872 288 1840 288
WIRE 1984 288 1952 288
WIRE 2016 288 1984 288
WIRE 2480 288 2096 288
WIRE -32 320 -32 272
WIRE -32 320 -96 320
WIRE 944 336 944 288
WIRE -448 352 -448 224
WIRE -32 384 -32 320
WIRE 736 384 736 320
WIRE 880 384 736 384
WIRE 2176 384 2064 384
WIRE 2320 384 2176 384
WIRE -320 400 -320 352
WIRE -320 400 -384 400
WIRE 1088 400 1088 288
WIRE -160 416 -160 368
WIRE -64 416 -160 416
WIRE 576 416 576 208
WIRE 736 416 736 384
WIRE -160 448 -160 416
WIRE 2320 448 2320 384
WIRE -320 464 -320 400
WIRE 320 480 320 208
WIRE 944 480 944 432
WIRE 1040 480 944 480
WIRE -448 496 -448 448
WIRE -352 496 -448 496
WIRE 2064 512 2064 384
WIRE -448 528 -448 496
WIRE 448 528 384 528
WIRE 576 528 576 496
WIRE 576 528 448 528
WIRE 736 528 736 496
WIRE 944 544 944 480
WIRE 976 544 944 544
WIRE 1088 544 1088 496
WIRE 1088 544 1056 544
WIRE 2192 560 2128 560
WIRE 2320 560 2320 528
WIRE 2320 560 2192 560
WIRE -160 576 -160 528
WIRE -32 576 -32 448
WIRE -32 576 -160 576
WIRE 576 608 576 592
WIRE -160 624 -160 576
WIRE 1088 624 1088 544
WIRE 320 640 320 576
WIRE 2320 640 2320 624
WIRE -448 656 -448 608
WIRE -384 656 -448 656
WIRE -320 656 -320 528
WIRE -320 656 -384 656
WIRE 320 672 320 640
WIRE 2064 672 2064 608
WIRE 240 688 240 128
WIRE 288 688 240 688
WIRE 400 704 352 704
WIRE 576 704 576 688
WIRE 576 704 400 704
WIRE 736 704 736 592
WIRE 736 704 576 704
WIRE 2064 704 2064 672
WIRE 128 720 112 720
WIRE 160 720 128 720
WIRE 256 720 240 720
WIRE 288 720 256 720
WIRE 1984 720 1984 288
WIRE 2032 720 1984 720
WIRE -160 736 -160 704
WIRE 576 736 576 704
WIRE 1088 736 1088 704
WIRE 1184 736 1088 736
WIRE 1264 736 1184 736
WIRE 2320 736 2320 720
WIRE 2320 736 2096 736
WIRE 2432 736 2320 736
WIRE 2480 736 2480 288
WIRE 2480 736 2432 736
WIRE 1824 752 1808 752
WIRE 1872 752 1824 752
WIRE 1968 752 1952 752
WIRE 1984 752 1968 752
WIRE 2032 752 1984 752
WIRE 112 768 112 720
WIRE 448 768 448 528
WIRE 736 768 736 704
WIRE 2320 768 2320 736
WIRE 320 784 320 736
WIRE 1088 784 1088 736
WIRE 1264 784 1264 736
WIRE 1808 800 1808 752
WIRE 2192 800 2192 560
WIRE 2064 816 2064 768
WIRE 576 848 576 816
WIRE 2320 880 2320 848
WIRE 112 896 112 848
WIRE 320 896 320 784
WIRE 736 896 736 832
WIRE 976 896 960 896
WIRE 1088 896 1088 864
WIRE 1088 896 1056 896
WIRE 1808 912 1808 880
WIRE 1088 928 1088 896
WIRE 1264 928 1264 864
WIRE 2064 928 2064 816
WIRE 448 944 448 832
WIRE 448 944 384 944
WIRE 576 944 576 912
WIRE 576 944 448 944
WIRE 960 944 960 896
WIRE 1040 944 960 944
WIRE 2192 976 2192 864
WIRE 2192 976 2128 976
WIRE 2320 976 2320 944
WIRE 2320 976 2192 976
WIRE 960 992 960 944
WIRE -96 1008 -96 976
WIRE 16 1008 16 976
WIRE 736 1040 736 976
WIRE 896 1040 736 1040
WIRE 1264 1040 1264 1008
WIRE 1376 1040 1264 1040
WIRE 1424 1056 1424 128
WIRE 1264 1072 1264 1040
WIRE 1376 1072 1376 1040
WIRE 736 1104 736 1040
WIRE 960 1104 960 1088
WIRE 1088 1104 1088 1024
WIRE 1088 1104 960 1104
WIRE -96 1120 -96 1088
WIRE -32 1120 -96 1120
WIRE 16 1120 16 1088
WIRE 16 1120 -32 1120
WIRE 2064 1120 2064 1024
WIRE 2176 1120 2064 1120
WIRE 2320 1120 2320 1056
WIRE 2320 1120 2176 1120
WIRE -32 1136 -32 1120
WIRE 1376 1168 1376 1120
WIRE 1424 1168 1424 1136
WIRE 1264 1200 1264 1152
WIRE 320 1216 320 992
WIRE 432 1216 320 1216
WIRE 576 1216 576 1024
WIRE 576 1216 432 1216
WIRE 736 1216 736 1184
WIRE 736 1216 576 1216
WIRE 1088 1216 1088 1104
WIRE 1088 1216 736 1216
WIRE 1984 1216 1984 752
WIRE 2176 1216 1984 1216
WIRE 2480 1216 2480 736
WIRE 2480 1216 2256 1216
FLAG 1264 1200 0
FLAG 1184 736 out5
FLAG 688 208 Vp
FLAG 432 1216 Vm
FLAG 128 720 in
FLAG 96 128 0
FLAG -32 1136 0
FLAG -96 976 Vm
FLAG 16 976 Vp
FLAG 112 896 0
FLAG 400 704 outOp
FLAG 320 640 Op+
FLAG 320 784 op-
FLAG -320 144 0
FLAG -448 144 0
FLAG -160 736 0
FLAG -96 144 Vp
FLAG -384 656 Vm
FLAG 2176 384 Vp
FLAG 2176 1120 Vm
FLAG 2064 672 Op2+
FLAG 2064 816 op2-
FLAG 1984 -96 sin2
FLAG 1840 288 0
FLAG 2784 832 0
FLAG 2576 848 0
FLAG 2432 736 out2
FLAG 2080 64 0
FLAG 2128 -96 in2
FLAG 256 720 in+
FLAG 1376 1168 0
FLAG 1424 1168 0
FLAG 1936 64 0
FLAG 1808 912 0
FLAG 1824 752 in3
FLAG 1968 752 in+2
SYMBOL res 720 400 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL npn 880 336 R0
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL nmos 1040 400 R0
SYMATTR InstName M1
SYMATTR Value IRFP240
SYMBOL res 1072 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 270
SYMBOL res 1104 720 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 1m
SYMBOL res 1104 880 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 1m
SYMBOL pmos 1040 1024 M180
SYMATTR InstName M2
SYMATTR Value IRF9640
SYMBOL pnp 896 1088 M180
SYMATTR InstName Q2
SYMATTR Value BC327-40
SYMBOL res 960 912 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value 270
SYMBOL res 720 880 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL diode 720 768 R0
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode 720 528 R0
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL res 1248 912 R0
SYMATTR InstName RL1
SYMATTR Value 2
SYMBOL res 1248 1056 R0
SYMATTR InstName Shunt1
SYMATTR Value 0.1
SYMBOL res 368 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL Opamps\\UniversalOpamp2 320 704 R0
SYMATTR InstName U1
SYMATTR SpiceLine ilimit=25m rail={rail} Vos=0 phimargin=45
SYMBOL res 256 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL npn 384 480 M0
SYMATTR InstName Q3
SYMATTR Value 2N2222
SYMBOL pnp 384 992 R180
SYMATTR InstName Q4
SYMATTR Value 2N2907
SYMBOL res 560 400 R0
SYMATTR InstName R9
SYMATTR Value {R2}
SYMBOL res 560 928 R0
SYMATTR InstName R10
SYMATTR Value {R2}
SYMBOL res 560 720 R0
SYMATTR InstName R11
SYMATTR Value {R1}
SYMBOL res 560 592 R0
SYMATTR InstName R12
SYMATTR Value {R1}
SYMBOL diode 560 848 R0
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode 560 528 R0
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL cap 432 768 R0
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL res 224 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 100k
SYMBOL voltage -96 992 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value {-Vsup}
SYMBOL voltage 16 992 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value {Vsup}
SYMBOL voltage 112 752 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 1
SYMATTR InstName V3
SYMATTR Value SINE(0 1 10k)
SYMBOL current 736 240 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I2
SYMATTR Value {Ik}
SYMBOL current 736 1104 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I3
SYMATTR Value {Ik}
SYMBOL res -176 432 R0
SYMATTR InstName R17
SYMATTR Value 1k
SYMBOL res -48 176 R0
SYMATTR InstName R18
SYMATTR Value 4.8k
SYMBOL res -176 608 R0
SYMATTR InstName Isource1
SYMATTR Value {Rl}
SYMBOL res -464 512 R0
SYMATTR InstName R19
SYMATTR Value 1k
SYMBOL res -336 256 R0
SYMATTR InstName R20
SYMATTR Value 4.7k
SYMBOL res -464 128 R0
SYMATTR InstName Isink1
SYMATTR Value {Rl}
SYMBOL npn -384 352 M0
SYMATTR InstName Q7
SYMBOL npn -96 272 M0
SYMATTR InstName Q8
SYMBOL res 2112 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 250k
SYMBOL Opamps\\UniversalOpamp2 2064 736 R0
SYMATTR InstName U2
SYMATTR SpiceLine ilimit=25m rail={rail} Vos=0 phimargin=45
SYMBOL res 1968 736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 100k
SYMBOL npn 2128 512 M0
SYMATTR InstName Q5
SYMATTR Value 2N2222
SYMBOL pnp 2128 1024 R180
SYMATTR InstName Q6
SYMATTR Value 2N2907
SYMBOL res 2304 432 R0
SYMATTR InstName R16
SYMATTR Value {R2}
SYMBOL res 2304 960 R0
SYMATTR InstName R21
SYMATTR Value {R2}
SYMBOL res 2304 752 R0
SYMATTR InstName R22
SYMATTR Value {R1}
SYMBOL res 2304 624 R0
SYMATTR InstName R23
SYMATTR Value {R1}
SYMBOL diode 2304 880 R0
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL diode 2304 560 R0
SYMATTR InstName D6
SYMATTR Value 1N4148
SYMBOL cap 2176 800 R0
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL res 1968 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 100k
SYMBOL bv 2080 -64 R0
WINDOW 3 -108 202 Left 2
SYMATTR Value V=V(sin2)*2*time/tstop
SYMATTR InstName B1
SYMBOL res 2272 1200 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 110t
SYMBOL e 1424 1040 R0
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL voltage 1936 -64 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -47 159 Left 2
SYMATTR Value SINE(0 1 1k)
SYMATTR InstName V4
SYMBOL voltage 1808 784 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -47 159 Left 2
SYMATTR Value SINE(0 4 100k)
SYMATTR InstName V5
SYMBOL ind 1248 768 R0
SYMATTR InstName L1
SYMATTR Value 170µ
TEXT 456 -96 Left 2 !.param Vsup=30\n.param Ik=3.9m\n.param R1=10k\n.param R2=20k\n.param rail=0\n.param Rl=200\n.param tstop=5m\n.param vsw=2
TEXT 1592 464 Left 2 ;.ac oct 100 1k 100meg
TEXT 728 -120 Left 2 ;designfeature By Grayson King and Tim Watkins, Analog Devices Inc\n \nBootstrapping your op amp\nyields wide voltage swings
TEXT 712 80 Left 2 ;abs(V(Op+)-V(op-))
TEXT 712 48 Left 2 ;.step param R2 40k 10k 5k
TEXT 720 16 Left 2 ;.step param rail 0 -5 -1
TEXT 1152 40 Left 2 ;.step temp list 27 80
TEXT -176 -496 Left 2 ;As with all op-amp applications, you\nmust ensure that the voltage at the noninverting\ninput always remains within\nthe device’s common-mode input range.\nWhereas this task is trivial in standard\nop-amp circuits with fixed power supplies,\nit requires more insight for bootstrapping\nconfigurations, in which the\nop-amp supply rails change with the output.\nEven as VCO and VEO change, VIN\nmust always remain between them (Figure\n2).You must guarantee this situation\nby design, or a latched condition might\noccur. To ensure that your design meets\ninput common-mode range under all\nconditions, you must address dc conditions,\ntransient conditions, phase reversal,\nand power-up conditions.
TEXT 1664 608 Left 2 ;.step param vsw 1 4 1
TEXT 1616 512 Left 2 !.dc V3 {-vsw} {vsw} 0.01
TEXT -498 1266 Left 2 !.tran {5/10k}
