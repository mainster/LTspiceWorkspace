Version 4
SHEET 1 1316 712
WIRE 528 -1504 528 -1552
WIRE 528 -1376 528 -1424
WIRE -224 -1232 -224 -1248
WIRE -304 -1152 -304 -1168
WIRE -304 -1152 -352 -1152
WIRE -224 -1152 -304 -1152
WIRE 560 -1136 560 -1184
WIRE 656 -1136 656 -1184
WIRE -432 -1088 -448 -1088
WIRE -400 -1088 -432 -1088
WIRE -400 -1008 -400 -1040
WIRE -352 -1008 -352 -1024
WIRE -304 -1008 -304 -1152
WIRE 560 -1008 560 -1056
WIRE 656 -1008 656 -1056
WIRE 656 -1008 560 -1008
WIRE 656 -976 656 -1008
WIRE 16 -928 16 -1040
WIRE 16 -928 -128 -928
WIRE -304 -880 -304 -928
WIRE -224 -880 -304 -880
WIRE -192 -880 -224 -880
WIRE 16 -880 16 -928
WIRE -304 -848 -304 -880
WIRE -128 -800 -128 -832
WIRE -80 -800 -128 -800
WIRE -32 -800 -80 -800
WIRE -304 -736 -304 -768
WIRE -128 -736 -128 -800
WIRE -96 -736 -128 -736
WIRE 16 -736 16 -784
WIRE 16 -736 -16 -736
WIRE -304 -704 -304 -736
WIRE 16 -688 16 -736
WIRE -400 -640 -400 -656
WIRE -720 -624 -736 -624
WIRE -640 -624 -720 -624
WIRE -528 -624 -560 -624
WIRE -496 -624 -528 -624
WIRE -432 -624 -496 -624
WIRE -304 -608 -304 -640
WIRE -304 -608 -368 -608
WIRE -432 -592 -464 -592
WIRE -1232 -576 -1248 -576
WIRE -1200 -576 -1232 -576
WIRE -1104 -576 -1120 -576
WIRE -1008 -576 -1024 -576
WIRE -400 -560 -400 -576
WIRE 16 -560 16 -608
WIRE 128 -560 16 -560
WIRE 208 -560 128 -560
WIRE 464 -560 272 -560
WIRE -1248 -544 -1248 -576
WIRE 16 -544 16 -560
WIRE 16 -544 -144 -544
WIRE 464 -544 464 -560
WIRE 16 -528 16 -544
WIRE -736 -496 -736 -624
WIRE -528 -496 -528 -624
WIRE -512 -496 -528 -496
WIRE -496 -496 -512 -496
WIRE -432 -496 -448 -496
WIRE -144 -496 -144 -544
WIRE -144 -496 -432 -496
WIRE -304 -464 -304 -608
WIRE -1248 -448 -1248 -480
WIRE 464 -448 464 -464
WIRE 864 -416 736 -416
WIRE -736 -400 -736 -416
WIRE -96 -400 -128 -400
WIRE 16 -400 16 -448
WIRE 16 -400 -16 -400
WIRE -304 -384 -304 -400
WIRE 736 -384 736 -416
WIRE -304 -368 -304 -384
WIRE 16 -368 16 -400
WIRE 16 -352 16 -368
WIRE -128 -336 -128 -400
WIRE -64 -336 -128 -336
WIRE -32 -336 -64 -336
WIRE 864 -320 864 -416
WIRE -128 -304 -128 -336
WIRE 688 -304 576 -304
WIRE 576 -288 576 -304
WIRE 736 -288 736 -304
WIRE 272 -272 240 -272
WIRE 464 -272 464 -368
WIRE 464 -272 272 -272
WIRE -304 -256 -304 -288
WIRE -240 -256 -304 -256
WIRE -192 -256 -240 -256
WIRE -304 -224 -304 -256
WIRE 736 -224 736 -288
WIRE 864 -224 864 -240
WIRE 16 -208 16 -256
WIRE 16 -208 -128 -208
WIRE 576 -176 576 -208
WIRE -304 -128 -304 -144
WIRE 240 -112 240 -272
WIRE 240 -112 80 -112
WIRE 80 -96 80 -112
WIRE 16 -80 16 -208
WIRE 16 -80 0 -80
WIRE 736 -80 640 -80
WIRE 848 -80 736 -80
WIRE 240 16 240 -112
WIRE 240 16 176 16
WIRE 736 16 736 -80
WIRE -528 32 -528 -496
WIRE -336 32 -528 32
WIRE -208 32 -256 32
WIRE 96 32 -144 32
WIRE 240 32 240 16
WIRE 640 32 640 0
WIRE 688 32 640 32
WIRE 96 64 96 32
WIRE 848 64 848 -80
WIRE 176 80 176 16
WIRE 96 160 96 144
WIRE 176 160 176 128
WIRE 240 160 240 112
WIRE 240 160 176 160
WIRE 848 160 848 144
WIRE 240 192 240 160
WIRE 736 192 736 112
WIRE -64 448 -64 384
WIRE -176 464 -224 464
WIRE -144 464 -176 464
WIRE -64 464 -64 448
FLAG 16 -1040 Vplus
FLAG 0 -80 Vmin
FLAG 128 -560 out_A
FLAG -64 -336 Gp1
FLAG 16 -368 Sp1
FLAG 16 -736 Sn1
FLAG -80 -800 Gn1
FLAG -496 -624 in
FLAG 656 -976 0
FLAG 656 -1184 Vmin
FLAG 560 -1184 Vplus
FLAG -736 -400 0
FLAG 1184 -784 0
FLAG 736 -224 0
FLAG 864 -224 0
FLAG 576 -176 0
FLAG 848 160 0
FLAG 736 192 0
FLAG -224 -880 b1
FLAG -240 -256 b2
FLAG -304 -736 d1
FLAG -304 -384 r4
FLAG -304 -48 0
FLAG -304 -1248 0
FLAG 240 192 0
FLAG -464 -592 0
FLAG -224 -1248 0
FLAG 528 -1552 Vcs
FLAG 528 -1376 0
FLAG -400 -1008 0
FLAG -432 -1088 b1
FLAG -352 -1008 0
FLAG -720 -624 stim
FLAG 768 656 0
FLAG -1456 672 0
FLAG 96 160 0
FLAG 512 -96 0
FLAG 416 -96 0
FLAG -1248 -448 0
FLAG -1232 -576 cl
FLAG 272 -272 shunt
FLAG -80 528 0
FLAG -64 528 0
FLAG -144 512 0
FLAG -64 384 lap
FLAG -176 464 stim
FLAG -928 -576 0
FLAG -400 -656 Vplus
FLAG -400 -560 Vmin
SYMBOL EIT_Semiconductors\\npn -192 -928 R0
SYMATTR InstName T1
SYMATTR Value 2N2222
SYMBOL EIT_Semiconductors\\pnp -192 -208 M180
SYMATTR InstName T2
SYMATTR Value 2N4403
SYMBOL res -112 -720 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R1
SYMATTR Value {bias}
SYMBOL res 0 -384 M270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R2
SYMATTR Value {bias}
SYMBOL res -320 -864 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res -320 -384 R0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL diode -320 -704 R0
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode -320 -464 R0
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL res 448 -464 R0
SYMATTR InstName Rload1
SYMATTR Value 1.5
SYMBOL EIT_Semiconductors\\nmos -32 -880 R0
SYMATTR InstName M1
SYMATTR Value IRFP240
SYMBOL EIT_Semiconductors\\pmos -32 -256 M180
SYMATTR InstName M2
SYMATTR Value IRFP9240
SYMBOL ind 448 -560 R0
SYMATTR InstName L1
SYMATTR Value 170µ
SYMBOL source-V 560 -1152 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -87 92 Left 2
SYMATTR Value {vsup}
SYMATTR InstName V1
SYMBOL source-V 656 -1152 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -72 98 Left 2
SYMATTR Value {-vsup}
SYMATTR InstName V2
SYMBOL source-V -736 -512 R0
WINDOW 123 -233 178 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -233 150 Left 2
SYMATTR Value2 AC 1
SYMATTR Value PULSE(-1 1 500u 10n 10n 2m 4m)
SYMATTR InstName V3
SYMBOL res -320 -240 R0
SYMATTR InstName R12
SYMATTR Value 1m
SYMBOL res -320 -1024 R0
SYMATTR InstName R13
SYMATTR Value 1m
SYMBOL EIT_Semiconductors\\nmos 688 -384 R0
SYMATTR InstName M3
SYMATTR Value IRFP240
SYMBOL source-V 864 -336 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -18 167 Left 2
SYMATTR Value 10
SYMATTR InstName V5
SYMBOL source-V 576 -304 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -18 167 Left 2
SYMATTR Value 10
SYMATTR InstName V6
SYMBOL EIT_Semiconductors\\pmos 688 112 M180
SYMATTR InstName M4
SYMATTR Value IRFP9240
SYMBOL source-V 848 48 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -18 167 Left 2
SYMATTR Value 10
SYMATTR InstName V4
SYMBOL source-V 640 16 R180
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -18 167 Left 2
SYMATTR Value 10
SYMATTR InstName V7
SYMBOL source-I -304 -1168 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value {IK1}
SYMBOL source-I -304 -48 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I2
SYMATTR Value {Ik1}
SYMBOL res 224 16 R0
SYMATTR InstName R5
SYMATTR Value 0.01
SYMBOL res -544 -640 R90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 0 -704 R0
SYMATTR InstName R8
SYMATTR Value {Rs}
SYMBOL res 0 -544 R0
SYMATTR InstName R9
SYMATTR Value {Rs}
SYMBOL res -240 -1248 R0
SYMATTR InstName R18
SYMATTR Value 100t
SYMBOL source-V 528 -1520 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -87 92 Left 2
SYMATTR Value 30
SYMATTR InstName V8
SYMBOL sw -352 -1008 M180
WINDOW 3 -72 121 Left 2
SYMATTR Value Osw
SYMATTR InstName S1
SYMBOL res -240 16 R90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R19
SYMATTR Value {Rf}
SYMBOL res -1008 -592 R90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName Rload3
SYMATTR Value {RL}
SYMBOL ind -912 -592 R90
WINDOW 0 6 56 VBottom 2
WINDOW 3 30 56 VTop 2
SYMATTR InstName L3
SYMATTR Value {LL}
SYMBOL cap -1264 -544 R0
SYMATTR InstName C3
SYMATTR Value {CL}
SYMBOL res -1104 -592 R90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 10
SYMBOL Misc\\jumper 240 -624 R0
SYMATTR InstName X1
SYMBOL crtl-V-V -64 432 R0
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL Misc\\jumper -176 -64 R0
SYMATTR InstName X2
SYMBOL Opamps\\opamp2 -400 -672 R0
SYMATTR InstName U5
SYMATTR Value ada4700
SYMATTR SpiceModel ada4700
SYMBOL crtl-V-V 96 48 M0
SYMATTR InstName E2
SYMATTR Value 1
SYMBOL res -416 -512 R90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R7
SYMATTR Value {Rf}
TEXT 512 -792 Left 2 ;.step param bias list 200 1k 2.4k
TEXT -672 -1536 Left 2 !.model npnx npn (Bf=200 Is={10m/exp(0.7/26m)}\n.model pnpx pnp (Bf=200 Is={10m/exp(0.7/26m)}\n.model Dx D (Is={(20*50u)/exp(0.7/26m)}\n.model Osw SW(Ron=10u Roff=10meg Vt=12 Vh=-.2)
TEXT 520 -888 Left 2 ;.ac oct 100 1k 100meg
TEXT 520 -856 Left 2 ;.step param Ik1 1m 1.05m 5u
TEXT -840 -328 Left 2 ;PULSE(-.5 .5 0 1m 1m 10m 23m)
TEXT -640 -720 Left 2 ;Vp=25 Vm=-25 Ilim=20m
TEXT 24 -1616 Left 2 !.param Ik1 = 3m\n.param bias = 1.8k\n.param Rs = 10m\n.param vsup = 30\n.param poti = 10k\n.param set = 0.5\n.param Rll = 5k\n.param FT = 10meg
TEXT 528 -824 Left 2 ;.temp 27 90
TEXT 512 -752 Left 2 ;.step param Rset 10 30 0.1
TEXT 520 -656 Left 2 ;.step param Rll 10 10k 200
TEXT -680 280 Left 2 ;.step param FT 10meg 50meg 10meg
TEXT 528 -1328 Left 2 !.tran 5m
TEXT 104 360 Left 2 ;.step param set 0.1 1 0.2
TEXT -1144 -480 Left 2 !.param LL=2.89m\n.param RL=1.535\n.param CL=470n
TEXT -112 -16 Left 2 ;{poti*(1-set)}
TEXT -304 656 Left 2 ;laplace=(9.265e5*s+9.89e11)/(6.004e5*s+s**2+2.489e12)
TEXT -496 104 Left 2 !.param Rf 100k\n;.step param Rf 100k 250k 50k
TEXT -848 -1688 Left 2 !.inc /home/mainster/.wine/drive_c/Program Files (x86)/LTC_orig/LTspiceIV_4.18/lib/sub/ADA4700.sub
RECTANGLE Normal -848 -1304 352 192 2
