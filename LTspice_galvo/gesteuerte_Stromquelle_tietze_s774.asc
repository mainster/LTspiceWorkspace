Version 4
SHEET 1 1292 1092
WIRE -160 -416 -160 -464
WIRE -64 -416 -64 -464
WIRE -672 -352 -720 -352
WIRE -640 -352 -672 -352
WIRE -640 -336 -640 -352
WIRE -720 -320 -720 -352
WIRE -320 -288 -352 -288
WIRE -304 -288 -320 -288
WIRE -160 -288 -160 -336
WIRE -64 -288 -64 -336
WIRE -64 -288 -160 -288
WIRE -352 -272 -352 -288
WIRE -64 -256 -64 -288
WIRE 1024 -240 912 -240
WIRE -720 -224 -720 -240
WIRE -640 -224 -640 -256
WIRE -112 -208 -144 -208
WIRE -96 -208 -112 -208
WIRE -144 -192 -144 -208
WIRE 112 -96 112 -128
WIRE 432 -96 432 -128
WIRE 304 16 208 16
WIRE 432 16 432 -16
WIRE 432 16 384 16
WIRE -224 48 -384 48
WIRE -208 48 -224 48
WIRE -384 80 -384 48
WIRE 272 80 272 64
WIRE 208 96 208 16
WIRE 240 96 208 96
WIRE 432 96 432 16
WIRE 384 112 304 112
WIRE 112 128 112 -16
WIRE 240 128 112 128
WIRE -384 176 -384 160
WIRE 192 272 48 272
WIRE -176 304 -176 288
WIRE 112 304 112 128
WIRE -176 320 -176 304
WIRE 48 320 48 272
WIRE 80 320 48 320
WIRE -208 336 -224 336
WIRE 192 336 192 272
WIRE 192 336 144 336
WIRE 256 336 192 336
WIRE 304 336 256 336
WIRE 432 336 432 192
WIRE 576 336 432 336
WIRE 704 336 576 336
WIRE 912 336 704 336
WIRE -112 352 -144 352
WIRE 0 352 -48 352
WIRE 80 352 0 352
WIRE 304 352 304 336
WIRE 704 352 704 336
WIRE -480 368 -512 368
WIRE -416 368 -480 368
WIRE -272 368 -336 368
WIRE -208 368 -272 368
WIRE -176 400 -176 384
WIRE 912 400 912 336
WIRE -272 432 -272 368
WIRE 304 448 304 432
WIRE 704 464 704 432
WIRE 832 464 704 464
WIRE 432 496 432 336
WIRE 912 528 912 480
WIRE 272 544 272 528
WIRE 112 560 112 368
WIRE 240 560 112 560
WIRE 384 576 304 576
WIRE 240 592 208 592
WIRE 704 624 704 544
WIRE 784 624 704 624
WIRE 208 640 208 592
WIRE 304 640 208 640
WIRE 432 640 432 592
WIRE 432 640 384 640
WIRE 912 640 912 592
WIRE 832 656 832 464
WIRE 880 656 832 656
WIRE 112 688 112 560
WIRE 432 688 432 640
WIRE 880 704 880 656
WIRE 112 816 112 768
WIRE 432 816 432 768
WIRE 880 832 880 784
WIRE -272 864 -272 512
WIRE 704 864 704 624
WIRE 704 864 656 864
WIRE 704 880 704 864
WIRE 960 896 928 896
WIRE 784 928 784 624
WIRE 880 928 880 912
WIRE 880 928 784 928
WIRE 960 928 960 896
WIRE 880 944 880 928
WIRE 960 944 960 928
WIRE 576 976 576 944
WIRE 704 976 704 960
WIRE 704 976 576 976
WIRE 704 992 704 976
WIRE 960 1056 960 1008
FLAG -352 -192 0
FLAG -320 -288 stim
FLAG -720 -224 0
FLAG -640 -224 0
FLAG -672 -352 I_cmd
FLAG -64 -256 0
FLAG -64 -464 V-
FLAG -160 -464 V+
FLAG 576 336 out_A
FLAG 704 992 0
FLAG 656 864 shunt
FLAG 272 64 V+
FLAG 272 528 V-
FLAG 272 144 0
FLAG 272 608 0
FLAG 304 448 0
FLAG 432 -128 V+
FLAG 112 816 V-
FLAG 432 816 V-
FLAG 112 -128 V+
FLAG -480 368 stim
FLAG 256 336 op1
FLAG -176 400 V+
FLAG -176 304 V-
FLAG -224 336 0
FLAG 0 352 stim
FLAG 912 640 0
FLAG -384 176 0
FLAG -224 48 stim2
FLAG -144 -112 0
FLAG -112 -208 stimOff
FLAG 960 1056 0
FLAG 992 1072 0
FLAG 928 848 0
SYMBOL Opamps\\LT1354 112 272 R0
SYMATTR InstName U1
SYMBOL Opamps\\LT1632 272 640 M180
SYMATTR InstName U2
SYMBOL Opamps\\LT1632 272 48 R0
SYMATTR InstName U3
SYMBOL source-V -352 -288 R0
WINDOW 123 28 56 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -157 113 Left 2
SYMATTR Value2 AC 1
SYMATTR Value PULSE(-1 1 2m 50n 50n 2m 4m)
SYMATTR InstName V1
SYMBOL current -720 -240 R180
WINDOW 0 24 80 Left 2
WINDOW 3 -193 -75 Left 2
WINDOW 123 -193 -103 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I_cmd1
SYMATTR Value PULSE({-Ipeak} {Ipeak} 0 20n 20n 1m 2m)
SYMBOL res -656 -352 R0
SYMATTR InstName RI_cmd1
SYMATTR Value 1
SYMBOL source-V -160 -432 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -87 92 Left 2
SYMATTR Value {vsup}
SYMATTR InstName V2
SYMBOL source-V -64 -432 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -72 98 Left 2
SYMATTR Value {-vsup}
SYMATTR InstName V3
SYMBOL res 688 448 R0
WINDOW 3 59 99 Left 2
SYMATTR Value 1.5
SYMATTR InstName Rload1
SYMBOL res 688 864 R0
SYMATTR InstName Rshunt1
SYMATTR Value 0.01
SYMBOL ind 688 336 R0
SYMATTR InstName L1
SYMATTR Value 170µ
SYMATTR SpiceLine Rpar=1meg Cpar=100p
SYMBOL nmos 384 496 R0
SYMATTR InstName M1
SYMATTR Value IRFP240
SYMBOL EIT_Semiconductors\\pmos 384 192 M180
SYMATTR InstName M2
SYMATTR Value IRFP9240
SYMBOL res 320 336 M0
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL res 96 -112 R0
SYMATTR InstName R3
SYMATTR Value 10
SYMBOL res 128 784 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 10
SYMBOL res 416 -112 R0
SYMATTR InstName R5
SYMATTR Value 0.01
SYMBOL res 416 672 R0
SYMATTR InstName R6
SYMATTR Value 0.01
SYMBOL res 400 624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10µ
SYMBOL res 400 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10µ
SYMBOL Opamps\\LT1632 -176 416 M180
SYMATTR InstName U4
SYMBOL res -288 416 R0
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res -320 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL Misc\\jumper -80 304 R0
SYMATTR InstName X1
SYMBOL res 896 384 R0
SYMATTR InstName R10
SYMATTR Value 25
SYMBOL cap 896 528 R0
SYMATTR InstName C1
SYMATTR Value 100µ
SYMBOL bv -384 64 R0
SYMATTR InstName B1
SYMATTR Value V=V(stim)+V(stimOff)
SYMBOL source-V -144 -208 R0
WINDOW 123 28 56 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -157 113 Left 2
SYMATTR Value2 AC 1
SYMATTR Value PULSE(1 0 2m 50n 50n 1)
SYMATTR InstName V4
SYMBOL res 864 688 R0
SYMATTR InstName R11
SYMATTR Value 2
SYMBOL sw 880 816 M0
SYMATTR InstName S1
SYMATTR Value SWx
SYMBOL source-V 960 912 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -87 92 Left 2
SYMATTR Value PULSE(-1 1 3m 500u 100u 0.5m)
SYMATTR InstName V5
TEXT -568 -56 Left 2 !.param Ipeak=30\n.param Vsup=30
TEXT -336 24 Left 2 !.tran 5m
TEXT -200 992 Left 2 !.model SWx SW(Ron=1u Roff=100Meg Vt=0 Vh=-.5 )
