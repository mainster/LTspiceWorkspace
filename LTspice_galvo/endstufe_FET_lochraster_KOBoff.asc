Version 4
SHEET 1 1316 712
WIRE 528 -1504 528 -1552
WIRE 528 -1376 528 -1424
WIRE -1072 -1328 -1200 -1328
WIRE -1200 -1296 -1200 -1328
WIRE -544 -1232 -672 -1232
WIRE -224 -1232 -224 -1248
WIRE -1104 -1216 -1136 -1216
WIRE -992 -1216 -1104 -1216
WIRE -672 -1200 -672 -1232
WIRE -1104 -1184 -1104 -1216
WIRE -992 -1184 -992 -1216
WIRE -304 -1152 -304 -1168
WIRE -304 -1152 -352 -1152
WIRE -224 -1152 -304 -1152
WIRE 560 -1136 560 -1184
WIRE 656 -1136 656 -1184
WIRE -576 -1120 -608 -1120
WIRE -576 -1088 -576 -1120
WIRE -432 -1088 -448 -1088
WIRE -400 -1088 -432 -1088
WIRE -1200 -1072 -1200 -1136
WIRE -1104 -1072 -1104 -1104
WIRE -1104 -1072 -1200 -1072
WIRE -1104 -1040 -1104 -1072
WIRE -400 -1008 -400 -1040
WIRE -352 -1008 -352 -1024
WIRE -304 -1008 -304 -1152
WIRE 560 -1008 560 -1056
WIRE 656 -1008 656 -1056
WIRE 656 -1008 560 -1008
WIRE -1200 -992 -1200 -1072
WIRE -1168 -992 -1200 -992
WIRE -672 -976 -672 -1040
WIRE -576 -976 -576 -1008
WIRE -576 -976 -672 -976
WIRE 656 -976 656 -1008
WIRE 16 -928 16 -1040
WIRE 16 -928 -128 -928
WIRE -576 -912 -576 -976
WIRE -1104 -896 -1104 -944
WIRE -992 -896 -992 -1104
WIRE -992 -896 -1104 -896
WIRE -576 -896 -576 -912
WIRE -304 -880 -304 -928
WIRE -224 -880 -304 -880
WIRE -192 -880 -224 -880
WIRE 16 -880 16 -928
WIRE -304 -848 -304 -880
WIRE -1104 -832 -1104 -896
WIRE -576 -800 -576 -832
WIRE -128 -800 -128 -832
WIRE -80 -800 -128 -800
WIRE -32 -800 -80 -800
WIRE -304 -736 -304 -768
WIRE -128 -736 -128 -800
WIRE -96 -736 -128 -736
WIRE 16 -736 16 -784
WIRE 16 -736 -16 -736
WIRE -1104 -720 -1104 -752
WIRE -304 -704 -304 -736
WIRE 16 -688 16 -736
WIRE -1232 -576 -1248 -576
WIRE -1200 -576 -1232 -576
WIRE -1104 -576 -1120 -576
WIRE -1008 -576 -1024 -576
WIRE -736 -576 -928 -576
WIRE -720 -576 -736 -576
WIRE -640 -576 -720 -576
WIRE -528 -576 -560 -576
WIRE -496 -576 -528 -576
WIRE -432 -576 -496 -576
WIRE -336 -560 -368 -560
WIRE -304 -560 -304 -640
WIRE -304 -560 -336 -560
WIRE 16 -560 16 -608
WIRE 128 -560 16 -560
WIRE 208 -560 128 -560
WIRE 464 -560 272 -560
WIRE -1248 -544 -1248 -576
WIRE -432 -544 -464 -544
WIRE 464 -544 464 -560
WIRE 16 -528 16 -560
WIRE -736 -496 -736 -576
WIRE -304 -464 -304 -560
WIRE -1248 -448 -1248 -480
WIRE -736 -400 -736 -416
WIRE -96 -400 -128 -400
WIRE 16 -400 16 -448
WIRE 16 -400 -16 -400
WIRE -304 -384 -304 -400
WIRE 464 -384 464 -464
WIRE -304 -368 -304 -384
WIRE 16 -368 16 -400
WIRE 16 -352 16 -368
WIRE -128 -336 -128 -400
WIRE -64 -336 -128 -336
WIRE -32 -336 -64 -336
WIRE -128 -304 -128 -336
WIRE 464 -288 464 -304
WIRE 1168 -288 1040 -288
WIRE -1104 -272 -1168 -272
WIRE -1088 -272 -1104 -272
WIRE -304 -256 -304 -288
WIRE -240 -256 -304 -256
WIRE -192 -256 -240 -256
WIRE 1040 -256 1040 -288
WIRE -1168 -240 -1168 -272
WIRE -304 -224 -304 -256
WIRE 16 -208 16 -256
WIRE 16 -208 -128 -208
WIRE 1168 -192 1168 -288
WIRE -688 -176 -688 -208
WIRE 992 -176 880 -176
WIRE 880 -160 880 -176
WIRE 1040 -160 1040 -176
WIRE -1168 -128 -1168 -160
WIRE -576 -128 -576 -176
WIRE 240 -112 80 -112
WIRE 272 -112 240 -112
WIRE 464 -112 464 -208
WIRE 464 -112 272 -112
WIRE -304 -96 -304 -144
WIRE 1040 -96 1040 -160
WIRE 1168 -96 1168 -112
WIRE -688 -80 -688 -96
WIRE -640 -80 -688 -80
WIRE 16 -80 16 -208
WIRE 16 -80 0 -80
WIRE 80 -80 80 -112
WIRE 880 -48 880 -80
WIRE -688 -32 -688 -80
WIRE 240 -16 240 -112
WIRE -576 0 -576 -32
WIRE -576 0 -656 0
WIRE -576 32 -576 0
WIRE -528 32 -528 -576
WIRE 80 32 80 0
WIRE 80 32 -528 32
WIRE 80 48 80 32
WIRE 1040 48 944 48
WIRE 1152 48 1040 48
WIRE -688 128 -688 32
WIRE -624 128 -688 128
WIRE -576 128 -576 112
WIRE -576 128 -624 128
WIRE 80 144 80 128
WIRE 240 144 240 64
WIRE 1040 144 1040 48
WIRE 944 160 944 128
WIRE 992 160 944 160
WIRE 1152 192 1152 48
WIRE 1152 288 1152 272
WIRE 1040 320 1040 240
WIRE -64 448 -64 384
WIRE -176 464 -224 464
WIRE -144 464 -176 464
WIRE -64 464 -64 448
FLAG 16 -1040 Vplus
FLAG 0 -80 Vmin
FLAG 128 -560 out_A
FLAG -64 -336 Gp1
FLAG 16 -368 Sp1
FLAG 16 -736 Sn1
FLAG -80 -800 Gn1
FLAG -496 -576 in
FLAG -688 -208 Vplus
FLAG -624 128 Vmin
FLAG 656 -976 0
FLAG 656 -1184 Vmin
FLAG 560 -1184 Vplus
FLAG -736 -400 0
FLAG 1184 -784 0
FLAG 1040 -96 0
FLAG 1168 -96 0
FLAG 880 -48 0
FLAG 1152 288 0
FLAG 1040 320 0
FLAG -224 -880 b1
FLAG -240 -256 b2
FLAG -304 -736 d1
FLAG -304 -384 r4
FLAG -304 -16 0
FLAG -304 -1248 0
FLAG 240 144 0
FLAG -464 -544 0
FLAG -544 -1232 0
FLAG -576 -256 0
FLAG -1072 -1328 0
FLAG -1104 -720 0
FLAG -576 -800 0
FLAG -224 -1248 0
FLAG 528 -1552 Vcs
FLAG 528 -1376 0
FLAG -400 -1008 0
FLAG -432 -1088 b1
FLAG -352 -1008 0
FLAG -720 -576 stim
FLAG 768 656 0
FLAG -1456 672 0
FLAG 80 144 0
FLAG 864 208 0
FLAG 768 208 0
FLAG -1248 -448 0
FLAG -1232 -576 cl
FLAG 272 -112 shunt
FLAG -336 -560 opOut
FLAG -1168 -128 0
FLAG -1104 -272 gnd1
FLAG -80 528 0
FLAG -64 528 0
FLAG -144 512 0
FLAG -64 384 lap
FLAG -176 464 stim
SYMBOL EIT_Semiconductors\\npn -192 -928 R0
SYMATTR InstName T1
SYMATTR Value 2N2222
SYMBOL EIT_Semiconductors\\pnp -192 -208 M180
SYMATTR InstName T2
SYMATTR Value 2N4403
SYMBOL res -112 -720 R270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R1
SYMATTR Value {bias}
SYMBOL res 0 -384 M270
WINDOW 0 25 56 VTop 2
WINDOW 3 7 56 VBottom 2
SYMATTR InstName R2
SYMATTR Value {bias}
SYMBOL res -320 -864 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res -320 -384 R0
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL diode -320 -704 R0
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode -320 -464 R0
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL res 448 -304 R0
SYMATTR InstName Rload1
SYMATTR Value 1.53
SYMBOL EIT_Semiconductors\\nmos -32 -880 R0
SYMATTR InstName M1
SYMATTR Value IRFP240
SYMBOL EIT_Semiconductors\\pmos -32 -256 M180
SYMATTR InstName M2
SYMATTR Value IRFP9240
SYMBOL ind 448 -400 R0
SYMATTR InstName L1
SYMATTR Value 2.888m
SYMBOL res -672 -192 M0
SYMATTR InstName R10
SYMATTR Value 4.7k
SYMBOL EIT_Semiconductors\\npn -640 -128 R0
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL res -592 16 R0
SYMATTR InstName R11
SYMATTR Value 315
SYMBOL source-V 560 -1152 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -87 92 Left 2
SYMATTR Value {vsup}
SYMATTR InstName V1
SYMBOL source-V 656 -1152 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -72 98 Left 2
SYMATTR Value {-vsup}
SYMATTR InstName V2
SYMBOL source-V -736 -512 R0
WINDOW 123 -233 178 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -233 150 Left 2
SYMATTR Value2 AC -1
SYMATTR Value PULSE(-1.5 1.5 0 10u 10u 5m 10m)
SYMATTR InstName V3
SYMBOL res -320 -240 R0
SYMATTR InstName R12
SYMATTR Value 1m
SYMBOL res -320 -1024 R0
SYMATTR InstName R13
SYMATTR Value 1m
SYMBOL EIT_Semiconductors\\op_3 -400 -560 R0
WINDOW 123 -264 -90 Left 2
WINDOW 3 -604 -117 Left 2
SYMATTR Value2 FT={FT} SR=10
SYMATTR Value Vp={0.95*Vsup} Vm={-0.95*Vsup} Ilim=20m
SYMATTR InstName U1
SYMBOL EIT_Semiconductors\\nmos 992 -256 R0
SYMATTR InstName M3
SYMATTR Value IRFP240
SYMBOL source-V 1168 -208 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -18 167 Left 2
SYMATTR Value 10
SYMATTR InstName V5
SYMBOL source-V 880 -176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -18 167 Left 2
SYMATTR Value 10
SYMATTR InstName V6
SYMBOL EIT_Semiconductors\\pmos 992 240 M180
SYMATTR InstName M4
SYMATTR Value IRFP9240
SYMBOL source-V 1152 176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -18 167 Left 2
SYMATTR Value 10
SYMATTR InstName V4
SYMBOL source-V 944 144 R180
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -18 167 Left 2
SYMATTR Value 10
SYMATTR InstName V7
SYMBOL source-I -304 -1168 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I1
SYMATTR Value {IK1}
SYMBOL source-I -304 -16 R180
WINDOW 0 29 73 Left 2
WINDOW 3 29 17 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName I2
SYMATTR Value {Ik1}
SYMBOL res 224 -32 R0
SYMATTR InstName R5
SYMATTR Value 0.1
SYMBOL res -544 -592 R90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 0 -704 R0
SYMATTR InstName R8
SYMATTR Value {Rs}
SYMBOL res 0 -544 R0
SYMATTR InstName R9
SYMATTR Value {Rs}
SYMBOL res -592 -1104 R0
SYMATTR InstName R14
SYMATTR Value 25
SYMBOL res -1120 -1200 R0
SYMATTR InstName R20
SYMATTR Value 166
SYMBOL res -1008 -1200 R0
SYMATTR InstName R21
SYMATTR Value {6.8*166}
SYMBOL EIT_Semiconductors\\npn -1168 -1040 R0
SYMATTR InstName Q3
SYMATTR Value BC547B
SYMBOL res -1120 -848 R0
SYMATTR InstName R17
SYMATTR Value 100
SYMBOL res -592 -272 R0
SYMATTR InstName R16
SYMATTR Value 100
SYMBOL res -240 -1248 R0
SYMATTR InstName R18
SYMATTR Value 100t
SYMBOL res -592 -928 R0
SYMATTR InstName R15
SYMATTR Value 100
SYMBOL source-V 528 -1520 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -87 92 Left 2
SYMATTR Value 30
SYMATTR InstName V8
SYMBOL sw -352 -1008 M180
WINDOW 3 -72 121 Left 2
SYMATTR Value Osw
SYMATTR InstName S1
SYMBOL res 64 -96 R0
SYMATTR InstName R19
SYMATTR Value {Rf}
SYMBOL res -1008 -592 R90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName Rload3
SYMATTR Value {RL}
SYMBOL ind -912 -592 R90
WINDOW 0 6 56 VBottom 2
WINDOW 3 30 56 VTop 2
SYMATTR InstName L3
SYMATTR Value {LL}
SYMBOL cap -1264 -544 R0
SYMATTR InstName C3
SYMATTR Value {CL}
SYMBOL res -1104 -592 R90
WINDOW 0 7 56 VBottom 2
WINDOW 3 25 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 10
SYMBOL source-V -1168 -256 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V9
SYMATTR Value 1µ
SYMBOL Misc\\jumper 240 -624 R0
SYMATTR InstName X1
SYMBOL crtl-V-V -64 432 R0
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL res 448 -560 R0
SYMATTR InstName Rload2
SYMATTR Value 1.53
TEXT 512 -792 Left 2 ;.step param bias list 200 1k 2.4k
TEXT -672 -1536 Left 2 !.model npnx npn (Bf=200 Is={10m/exp(0.7/26m)}\n.model pnpx pnp (Bf=200 Is={10m/exp(0.7/26m)}\n.model Dx D (Is={(20*50u)/exp(0.7/26m)}\n.model Osw SW(Ron=10u Roff=10meg Vt=12 Vh=-.2)
TEXT 520 -888 Left 2 ;.ac oct 100 1k 100meg
TEXT 520 -856 Left 2 ;.step param Ik1 1m 1.05m 5u
TEXT -840 -328 Left 2 ;PULSE(-.5 .5 0 1m 1m 10m 23m)
TEXT -640 -720 Left 2 ;Vp=25 Vm=-25 Ilim=20m
TEXT 24 -1616 Left 2 !.param Ik1 = 3m\n.param bias = 1.5k\n.param Rs = 1u\n.param vsup = 12\n.param poti = 10k\n.param set = 0.5\n.param Rll = 5k\n.param FT = 10meg
TEXT 528 -824 Left 2 ;.temp 27 90
TEXT 512 -752 Left 2 ;.step param Rset 10 30 0.1
TEXT 520 -656 Left 2 ;.step param Rll 10 10k 200
TEXT -680 280 Left 2 ;.step param FT 10meg 50meg 10meg
TEXT 528 -1328 Left 2 !.dc V3 -5 5 0.01
TEXT 104 360 Left 2 ;.step param set 0.1 1 0.2
TEXT -1144 -480 Left 2 !.param LL=2.89m\n.param RL=1.535\n.param CL=470n
TEXT -112 -16 Left 2 ;{poti*(1-set)}
TEXT -304 104 Left 2 ;.step param Rf 400 100 -50
TEXT -128 152 Left 2 !.param Rf=250
RECTANGLE Normal -848 -1304 352 192 2
RECTANGLE Normal 608 -176 416 -416 2
